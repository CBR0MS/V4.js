!function(a,b){typeof exports==='object'&&typeof module!=='undefined'?b(exports):typeof define==='function'&&define.amd?define(['exports'],b):(a=a||self, b(a.V4={}))}(this,function(g){'use strict';function h(a){typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?(h=function(a){return typeof a}):(h=function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a});return h(a)}function j(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return};h.done?b(i):Promise.resolve(i).then(d,e)}function k(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){j(f,d,e,g,h,"next",a)}function h(a){j(f,d,e,g,h,"throw",a)}g(undefined)})}}function o(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function w(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value" in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function z(a,b,c){b&&w(a.prototype,b);c&&w(a,c);return a}String.prototype.codePointAt||(!function(){var a=function(){try{var a={},b=Object.defineProperty,c=b(a,a,a)&&b}catch(a){};return c}(),b=function(a){if(this==null){throw TypeError()}var b=String(this),c=b.length,d=a?Number(a):0;d!=d&&(d=0);if(d<0||d>=c){return undefined}var e=b.charCodeAt(d),f;if(e>=0xD800&&e<=0xDBFF&&c>d+1){f=b.charCodeAt(d+1);if(f>=0xDC00&&f<=0xDFFF){return(e-0xD800)*0x400+f-0xDC00+0x10000}}return e};a?a(String.prototype,'codePointAt',{'value':b,'configurable':!0,'writable':!0}):(String.prototype.codePointAt=b)}());var A=0,B=-3;function C(){this.table=new Uint16Array(16);this.trans=new Uint16Array(288)}function D(a,b){this.source=a;this.sourceIndex=0;this.tag=0;this.bitcount=0;this.dest=b;this.destLen=0;this.ltree=new C();this.dtree=new C()}var E=new C(),F=new C(),G=new Uint8Array(30),H=new Uint16Array(30),I=new Uint8Array(30),J=new Uint16Array(30),K=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),L=new C(),M=new Uint8Array(320);function N(a,b,c,d){var e,f;for(e=0;e<c;++e)a[e]=0;for(e=0;e<30-c;++e)a[e+c]=e/c|0;for(f=d, e=0;e<30;++e)b[e]=f,f+=1<<a[e]}function O(a,b){var c;for(c=0;c<7;++c)a.table[c]=0;a.table[7]=24;a.table[8]=152;a.table[9]=112;for(c=0;c<24;++c)a.trans[c]=256+c;for(c=0;c<144;++c)a.trans[24+c]=c;for(c=0;c<8;++c)a.trans[168+c]=280+c;for(c=0;c<112;++c)a.trans[176+c]=144+c;for(c=0;c<5;++c)b.table[c]=0;b.table[5]=32;for(c=0;c<32;++c)b.trans[c]=c}var P=new Uint16Array(16);function Q(a,b,c,d){var e,f;for(e=0;e<16;++e)a.table[e]=0;for(e=0;e<d;++e)a.table[b[c+e]]++;a.table[0]=0;for(f=0, e=0;e<16;++e)P[e]=f,f+=a.table[e];for(e=0;e<d;++e)b[c+e]&&(a.trans[P[b[c+e]]++]=e)}function R(a){a.bitcount--||(a.tag=a.source[a.sourceIndex++],a.bitcount=7);var b=a.tag&1;a.tag>>>=1;return b}function S(a,b,c){if(!b)return c;while(a.bitcount<24)a.tag|=a.source[a.sourceIndex++]<<a.bitcount,a.bitcount+=8;var d=a.tag&0xffff>>>16-b;a.tag>>>=b;a.bitcount-=b;return d+c}function T(a,b){while(a.bitcount<24)a.tag|=a.source[a.sourceIndex++]<<a.bitcount,a.bitcount+=8;var c=0,d=0,e=0,f=a.tag;do{d=2*d+(f&1),f>>>=1,++e,c+=b.table[e],d-=b.table[e]}while(d>=0);a.tag=f;a.bitcount-=e;return b.trans[c+d]}function U(a,b,c){var d,e,f,g,h,i;d=S(a,5,257);e=S(a,5,1);f=S(a,4,4);for(g=0;g<19;++g)M[g]=0;for(g=0;g<f;++g){var j=S(a,3,0);M[K[g]]=j}Q(L,M,0,19);for(h=0;h<d+e;){var k=T(a,L);switch(k){case 16:var l=M[h-1];for(i=S(a,2,3);i;--i)M[h++]=l;break;case 17:for(i=S(a,3,3);i;--i)M[h++]=0;break;case 18:for(i=S(a,7,11);i;--i)M[h++]=0;break;default:M[h++]=k;break}}Q(b,M,0,d);Q(c,M,d,e)}function V(a,b,c){while(1){var d=T(a,b);if(d===256){return A}if(d<256)a.dest[a.destLen++]=d;else{var e,f,g,h;d-=257;e=S(a,G[d],H[d]);f=T(a,c);g=a.destLen-S(a,I[f],J[f]);for(h=g;h<g+e;++h)a.dest[a.destLen++]=a.dest[h]}}}function W(a){var b,c,d;while(a.bitcount>8)a.sourceIndex--,a.bitcount-=8;b=a.source[a.sourceIndex+1];b=256*b+a.source[a.sourceIndex];c=a.source[a.sourceIndex+3];c=256*c+a.source[a.sourceIndex+2];if(b!==(~c&0x0000ffff))return B;a.sourceIndex+=4;for(d=b;d;--d)a.dest[a.destLen++]=a.source[a.sourceIndex++];a.bitcount=0;return A}function X(a,b){var c=new D(a,b),d,e,f;do{d=R(c);e=S(c,2,0);switch(e){case 0:f=W(c);break;case 1:f=V(c,E,F);break;case 2:U(c,c.ltree,c.dtree);f=V(c,c.ltree,c.dtree);break;default:f=B};if(f!==A)throw new Error('Data error')}while(!d);if(c.destLen<c.dest.length){if(typeof c.dest.slice==='function')return c.dest.slice(0,c.destLen);else return c.dest.subarray(0,c.destLen)}return c.dest}O(E,F);N(G,H,4,3);N(I,J,2,1);G[28]=0;H[28]=258;var Y=X;function Z(a,b,c,d,e){return Math.pow(1-e,3)*a+3*Math.pow(1-e,2)*e*b+3*(1-e)*Math.pow(e,2)*c+Math.pow(e,3)*d}function _(){this.x1=Number.NaN;this.y1=Number.NaN;this.x2=Number.NaN;this.y2=Number.NaN}_.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};_.prototype.addPoint=function(a,b){typeof a==='number'&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=a,this.x2=a),a<this.x1&&(this.x1=a),a>this.x2&&(this.x2=a));typeof b==='number'&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=b,this.y2=b),b<this.y1&&(this.y1=b),b>this.y2&&(this.y2=b))};_.prototype.addX=function(a){this.addPoint(a,null)};_.prototype.addY=function(a){this.addPoint(null,a)};_.prototype.addBezier=function(a,b,c,d,e,f,g,h){let i=[a,b],j=[c,d],k=[e,f],l=[g,h];this.addPoint(a,b);this.addPoint(g,h);for(let a=0;a<=1;a++){let b=6*i[a]-12*j[a]+6*k[a],c=-3*i[a]+9*j[a]-9*k[a]+3*l[a],d=3*j[a]-3*i[a];if(c===0){if(b===0)continue;let c=-d/b;0<c&&c<1&&(a===0&&this.addX(Z(i[a],j[a],k[a],l[a],c)),a===1&&this.addY(Z(i[a],j[a],k[a],l[a],c)));continue}let e=Math.pow(b,2)-4*d*c;if(e<0)continue;let f=(-b+Math.sqrt(e))/(2*c);0<f&&f<1&&(a===0&&this.addX(Z(i[a],j[a],k[a],l[a],f)),a===1&&this.addY(Z(i[a],j[a],k[a],l[a],f)));let g=(-b-Math.sqrt(e))/(2*c);0<g&&g<1&&(a===0&&this.addX(Z(i[a],j[a],k[a],l[a],g)),a===1&&this.addY(Z(i[a],j[a],k[a],l[a],g)))}};_.prototype.addQuad=function(a,b,c,d,e,f){let g=a+0.6666666666666666*(c-a),h=b+0.6666666666666666*(d-b),i=g+0.3333333333333333*(e-a),j=h+0.3333333333333333*(f-b);this.addBezier(a,b,g,h,i,j,e,f)};function $(){this.commands=[];this.fill='black';this.stroke=null;this.strokeWidth=1}$.prototype.moveTo=function(a,b){this.commands.push({type:'M',x:a,y:b})};$.prototype.lineTo=function(a,b){this.commands.push({type:'L',x:a,y:b})};$.prototype.curveTo=$.prototype.bezierCurveTo=function(a,b,c,d,e,f){this.commands.push({type:'C',x1:a,y1:b,x2:c,y2:d,x:e,y:f})};$.prototype.quadTo=$.prototype.quadraticCurveTo=function(a,b,c,d){this.commands.push({type:'Q',x1:a,y1:b,x:c,y:d})};$.prototype.close=$.prototype.closePath=function(){this.commands.push({type:'Z'})};$.prototype.extend=function(a){if(a.commands)a=a.commands;else if(a instanceof _){let b=a;this.moveTo(b.x1,b.y1);this.lineTo(b.x2,b.y1);this.lineTo(b.x2,b.y2);this.lineTo(b.x1,b.y2);this.close();return};Array.prototype.push.apply(this.commands,a)};$.prototype.getBoundingBox=function(){let a=new _(),b=0,c=0,d=0,e=0;for(let f=0;f<this.commands.length;f++){let g=this.commands[f];switch(g.type){case 'M':a.addPoint(g.x,g.y);b=d=g.x;c=e=g.y;break;case 'L':a.addPoint(g.x,g.y);d=g.x;e=g.y;break;case 'Q':a.addQuad(d,e,g.x1,g.y1,g.x,g.y);d=g.x;e=g.y;break;case 'C':a.addBezier(d,e,g.x1,g.y1,g.x2,g.y2,g.x,g.y);d=g.x;e=g.y;break;case 'Z':d=b;e=c;break;default:throw new Error('Unexpected path command '+g.type)}}a.isEmpty()&&a.addPoint(0,0);return a};$.prototype.draw=function(a){a.beginPath();for(let b=0;b<this.commands.length;b+=1){let c=this.commands[b];c.type==='M'?a.moveTo(c.x,c.y):c.type==='L'?a.lineTo(c.x,c.y):c.type==='C'?a.bezierCurveTo(c.x1,c.y1,c.x2,c.y2,c.x,c.y):c.type==='Q'?a.quadraticCurveTo(c.x1,c.y1,c.x,c.y):c.type==='Z'&&a.closePath()}this.fill&&(a.fillStyle=this.fill,a.fill());this.stroke&&(a.strokeStyle=this.stroke,a.lineWidth=this.strokeWidth,a.stroke())};$.prototype.toPathData=function(a){a=a!==undefined?a:2;function b(b){if(Math.round(b)===b){return''+Math.round(b)}else{return b.toFixed(a)}}function c(){let a='';for(let c=0;c<arguments.length;c+=1){let d=arguments[c];d>=0&&c>0&&(a+=' ');a+=b(d)}return a}let d='';for(let a=0;a<this.commands.length;a+=1){let b=this.commands[a];b.type==='M'?(d+='M'+c(b.x,b.y)):b.type==='L'?(d+='L'+c(b.x,b.y)):b.type==='C'?(d+='C'+c(b.x1,b.y1,b.x2,b.y2,b.x,b.y)):b.type==='Q'?(d+='Q'+c(b.x1,b.y1,b.x,b.y)):b.type==='Z'&&(d+='Z')}return d};$.prototype.toSVG=function(a){let b='<path d="';b+=this.toPathData(a);b+='"';this.fill&&this.fill!=='black'&&(this.fill===null?(b+=' fill="none"'):(b+=' fill="'+this.fill+'"'));this.stroke&&(b+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"');b+='/>';return b};$.prototype.toDOMElement=function(a){let b=this.toPathData(a),c=document.createElementNS('http://www.w3.org/2000/svg','path');c.setAttribute('d',b);return c};function aa(a){throw new Error(a)}function ac(a,b){a||aa(b)}var ad={fail:aa,argument:ac,assert:ac};let ae=32768,af=2147483648,ag={},ah={},ai={};function aj(a){return function(){return a}}ah.BYTE=function(a){ad.argument(a>=0&&a<=255,'Byte value should be between 0 and 255.');return[a]};ai.BYTE=aj(1);ah.CHAR=function(a){return[a.charCodeAt(0)]};ai.CHAR=aj(1);ah.CHARARRAY=function(a){let b=[];for(let c=0;c<a.length;c+=1)b[c]=a.charCodeAt(c);return b};ai.CHARARRAY=function(a){return a.length};ah.USHORT=function(a){return[a>>8&0xFF,a&0xFF]};ai.USHORT=aj(2);ah.SHORT=function(a){a>=ae&&(a=-(2*ae-a));return[a>>8&0xFF,a&0xFF]};ai.SHORT=aj(2);ah.UINT24=function(a){return[a>>16&0xFF,a>>8&0xFF,a&0xFF]};ai.UINT24=aj(3);ah.ULONG=function(a){return[a>>24&0xFF,a>>16&0xFF,a>>8&0xFF,a&0xFF]};ai.ULONG=aj(4);ah.LONG=function(a){a>=af&&(a=-(2*af-a));return[a>>24&0xFF,a>>16&0xFF,a>>8&0xFF,a&0xFF]};ai.LONG=aj(4);ah.FIXED=ah.ULONG;ai.FIXED=ai.ULONG;ah.FWORD=ah.SHORT;ai.FWORD=ai.SHORT;ah.UFWORD=ah.USHORT;ai.UFWORD=ai.USHORT;ah.LONGDATETIME=function(a){return[0,0,0,0,a>>24&0xFF,a>>16&0xFF,a>>8&0xFF,a&0xFF]};ai.LONGDATETIME=aj(8);ah.TAG=function(a){ad.argument(a.length===4,'Tag should be exactly 4 ASCII characters.');return[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]};ai.TAG=aj(4);ah.Card8=ah.BYTE;ai.Card8=ai.BYTE;ah.Card16=ah.USHORT;ai.Card16=ai.USHORT;ah.OffSize=ah.BYTE;ai.OffSize=ai.BYTE;ah.SID=ah.USHORT;ai.SID=ai.USHORT;ah.NUMBER=function(a){if(a>=-107&&a<=107){return[a+139]}else if(a>=108&&a<=1131){a-=108;return[(a>>8)+247,a&0xFF]}else if(a>=-1131&&a<=-108){a=-a-108;return[(a>>8)+251,a&0xFF]}else if(a>=-32768&&a<=32767){return ah.NUMBER16(a)}else{return ah.NUMBER32(a)}};ai.NUMBER=function(a){return ah.NUMBER(a).length};ah.NUMBER16=function(a){return[28,a>>8&0xFF,a&0xFF]};ai.NUMBER16=aj(3);ah.NUMBER32=function(a){return[29,a>>24&0xFF,a>>16&0xFF,a>>8&0xFF,a&0xFF]};ai.NUMBER32=aj(5);ah.REAL=function(a){let b=a.toString(),c=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(b);if(c){let d=parseFloat('1e'+((c[2]?+c[2]:0)+c[1].length));b=(Math.round(a*d)/d).toString()}let d='';for(let a=0,c=b.length;a<c;a+=1){let e=b[a];e==='e'?(d+=b[++a]==='-'?'c':'b'):e==='.'?(d+='a'):e==='-'?(d+='e'):(d+=e)}d+=d.length&1?'f':'ff';let e=[30];for(let a=0,b=d.length;a<b;a+=2)e.push(parseInt(d.substr(a,2),16));return e};ai.REAL=function(a){return ah.REAL(a).length};ah.NAME=ah.CHARARRAY;ai.NAME=ai.CHARARRAY;ah.STRING=ah.CHARARRAY;ai.STRING=ai.CHARARRAY;ag.UTF8=function(a,b,c){let d=[],e=c;for(let c=0;c<e;c++, b+=1)d[c]=a.getUint8(b);return String.fromCharCode.apply(null,d)};ag.UTF16=function(a,b,c){let d=[],e=c/2;for(let c=0;c<e;c++, b+=2)d[c]=a.getUint16(b);return String.fromCharCode.apply(null,d)};ah.UTF16=function(a){let b=[];for(let c=0;c<a.length;c+=1){let d=a.charCodeAt(c);b[b.length]=d>>8&0xFF;b[b.length]=d&0xFF}return b};ai.UTF16=function(a){return a.length*2};let ak={'x-mac-croatian':"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ",'x-mac-cyrillic':"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю",'x-mac-gaelic':"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ",'x-mac-greek':"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­",'x-mac-icelandic':"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ",'x-mac-inuit':"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł",'x-mac-ce':"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ",'x-mac-romanian':"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ",'x-mac-turkish':"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};ag.MACSTRING=function(a,b,c,d){let e=ak[d];if(e===undefined){return undefined}let f='';for(let d=0;d<c;d++){let g=a.getUint8(b+d);g<=0x7F?(f+=String.fromCharCode(g)):(f+=e[g&0x7F])}return f};let al=typeof WeakMap==='function'&&new WeakMap(),am,an=function(a){if(!am){am={};for(let a in ak)am[a]=new String(a)}let b=am[a];if(b===undefined){return undefined}if(al){let a=al.get(b);if(a!==undefined){return a}}let c=ak[a];if(c===undefined){return undefined}let d={};for(let a=0;a<c.length;a++)d[c.charCodeAt(a)]=a+0x80;al&&al.set(b,d);return d};ah.MACSTRING=function(a,b){let c=an(b);if(c===undefined){return undefined}let d=[];for(let b=0;b<a.length;b++){let e=a.charCodeAt(b);if(e>=0x80){e=c[e];if(e===undefined){return undefined}}d[b]=e}return d};ai.MACSTRING=function(a,b){let c=ah.MACSTRING(a,b);if(c!==undefined){return c.length}else{return 0}};function ao(a){return a>=-128&&a<=127}function ap(a,b,c){let d=0,e=a.length;while(b<e&&d<64&&a[b]===0)++b,++d;c.push(0x80|d-1);return b}function aq(a,b,c){let d=0,e=a.length,f=b;while(f<e&&d<64){let b=a[f];if(!ao(b)){break}if(b===0&&f+1<e&&a[f+1]===0){break}++f;++d}c.push(d-1);for(let d=b;d<f;++d)c.push(a[d]+256&0xff);return f}function ar(a,b,c){let d=0,e=a.length,f=b;while(f<e&&d<64){let b=a[f];if(b===0){break}if(ao(b)&&f+1<e&&ao(a[f+1])){break}++f;++d}c.push(0x40|d-1);for(let d=b;d<f;++d){let e=a[d];c.push(e+0x10000>>8&0xff,e+0x100&0xff)}return f}ah.VARDELTAS=function(a){let b=0,c=[];while(b<a.length){let d=a[b];d===0?(b=ap(a,b,c)):d>=-128&&d<=127?(b=aq(a,b,c)):(b=ar(a,b,c))}return c};ah.INDEX=function(a){let b=1,c=[b],d=[];for(let e=0;e<a.length;e+=1){let f=ah.OBJECT(a[e]);Array.prototype.push.apply(d,f);b+=f.length;c.push(b)}if(d.length===0){return[0,0]}let e=[],f=1+Math.floor(Math.log(b)/Math.log(2))/8|0,g=[undefined,ah.BYTE,ah.USHORT,ah.UINT24,ah.ULONG][f];for(let a=0;a<c.length;a+=1){let b=g(c[a]);Array.prototype.push.apply(e,b)}return Array.prototype.concat(ah.Card16(a.length),ah.OffSize(f),e,d)};ai.INDEX=function(a){return ah.INDEX(a).length};ah.DICT=function(a){let b=[],c=Object.keys(a),d=c.length;for(let e=0;e<d;e+=1){let f=parseInt(c[e],0),g=a[f];b=b.concat(ah.OPERAND(g.value,g.type));b=b.concat(ah.OPERATOR(f))}return b};ai.DICT=function(a){return ah.DICT(a).length};ah.OPERATOR=function(a){if(a<1200){return[a]}else{return[12,a-1200]}};ah.OPERAND=function(a,b){let c=[];if(Array.isArray(b)){for(let d=0;d<b.length;d+=1)ad.argument(a.length===b.length,'Not enough arguments given for type'+b),c=c.concat(ah.OPERAND(a[d],b[d]))}else{if(b==='SID')c=c.concat(ah.NUMBER(a));else if(b==='offset')c=c.concat(ah.NUMBER32(a));else if(b==='number')c=c.concat(ah.NUMBER(a));else if(b==='real')c=c.concat(ah.REAL(a));else{throw new Error('Unknown operand type '+b)}}return c};ah.OP=ah.BYTE;ai.OP=ai.BYTE;let as=typeof WeakMap==='function'&&new WeakMap();ah.CHARSTRING=function(a){if(as){let b=as.get(a);if(b!==undefined){return b}}let b=[],c=a.length;for(let d=0;d<c;d+=1){let e=a[d];b=b.concat(ah[e.type](e.value))}as&&as.set(a,b);return b};ai.CHARSTRING=function(a){return ah.CHARSTRING(a).length};ah.OBJECT=function(a){let b=ah[a.type];ad.argument(b!==undefined,'No encoding function for type '+a.type);return b(a.value)};ai.OBJECT=function(a){let b=ai[a.type];ad.argument(b!==undefined,'No sizeOf function for type '+a.type);return b(a.value)};ah.TABLE=function(a){let b=[],c=a.fields.length,d=[],e=[];for(let f=0;f<c;f+=1){let g=a.fields[f],h=ah[g.type];ad.argument(h!==undefined,'No encoding function for field type '+g.type+' ('+g.name+')');let i=a[g.name];i===undefined&&(i=g.value);let j=h(i);g.type==='TABLE'?(e.push(b.length),b=b.concat([0,0]),d.push(j)):(b=b.concat(j))}for(let c=0;c<d.length;c+=1){let f=e[c],g=b.length;ad.argument(g<65536,'Table '+a.tableName+' too big.');b[f]=g>>8;b[f+1]=g&0xff;b=b.concat(d[c])}return b};ai.TABLE=function(a){let b=0,c=a.fields.length;for(let d=0;d<c;d+=1){let e=a.fields[d],f=ai[e.type];ad.argument(f!==undefined,'No sizeOf function for field type '+e.type+' ('+e.name+')');let g=a[e.name];g===undefined&&(g=e.value);b+=f(g);e.type==='TABLE'&&(b+=2)}return b};ah.RECORD=ah.TABLE;ai.RECORD=ai.TABLE;ah.LITERAL=function(a){return a};ai.LITERAL=function(a){return a.length};function at(a,b,c){for(let a=0;a<b.length;a+=1){let c=b[a];this[c.name]=c.value}this.tableName=a;this.fields=b;if(c){let a=Object.keys(c);for(let b=0;b<a.length;b+=1){let d=a[b],e=c[d];this[d]!==undefined&&(this[d]=e)}}}at.prototype.encode=function(){return ah.TABLE(this)};at.prototype.sizeOf=function(){return ai.TABLE(this)};function au(a,b,c){c===undefined&&(c=b.length);let d=new Array(b.length+1);d[0]={name:a+'Count',type:'USHORT',value:c};for(let c=0;c<b.length;c++)d[c+1]={name:a+c,type:'USHORT',value:b[c]};return d}function av(a,b,c){let d=b.length,e=new Array(d+1);e[0]={name:a+'Count',type:'USHORT',value:d};for(let f=0;f<d;f++)e[f+1]={name:a+f,type:'TABLE',value:c(b[f],f)};return e}function aw(a,b,c){let d=b.length,e=[];e[0]={name:a+'Count',type:'USHORT',value:d};for(let a=0;a<d;a++)e=e.concat(c(b[a],a));return e}function ax(a){a.format===1?at.call(this,'coverageTable',[{name:'coverageFormat',type:'USHORT',value:1}].concat(au('glyph',a.glyphs))):ad.assert(!1,'Can\'t create coverage table format 2 yet.')}ax.prototype=Object.create(at.prototype);ax.prototype.constructor=ax;function ay(a){at.call(this,'scriptListTable',aw('scriptRecord',a,function(a,b){let c=a.script,d=c.defaultLangSys;ad.assert(!!d,'Unable to write GSUB: script '+a.tag+' has no default language system.');return[{name:'scriptTag'+b,type:'TAG',value:a.tag},{name:'script'+b,type:'TABLE',value:new at('scriptTable',[{name:'defaultLangSys',type:'TABLE',value:new at('defaultLangSys',[{name:'lookupOrder',type:'USHORT',value:0},{name:'reqFeatureIndex',type:'USHORT',value:d.reqFeatureIndex}].concat(au('featureIndex',d.featureIndexes)))}].concat(aw('langSys',c.langSysRecords,function(a,b){let c=a.langSys;return[{name:'langSysTag'+b,type:'TAG',value:a.tag},{name:'langSys'+b,type:'TABLE',value:new at('langSys',[{name:'lookupOrder',type:'USHORT',value:0},{name:'reqFeatureIndex',type:'USHORT',value:c.reqFeatureIndex}].concat(au('featureIndex',c.featureIndexes)))}]})))}]}))}ay.prototype=Object.create(at.prototype);ay.prototype.constructor=ay;function az(a){at.call(this,'featureListTable',aw('featureRecord',a,function(a,b){let c=a.feature;return[{name:'featureTag'+b,type:'TAG',value:a.tag},{name:'feature'+b,type:'TABLE',value:new at('featureTable',[{name:'featureParams',type:'USHORT',value:c.featureParams}].concat(au('lookupListIndex',c.lookupListIndexes)))}]}))}az.prototype=Object.create(at.prototype);az.prototype.constructor=az;function aA(a,b){at.call(this,'lookupListTable',av('lookup',a,function(a){let c=b[a.lookupType];ad.assert(!!c,'Unable to write GSUB lookup type '+a.lookupType+' tables.');return new at('lookupTable',[{name:'lookupType',type:'USHORT',value:a.lookupType},{name:'lookupFlag',type:'USHORT',value:a.lookupFlag}].concat(av('subtable',a.subtables,c)))}))}aA.prototype=Object.create(at.prototype);aA.prototype.constructor=aA;var aB={Table:at,Record:at,Coverage:ax,ScriptList:ay,FeatureList:az,LookupList:aA,ushortList:au,tableList:av,recordList:aw};function aC(a,b){return a.getUint8(b)}function aD(a,b){return a.getUint16(b,!1)}function aE(a,b){return a.getInt16(b,!1)}function aF(a,b){return a.getUint32(b,!1)}function aG(a,b){let c=a.getInt16(b,!1),d=a.getUint16(b+2,!1);return c+d/65535}function aH(a,b){let c='';for(let d=b;d<b+4;d+=1)c+=String.fromCharCode(a.getInt8(d));return c}function aI(a,b,c){let d=0;for(let e=0;e<c;e+=1)d<<=8,d+=a.getUint8(b+e);return d}function aJ(a,b,c){let d=[];for(let e=b;e<c;e+=1)d.push(a.getUint8(e));return d}function aK(a){let b='';for(let c=0;c<a.length;c+=1)b+=String.fromCharCode(a[c]);return b}let aL={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function aM(a,b){this.data=a;this.offset=b;this.relativeOffset=0}aM.prototype.parseByte=function(){let a=this.data.getUint8(this.offset+this.relativeOffset);this.relativeOffset+=1;return a};aM.prototype.parseChar=function(){let a=this.data.getInt8(this.offset+this.relativeOffset);this.relativeOffset+=1;return a};aM.prototype.parseCard8=aM.prototype.parseByte;aM.prototype.parseUShort=function(){let a=this.data.getUint16(this.offset+this.relativeOffset);this.relativeOffset+=2;return a};aM.prototype.parseCard16=aM.prototype.parseUShort;aM.prototype.parseSID=aM.prototype.parseUShort;aM.prototype.parseOffset16=aM.prototype.parseUShort;aM.prototype.parseShort=function(){let a=this.data.getInt16(this.offset+this.relativeOffset);this.relativeOffset+=2;return a};aM.prototype.parseF2Dot14=function(){let a=this.data.getInt16(this.offset+this.relativeOffset)/16384;this.relativeOffset+=2;return a};aM.prototype.parseULong=function(){let a=aF(this.data,this.offset+this.relativeOffset);this.relativeOffset+=4;return a};aM.prototype.parseOffset32=aM.prototype.parseULong;aM.prototype.parseFixed=function(){let a=aG(this.data,this.offset+this.relativeOffset);this.relativeOffset+=4;return a};aM.prototype.parseString=function(a){let b=this.data,c=this.offset+this.relativeOffset,d='';this.relativeOffset+=a;for(let e=0;e<a;e++)d+=String.fromCharCode(b.getUint8(c+e));return d};aM.prototype.parseTag=function(){return this.parseString(4)};aM.prototype.parseLongDateTime=function(){let a=aF(this.data,this.offset+this.relativeOffset+4);a-=2082844800;this.relativeOffset+=8;return a};aM.prototype.parseVersion=function(a){let b=aD(this.data,this.offset+this.relativeOffset),c=aD(this.data,this.offset+this.relativeOffset+2);this.relativeOffset+=4;a===undefined&&(a=0x1000);return b+c/a/10};aM.prototype.skip=function(a,b){b===undefined&&(b=1);this.relativeOffset+=aL[a]*b};aM.prototype.parseULongList=function(a){a===undefined&&(a=this.parseULong());let b=new Array(a),c=this.data,d=this.offset+this.relativeOffset;for(let e=0;e<a;e++)b[e]=c.getUint32(d),d+=4;this.relativeOffset+=a*4;return b};aM.prototype.parseOffset16List=aM.prototype.parseUShortList=function(a){a===undefined&&(a=this.parseUShort());let b=new Array(a),c=this.data,d=this.offset+this.relativeOffset;for(let e=0;e<a;e++)b[e]=c.getUint16(d),d+=2;this.relativeOffset+=a*2;return b};aM.prototype.parseShortList=function(a){let b=new Array(a),c=this.data,d=this.offset+this.relativeOffset;for(let e=0;e<a;e++)b[e]=c.getInt16(d),d+=2;this.relativeOffset+=a*2;return b};aM.prototype.parseByteList=function(a){let b=new Array(a),c=this.data,d=this.offset+this.relativeOffset;for(let e=0;e<a;e++)b[e]=c.getUint8(d++);this.relativeOffset+=a;return b};aM.prototype.parseList=function(a,b){b||(b=a,a=this.parseUShort());let c=new Array(a);for(let d=0;d<a;d++)c[d]=b.call(this);return c};aM.prototype.parseList32=function(a,b){b||(b=a,a=this.parseULong());let c=new Array(a);for(let d=0;d<a;d++)c[d]=b.call(this);return c};aM.prototype.parseRecordList=function(a,b){b||(b=a,a=this.parseUShort());let c=new Array(a),d=Object.keys(b);for(let e=0;e<a;e++){let f={};for(let a=0;a<d.length;a++){let c=d[a],e=b[c];f[c]=e.call(this)}c[e]=f}return c};aM.prototype.parseRecordList32=function(a,b){b||(b=a,a=this.parseULong());let c=new Array(a),d=Object.keys(b);for(let e=0;e<a;e++){let f={};for(let a=0;a<d.length;a++){let c=d[a],e=b[c];f[c]=e.call(this)}c[e]=f}return c};aM.prototype.parseStruct=function(a){if(typeof a==='function'){return a.call(this)}else{let b=Object.keys(a),c={};for(let d=0;d<b.length;d++){let e=b[d],f=a[e];c[e]=f.call(this)}return c}};aM.prototype.parseValueRecord=function(a){a===undefined&&(a=this.parseUShort());if(a===0){return}let b={};a&0x0001&&(b.xPlacement=this.parseShort());a&0x0002&&(b.yPlacement=this.parseShort());a&0x0004&&(b.xAdvance=this.parseShort());a&0x0008&&(b.yAdvance=this.parseShort());a&0x0010&&(b.xPlaDevice=undefined,this.parseShort());a&0x0020&&(b.yPlaDevice=undefined,this.parseShort());a&0x0040&&(b.xAdvDevice=undefined,this.parseShort());a&0x0080&&(b.yAdvDevice=undefined,this.parseShort());return b};aM.prototype.parseValueRecordList=function(){let a=this.parseUShort(),b=this.parseUShort(),c=new Array(b);for(let d=0;d<b;d++)c[d]=this.parseValueRecord(a);return c};aM.prototype.parsePointer=function(a){let b=this.parseOffset16();if(b>0){return new aM(this.data,this.offset+b).parseStruct(a)}return undefined};aM.prototype.parsePointer32=function(a){let b=this.parseOffset32();if(b>0){return new aM(this.data,this.offset+b).parseStruct(a)}return undefined};aM.prototype.parseListOfLists=function(a){let b=this.parseOffset16List(),c=b.length,d=this.relativeOffset,e=new Array(c);for(let d=0;d<c;d++){let f=b[d];if(f===0){e[d]=undefined;continue}this.relativeOffset=f;if(a){let b=this.parseOffset16List(),c=new Array(b.length);for(let d=0;d<b.length;d++)this.relativeOffset=f+b[d],c[d]=a.call(this);e[d]=c}else e[d]=this.parseUShortList()}this.relativeOffset=d;return e};aM.prototype.parseCoverage=function(){let a=this.offset+this.relativeOffset,b=this.parseUShort(),c=this.parseUShort();if(b===1){return{format:1,glyphs:this.parseUShortList(c)}}else if(b===2){let a=new Array(c);for(let b=0;b<c;b++)a[b]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:a}};throw new Error('0x'+a.toString(16)+': Coverage format must be 1 or 2.')};aM.prototype.parseClassDef=function(){let a=this.offset+this.relativeOffset,b=this.parseUShort();if(b===1){return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()}}else if(b===2){return{format:2,ranges:this.parseRecordList({start:aM.uShort,end:aM.uShort,classId:aM.uShort})}};throw new Error('0x'+a.toString(16)+': ClassDef format must be 1 or 2.')};aM.list=function(a,b){return function(){return this.parseList(a,b)}};aM.list32=function(a,b){return function(){return this.parseList32(a,b)}};aM.recordList=function(a,b){return function(){return this.parseRecordList(a,b)}};aM.recordList32=function(a,b){return function(){return this.parseRecordList32(a,b)}};aM.pointer=function(a){return function(){return this.parsePointer(a)}};aM.pointer32=function(a){return function(){return this.parsePointer32(a)}};aM.tag=aM.prototype.parseTag;aM.byte=aM.prototype.parseByte;aM.uShort=aM.offset16=aM.prototype.parseUShort;aM.uShortList=aM.prototype.parseUShortList;aM.uLong=aM.offset32=aM.prototype.parseULong;aM.uLongList=aM.prototype.parseULongList;aM.struct=aM.prototype.parseStruct;aM.coverage=aM.prototype.parseCoverage;aM.classDef=aM.prototype.parseClassDef;let aN={reserved:aM.uShort,reqFeatureIndex:aM.uShort,featureIndexes:aM.uShortList};aM.prototype.parseScriptList=function(){return this.parsePointer(aM.recordList({tag:aM.tag,script:aM.pointer({defaultLangSys:aM.pointer(aN),langSysRecords:aM.recordList({tag:aM.tag,langSys:aM.pointer(aN)})})}))||[]};aM.prototype.parseFeatureList=function(){return this.parsePointer(aM.recordList({tag:aM.tag,feature:aM.pointer({featureParams:aM.offset16,lookupListIndexes:aM.uShortList})}))||[]};aM.prototype.parseLookupList=function(a){return this.parsePointer(aM.list(aM.pointer(function(){let b=this.parseUShort();ad.argument(1<=b&&b<=9,'GPOS/GSUB lookup type '+b+' unknown.');let c=this.parseUShort(),d=c&0x10;return{lookupType:b,lookupFlag:c,subtables:this.parseList(aM.pointer(a[b])),markFilteringSet:d?this.parseUShort():undefined}})))||[]};aM.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){let a=this.parseUShort(),b=this.parseUShort();ad.argument(a===1&&b<1,'GPOS/GSUB feature variations table unknown.');let c=this.parseRecordList32({conditionSetOffset:aM.offset32,featureTableSubstitutionOffset:aM.offset32});return c})||[]};var aO={getByte:aC,getCard8:aC,getUShort:aD,getCard16:aD,getShort:aE,getULong:aF,getFixed:aG,getTag:aH,getOffset:aI,getBytes:aJ,bytesToString:aK,Parser:aM};function aP(a,b){b.parseUShort();a.length=b.parseULong();a.language=b.parseULong();let c;a.groupCount=c=b.parseULong();a.glyphIndexMap={};for(let d=0;d<c;d+=1){let e=b.parseULong(),f=b.parseULong(),g=b.parseULong();for(let b=e;b<=f;b+=1)a.glyphIndexMap[b]=g,g++}}function aQ(a,b,c,d,e){a.length=b.parseUShort();a.language=b.parseUShort();let f;a.segCount=f=b.parseUShort()>>1;b.skip('uShort',3);a.glyphIndexMap={};let g=new aO.Parser(c,d+e+14),h=new aO.Parser(c,d+e+16+f*2),i=new aO.Parser(c,d+e+16+f*4),j=new aO.Parser(c,d+e+16+f*6),k=d+e+16+f*8;for(let b=0;b<f-1;b+=1){let d,e=g.parseUShort(),l=h.parseUShort(),m=i.parseShort(),n=j.parseUShort();for(let b=l;b<=e;b+=1)n!==0?(k=j.offset+j.relativeOffset-2,k+=n,k+=(b-l)*2,d=aO.getUShort(c,k),d!==0&&(d=d+m&0xFFFF)):(d=b+m&0xFFFF),a.glyphIndexMap[b]=d}}function aR(a,b){let c={};c.version=aO.getUShort(a,b);ad.argument(c.version===0,'cmap table version should be 0.');c.numTables=aO.getUShort(a,b+2);let d=-1;for(let e=c.numTables-1;e>=0;e-=1){let f=aO.getUShort(a,b+4+e*8),g=aO.getUShort(a,b+4+e*8+2);if(f===3&&(g===0||g===1||g===10)||f===0&&(g===0||g===1||g===2||g===3||g===4)){d=aO.getULong(a,b+4+e*8+4);break}}if(d===-1){throw new Error('No valid cmap sub-tables found.')}let e=new aO.Parser(a,b+d);c.format=e.parseUShort();if(c.format===12)aP(c,e);else if(c.format===4)aQ(c,e,a,b,d);else{throw new Error('Only format 4 and 12 cmap tables are supported (found format '+c.format+').')};return c}function aS(a,b,c){a.segments.push({end:b,start:b,delta:-(b-c),offset:0,glyphIndex:c})}function aT(a){a.segments.push({end:0xFFFF,start:0xFFFF,delta:1,offset:0})}function aU(c){let d=!0,e;for(e=c.length-1;e>0;e-=1){let a=c.get(e);if(a.unicode>65535){console.log('Adding CMAP format 12 (needed!)');d=!1;break}}let f=[{name:'version',type:'USHORT',value:0},{name:'numTables',type:'USHORT',value:d?1:2},{name:'platformID',type:'USHORT',value:3},{name:'encodingID',type:'USHORT',value:1},{name:'offset',type:'ULONG',value:d?12:20}];d||(f=f.concat([{name:'cmap12PlatformID',type:'USHORT',value:3},{name:'cmap12EncodingID',type:'USHORT',value:10},{name:'cmap12Offset',type:'ULONG',value:0}]));f=f.concat([{name:'format',type:'USHORT',value:4},{name:'cmap4Length',type:'USHORT',value:0},{name:'language',type:'USHORT',value:0},{name:'segCountX2',type:'USHORT',value:0},{name:'searchRange',type:'USHORT',value:0},{name:'entrySelector',type:'USHORT',value:0},{name:'rangeShift',type:'USHORT',value:0}]);let g=new aB.Table('cmap',f);g.segments=[];for(e=0;e<c.length;e+=1){let d=c.get(e);for(let a=0;a<d.unicodes.length;a+=1)aS(g,d.unicodes[a],e);g.segments=g.segments.sort(function(a,b){return a.start-b.start})}aT(g);let h=g.segments.length,i=0,j=[],k=[],l=[],m=[],n=[],o=[];for(e=0;e<h;e+=1){let a=g.segments[e];a.end<=65535&&a.start<=65535?(j=j.concat({name:'end_'+e,type:'USHORT',value:a.end}),k=k.concat({name:'start_'+e,type:'USHORT',value:a.start}),l=l.concat({name:'idDelta_'+e,type:'SHORT',value:a.delta}),m=m.concat({name:'idRangeOffset_'+e,type:'USHORT',value:a.offset}),a.glyphId!==undefined&&(n=n.concat({name:'glyph_'+e,type:'USHORT',value:a.glyphId}))):(i+=1);!d&&a.glyphIndex!==undefined&&(o=o.concat({name:'cmap12Start_'+e,type:'ULONG',value:a.start}),o=o.concat({name:'cmap12End_'+e,type:'ULONG',value:a.end}),o=o.concat({name:'cmap12Glyph_'+e,type:'ULONG',value:a.glyphIndex}))}g.segCountX2=(h-i)*2;g.searchRange=Math.pow(2,Math.floor(Math.log((h-i))/Math.log(2)))*2;g.entrySelector=Math.log(g.searchRange/2)/Math.log(2);g.rangeShift=g.segCountX2-g.searchRange;g.fields=g.fields.concat(j);g.fields.push({name:'reservedPad',type:'USHORT',value:0});g.fields=g.fields.concat(k);g.fields=g.fields.concat(l);g.fields=g.fields.concat(m);g.fields=g.fields.concat(n);g.cmap4Length=14+j.length*2+2+k.length*2+l.length*2+m.length*2+n.length*2;if(!d){let a=16+o.length*4;g.cmap12Offset=20+g.cmap4Length;g.fields=g.fields.concat([{name:'cmap12Format',type:'USHORT',value:12},{name:'cmap12Reserved',type:'USHORT',value:0},{name:'cmap12Length',type:'ULONG',value:a},{name:'cmap12Language',type:'ULONG',value:0},{name:'cmap12nGroups',type:'ULONG',value:o.length/3}]);g.fields=g.fields.concat(o)}return g}var aV={parse:aR,make:aU};let aW=['.notdef','space','exclam','quotedbl','numbersign','dollar','percent','ampersand','quoteright','parenleft','parenright','asterisk','plus','comma','hyphen','period','slash','zero','one','two','three','four','five','six','seven','eight','nine','colon','semicolon','less','equal','greater','question','at','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','bracketleft','backslash','bracketright','asciicircum','underscore','quoteleft','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','braceleft','bar','braceright','asciitilde','exclamdown','cent','sterling','fraction','yen','florin','section','currency','quotesingle','quotedblleft','guillemotleft','guilsinglleft','guilsinglright','fi','fl','endash','dagger','daggerdbl','periodcentered','paragraph','bullet','quotesinglbase','quotedblbase','quotedblright','guillemotright','ellipsis','perthousand','questiondown','grave','acute','circumflex','tilde','macron','breve','dotaccent','dieresis','ring','cedilla','hungarumlaut','ogonek','caron','emdash','AE','ordfeminine','Lslash','Oslash','OE','ordmasculine','ae','dotlessi','lslash','oslash','oe','germandbls','onesuperior','logicalnot','mu','trademark','Eth','onehalf','plusminus','Thorn','onequarter','divide','brokenbar','degree','thorn','threequarters','twosuperior','registered','minus','eth','multiply','threesuperior','copyright','Aacute','Acircumflex','Adieresis','Agrave','Aring','Atilde','Ccedilla','Eacute','Ecircumflex','Edieresis','Egrave','Iacute','Icircumflex','Idieresis','Igrave','Ntilde','Oacute','Ocircumflex','Odieresis','Ograve','Otilde','Scaron','Uacute','Ucircumflex','Udieresis','Ugrave','Yacute','Ydieresis','Zcaron','aacute','acircumflex','adieresis','agrave','aring','atilde','ccedilla','eacute','ecircumflex','edieresis','egrave','iacute','icircumflex','idieresis','igrave','ntilde','oacute','ocircumflex','odieresis','ograve','otilde','scaron','uacute','ucircumflex','udieresis','ugrave','yacute','ydieresis','zcaron','exclamsmall','Hungarumlautsmall','dollaroldstyle','dollarsuperior','ampersandsmall','Acutesmall','parenleftsuperior','parenrightsuperior','266 ff','onedotenleader','zerooldstyle','oneoldstyle','twooldstyle','threeoldstyle','fouroldstyle','fiveoldstyle','sixoldstyle','sevenoldstyle','eightoldstyle','nineoldstyle','commasuperior','threequartersemdash','periodsuperior','questionsmall','asuperior','bsuperior','centsuperior','dsuperior','esuperior','isuperior','lsuperior','msuperior','nsuperior','osuperior','rsuperior','ssuperior','tsuperior','ff','ffi','ffl','parenleftinferior','parenrightinferior','Circumflexsmall','hyphensuperior','Gravesmall','Asmall','Bsmall','Csmall','Dsmall','Esmall','Fsmall','Gsmall','Hsmall','Ismall','Jsmall','Ksmall','Lsmall','Msmall','Nsmall','Osmall','Psmall','Qsmall','Rsmall','Ssmall','Tsmall','Usmall','Vsmall','Wsmall','Xsmall','Ysmall','Zsmall','colonmonetary','onefitted','rupiah','Tildesmall','exclamdownsmall','centoldstyle','Lslashsmall','Scaronsmall','Zcaronsmall','Dieresissmall','Brevesmall','Caronsmall','Dotaccentsmall','Macronsmall','figuredash','hypheninferior','Ogoneksmall','Ringsmall','Cedillasmall','questiondownsmall','oneeighth','threeeighths','fiveeighths','seveneighths','onethird','twothirds','zerosuperior','foursuperior','fivesuperior','sixsuperior','sevensuperior','eightsuperior','ninesuperior','zeroinferior','oneinferior','twoinferior','threeinferior','fourinferior','fiveinferior','sixinferior','seveninferior','eightinferior','nineinferior','centinferior','dollarinferior','periodinferior','commainferior','Agravesmall','Aacutesmall','Acircumflexsmall','Atildesmall','Adieresissmall','Aringsmall','AEsmall','Ccedillasmall','Egravesmall','Eacutesmall','Ecircumflexsmall','Edieresissmall','Igravesmall','Iacutesmall','Icircumflexsmall','Idieresissmall','Ethsmall','Ntildesmall','Ogravesmall','Oacutesmall','Ocircumflexsmall','Otildesmall','Odieresissmall','OEsmall','Oslashsmall','Ugravesmall','Uacutesmall','Ucircumflexsmall','Udieresissmall','Yacutesmall','Thornsmall','Ydieresissmall','001.000','001.001','001.002','001.003','Black','Bold','Book','Light','Medium','Regular','Roman','Semibold'],aX=['','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','space','exclam','quotedbl','numbersign','dollar','percent','ampersand','quoteright','parenleft','parenright','asterisk','plus','comma','hyphen','period','slash','zero','one','two','three','four','five','six','seven','eight','nine','colon','semicolon','less','equal','greater','question','at','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','bracketleft','backslash','bracketright','asciicircum','underscore','quoteleft','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','braceleft','bar','braceright','asciitilde','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','exclamdown','cent','sterling','fraction','yen','florin','section','currency','quotesingle','quotedblleft','guillemotleft','guilsinglleft','guilsinglright','fi','fl','','endash','dagger','daggerdbl','periodcentered','','paragraph','bullet','quotesinglbase','quotedblbase','quotedblright','guillemotright','ellipsis','perthousand','','questiondown','','grave','acute','circumflex','tilde','macron','breve','dotaccent','dieresis','','ring','cedilla','','hungarumlaut','ogonek','caron','emdash','','','','','','','','','','','','','','','','','AE','','ordfeminine','','','','','Lslash','Oslash','OE','ordmasculine','','','','','','ae','','','','dotlessi','','','lslash','oslash','oe','germandbls'],aY=['','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','space','exclamsmall','Hungarumlautsmall','','dollaroldstyle','dollarsuperior','ampersandsmall','Acutesmall','parenleftsuperior','parenrightsuperior','twodotenleader','onedotenleader','comma','hyphen','period','fraction','zerooldstyle','oneoldstyle','twooldstyle','threeoldstyle','fouroldstyle','fiveoldstyle','sixoldstyle','sevenoldstyle','eightoldstyle','nineoldstyle','colon','semicolon','commasuperior','threequartersemdash','periodsuperior','questionsmall','','asuperior','bsuperior','centsuperior','dsuperior','esuperior','','','isuperior','','','lsuperior','msuperior','nsuperior','osuperior','','','rsuperior','ssuperior','tsuperior','','ff','fi','fl','ffi','ffl','parenleftinferior','','parenrightinferior','Circumflexsmall','hyphensuperior','Gravesmall','Asmall','Bsmall','Csmall','Dsmall','Esmall','Fsmall','Gsmall','Hsmall','Ismall','Jsmall','Ksmall','Lsmall','Msmall','Nsmall','Osmall','Psmall','Qsmall','Rsmall','Ssmall','Tsmall','Usmall','Vsmall','Wsmall','Xsmall','Ysmall','Zsmall','colonmonetary','onefitted','rupiah','Tildesmall','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','exclamdownsmall','centoldstyle','Lslashsmall','','','Scaronsmall','Zcaronsmall','Dieresissmall','Brevesmall','Caronsmall','','Dotaccentsmall','','','Macronsmall','','','figuredash','hypheninferior','','','Ogoneksmall','Ringsmall','Cedillasmall','','','','onequarter','onehalf','threequarters','questiondownsmall','oneeighth','threeeighths','fiveeighths','seveneighths','onethird','twothirds','','','zerosuperior','onesuperior','twosuperior','threesuperior','foursuperior','fivesuperior','sixsuperior','sevensuperior','eightsuperior','ninesuperior','zeroinferior','oneinferior','twoinferior','threeinferior','fourinferior','fiveinferior','sixinferior','seveninferior','eightinferior','nineinferior','centinferior','dollarinferior','periodinferior','commainferior','Agravesmall','Aacutesmall','Acircumflexsmall','Atildesmall','Adieresissmall','Aringsmall','AEsmall','Ccedillasmall','Egravesmall','Eacutesmall','Ecircumflexsmall','Edieresissmall','Igravesmall','Iacutesmall','Icircumflexsmall','Idieresissmall','Ethsmall','Ntildesmall','Ogravesmall','Oacutesmall','Ocircumflexsmall','Otildesmall','Odieresissmall','OEsmall','Oslashsmall','Ugravesmall','Uacutesmall','Ucircumflexsmall','Udieresissmall','Yacutesmall','Thornsmall','Ydieresissmall'],aZ=['.notdef','.null','nonmarkingreturn','space','exclam','quotedbl','numbersign','dollar','percent','ampersand','quotesingle','parenleft','parenright','asterisk','plus','comma','hyphen','period','slash','zero','one','two','three','four','five','six','seven','eight','nine','colon','semicolon','less','equal','greater','question','at','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','bracketleft','backslash','bracketright','asciicircum','underscore','grave','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','braceleft','bar','braceright','asciitilde','Adieresis','Aring','Ccedilla','Eacute','Ntilde','Odieresis','Udieresis','aacute','agrave','acircumflex','adieresis','atilde','aring','ccedilla','eacute','egrave','ecircumflex','edieresis','iacute','igrave','icircumflex','idieresis','ntilde','oacute','ograve','ocircumflex','odieresis','otilde','uacute','ugrave','ucircumflex','udieresis','dagger','degree','cent','sterling','section','bullet','paragraph','germandbls','registered','copyright','trademark','acute','dieresis','notequal','AE','Oslash','infinity','plusminus','lessequal','greaterequal','yen','mu','partialdiff','summation','product','pi','integral','ordfeminine','ordmasculine','Omega','ae','oslash','questiondown','exclamdown','logicalnot','radical','florin','approxequal','Delta','guillemotleft','guillemotright','ellipsis','nonbreakingspace','Agrave','Atilde','Otilde','OE','oe','endash','emdash','quotedblleft','quotedblright','quoteleft','quoteright','divide','lozenge','ydieresis','Ydieresis','fraction','currency','guilsinglleft','guilsinglright','fi','fl','daggerdbl','periodcentered','quotesinglbase','quotedblbase','perthousand','Acircumflex','Ecircumflex','Aacute','Edieresis','Egrave','Iacute','Icircumflex','Idieresis','Igrave','Oacute','Ocircumflex','apple','Ograve','Uacute','Ucircumflex','Ugrave','dotlessi','circumflex','tilde','macron','breve','dotaccent','ring','cedilla','hungarumlaut','ogonek','caron','Lslash','lslash','Scaron','scaron','Zcaron','zcaron','brokenbar','Eth','eth','Yacute','yacute','Thorn','thorn','minus','multiply','onesuperior','twosuperior','threesuperior','onehalf','onequarter','threequarters','franc','Gbreve','gbreve','Idotaccent','Scedilla','scedilla','Cacute','cacute','Ccaron','ccaron','dcroat'];function a_(a){this.font=a}a_.prototype.charToGlyphIndex=function(a){let b=a.codePointAt(0),c=this.font.glyphs;if(c){for(let a=0;a<c.length;a+=1){let d=c.get(a);for(let c=0;c<d.unicodes.length;c+=1){if(d.unicodes[c]===b){return a}}}}return null};function a$(a){this.cmap=a}a$.prototype.charToGlyphIndex=function(a){return this.cmap.glyphIndexMap[a.codePointAt(0)]||0};function ba(a,b){this.encoding=a;this.charset=b}ba.prototype.charToGlyphIndex=function(a){let b=a.codePointAt(0),c=this.encoding[b];return this.charset.indexOf(c)};function bb(a){switch(a.version){case 1:this.names=aZ.slice();break;case 2:this.names=new Array(a.numberOfGlyphs);for(let b=0;b<a.numberOfGlyphs;b++)a.glyphNameIndex[b]<aZ.length?(this.names[b]=aZ[a.glyphNameIndex[b]]):(this.names[b]=a.names[a.glyphNameIndex[b]-aZ.length]);break;case 2.5:this.names=new Array(a.numberOfGlyphs);for(let b=0;b<a.numberOfGlyphs;b++)this.names[b]=aZ[b+a.glyphNameIndex[b]];break;case 3:this.names=[];break;default:this.names=[];break}}bb.prototype.nameToGlyphIndex=function(a){return this.names.indexOf(a)};bb.prototype.glyphIndexToName=function(a){return this.names[a]};function bc(a){let b,c=a.tables.cmap.glyphIndexMap,d=Object.keys(c);for(let e=0;e<d.length;e+=1){let f=d[e],g=c[f];b=a.glyphs.get(g);b.addUnicode(parseInt(f))}for(let c=0;c<a.glyphs.length;c+=1)b=a.glyphs.get(c),a.cffEncoding?(a.isCIDFont?(b.name='gid'+c):(b.name=a.cffEncoding.charset[c])):a.glyphNames.names&&(b.name=a.glyphNames.glyphIndexToName(c))}function bd(a){a._IndexToUnicodeMap={};let b=a.tables.cmap.glyphIndexMap,c=Object.keys(b);for(let d=0;d<c.length;d+=1){let e=c[d],f=b[e];a._IndexToUnicodeMap[f]===undefined?(a._IndexToUnicodeMap[f]={unicodes:[parseInt(e)]}):a._IndexToUnicodeMap[f].unicodes.push(parseInt(e))}}function be(a,b){b.lowMemory?bd(a):bc(a)}function bf(a,b,c,d,e){a.beginPath();a.moveTo(b,c);a.lineTo(d,e);a.stroke()}var bg={line:bf};function bh(a,b){let c=b||new $();return{configurable:!0,get:function(){typeof c==='function'&&(c=c());return c},set:function(a){c=a}}}function bi(a){this.bindConstructorValues(a)}bi.prototype.bindConstructorValues=function(a){this.index=a.index||0;this.name=a.name||null;this.unicode=a.unicode||undefined;this.unicodes=a.unicodes||a.unicode!==undefined?[a.unicode]:[];a.xMin&&(this.xMin=a.xMin);a.yMin&&(this.yMin=a.yMin);a.xMax&&(this.xMax=a.xMax);a.yMax&&(this.yMax=a.yMax);a.advanceWidth&&(this.advanceWidth=a.advanceWidth);Object.defineProperty(this,'path',bh(this,a.path))};bi.prototype.addUnicode=function(a){this.unicodes.length===0&&(this.unicode=a);this.unicodes.push(a)};bi.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};bi.prototype.getPath=function(a,b,c,d,e){a=a!==undefined?a:0;b=b!==undefined?b:0;c=c!==undefined?c:72;let f,g;d||(d={});let h=d.xScale,i=d.yScale;d.hinting&&e&&e.hinting&&(g=this.path&&e.hinting.exec(this,c));if(g)f=e.hinting.getCommands(g),a=Math.round(a),b=Math.round(b),h=i=1;else{f=this.path.commands;let a=1/(this.path.unitsPerEm||1000)*c;h===undefined&&(h=a);i===undefined&&(i=a)}let j=new $();for(let c=0;c<f.length;c+=1){let d=f[c];d.type==='M'?j.moveTo(a+d.x*h,b+-d.y*i):d.type==='L'?j.lineTo(a+d.x*h,b+-d.y*i):d.type==='Q'?j.quadraticCurveTo(a+d.x1*h,b+-d.y1*i,a+d.x*h,b+-d.y*i):d.type==='C'?j.curveTo(a+d.x1*h,b+-d.y1*i,a+d.x2*h,b+-d.y2*i,a+d.x*h,b+-d.y*i):d.type==='Z'&&j.closePath()}return j};bi.prototype.getContours=function(){if(this.points===undefined){return[]}let a=[],b=[];for(let c=0;c<this.points.length;c+=1){let d=this.points[c];b.push(d);d.lastPointOfContour&&(a.push(b),b=[])}ad.argument(b.length===0,'There are still points left in the current contour.');return a};bi.prototype.getMetrics=function(){let a=this.path.commands,b=[],c=[];for(let d=0;d<a.length;d+=1){let e=a[d];e.type!=='Z'&&(b.push(e.x),c.push(e.y));(e.type==='Q'||e.type==='C')&&(b.push(e.x1),c.push(e.y1));e.type==='C'&&(b.push(e.x2),c.push(e.y2))}let d={xMin:Math.min.apply(null,b),yMin:Math.min.apply(null,c),xMax:Math.max.apply(null,b),yMax:Math.max.apply(null,c),leftSideBearing:this.leftSideBearing};isFinite(d.xMin)||(d.xMin=0);isFinite(d.xMax)||(d.xMax=this.advanceWidth);isFinite(d.yMin)||(d.yMin=0);isFinite(d.yMax)||(d.yMax=0);d.rightSideBearing=this.advanceWidth-d.leftSideBearing-(d.xMax-d.xMin);return d};bi.prototype.draw=function(a,b,c,d,e){this.getPath(b,c,d,e).draw(a)};bi.prototype.drawPoints=function(a,b,c,d){function e(b,c,d,e){let f=Math.PI*2;a.beginPath();for(let g=0;g<b.length;g+=1)a.moveTo(c+b[g].x*e,d+b[g].y*e),a.arc(c+b[g].x*e,d+b[g].y*e,2,0,f,!1);a.closePath();a.fill()}b=b!==undefined?b:0;c=c!==undefined?c:0;d=d!==undefined?d:24;let f=1/this.path.unitsPerEm*d,g=[],h=[],i=this.path;for(let a=0;a<i.commands.length;a+=1){let b=i.commands[a];b.x!==undefined&&g.push({x:b.x,y:-b.y});b.x1!==undefined&&h.push({x:b.x1,y:-b.y1});b.x2!==undefined&&h.push({x:b.x2,y:-b.y2})}a.fillStyle='blue';e(g,b,c,f);a.fillStyle='red';e(h,b,c,f)};bi.prototype.drawMetrics=function(a,b,c,d){let e;b=b!==undefined?b:0;c=c!==undefined?c:0;d=d!==undefined?d:24;e=1/this.path.unitsPerEm*d;a.lineWidth=1;a.strokeStyle='black';bg.line(a,b,-10000,b,10000);bg.line(a,-10000,c,10000,c);let f=this.xMin||0,g=this.yMin||0,h=this.xMax||0,i=this.yMax||0,j=this.advanceWidth||0;a.strokeStyle='blue';bg.line(a,b+f*e,-10000,b+f*e,10000);bg.line(a,b+h*e,-10000,b+h*e,10000);bg.line(a,-10000,c+-g*e,10000,c+-g*e);bg.line(a,-10000,c+-i*e,10000,c+-i*e);a.strokeStyle='green';bg.line(a,b+j*e,-10000,b+j*e,10000)};function bj(a,b,c){Object.defineProperty(a,b,{get:function(){a.path;return a[c]},set:function(b){a[c]=b},enumerable:!0,configurable:!0})}function bk(a,b){this.font=a;this.glyphs={};if(Array.isArray(b)){for(let c=0;c<b.length;c++){let d=b[c];d.path.unitsPerEm=a.unitsPerEm;this.glyphs[c]=d}}this.length=b&&b.length||0}bk.prototype.get=function(a){if(this.glyphs[a]===undefined){this.font._push(a);typeof this.glyphs[a]==='function'&&(this.glyphs[a]=this.glyphs[a]());let b=this.glyphs[a],c=this.font._IndexToUnicodeMap[a];if(c){for(let a=0;a<c.unicodes.length;a++)b.addUnicode(c.unicodes[a])}this.font.cffEncoding?(this.font.isCIDFont?(b.name='gid'+a):(b.name=this.font.cffEncoding.charset[a])):this.font.glyphNames.names&&(b.name=this.font.glyphNames.glyphIndexToName(a));this.glyphs[a].advanceWidth=this.font._hmtxTableData[a].advanceWidth;this.glyphs[a].leftSideBearing=this.font._hmtxTableData[a].leftSideBearing}else typeof this.glyphs[a]==='function'&&(this.glyphs[a]=this.glyphs[a]());return this.glyphs[a]};bk.prototype.push=function(a,b){this.glyphs[a]=b;this.length++};function bl(a,b){return new bi({index:b,font:a})}function bm(a,b,c,d,e,f){return function(){let g=new bi({index:b,font:a});g.path=function(){c(g,d,e);let b=f(a.glyphs,g);b.unitsPerEm=a.unitsPerEm;return b};bj(g,'xMin','_xMin');bj(g,'xMax','_xMax');bj(g,'yMin','_yMin');bj(g,'yMax','_yMax');return g}}function bn(a,b,c,d){return function(){let e=new bi({index:b,font:a});e.path=function(){let b=c(a,e,d);b.unitsPerEm=a.unitsPerEm;return b};return e}}var bo={GlyphSet:bk,glyphLoader:bl,ttfGlyphLoader:bm,cffGlyphLoader:bn};function bp(a,b){if(a===b){return !0}else if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length){return !1}for(let c=0;c<a.length;c+=1){if(!bp(a[c],b[c])){return !1}}return !0}else{return !1}}function bq(a){let b;a.length<1240?(b=107):a.length<33900?(b=1131):(b=32768);return b}function br(a,b,c){let d=[],e=[],f=aO.getCard16(a,b),g,h;if(f!==0){let c=aO.getByte(a,b+2);g=b+(f+1)*c+2;let e=b+3;for(let b=0;b<f+1;b+=1)d.push(aO.getOffset(a,e,c)),e+=c;h=g+d[f]}else h=b+2;for(let b=0;b<d.length-1;b+=1){let f=aO.getBytes(a,g+d[b],g+d[b+1]);c&&(f=c(f));e.push(f)}return{objects:e,startOffset:b,endOffset:h}}function bs(a,b){let c=[],d=aO.getCard16(a,b),e,f;if(d!==0){let g=aO.getByte(a,b+2);e=b+(d+1)*g+2;let h=b+3;for(let b=0;b<d+1;b+=1)c.push(aO.getOffset(a,h,g)),h+=g;f=e+c[d]}else f=b+2;return{offsets:c,startOffset:b,endOffset:f}}function bt(a,b,c,d,e){let f=aO.getCard16(c,d),g=0;if(f!==0){let a=aO.getByte(c,d+2);g=d+(f+1)*a+2}let h=aO.getBytes(c,g+b[a],g+b[a+1]);e&&(h=e(h));return h}function bu(a){let b='',c=15,d=['0','1','2','3','4','5','6','7','8','9','.','E','E-',null,'-'];while(!0){let e=a.parseByte(),f=e>>4,g=e&15;if(f===c){break}b+=d[f];if(g===c){break}b+=d[g]}return parseFloat(b)}function bv(a,b){let c,d,e,f;if(b===28){c=a.parseByte();d=a.parseByte();return c<<8|d}if(b===29){c=a.parseByte();d=a.parseByte();e=a.parseByte();f=a.parseByte();return c<<24|d<<16|e<<8|f}if(b===30){return bu(a)}if(b>=32&&b<=246){return b-139}if(b>=247&&b<=250){c=a.parseByte();return(b-247)*256+c+108}if(b>=251&&b<=254){c=a.parseByte();return-(b-251)*256-c-108}throw new Error('Invalid b0 '+b)}function bw(a){let b={};for(let c=0;c<a.length;c+=1){let d=a[c][0],e=a[c][1],f;e.length===1?(f=e[0]):(f=e);if(b.hasOwnProperty(d)&&!isNaN(b[d])){throw new Error('Object '+b+' already has key '+d)}b[d]=f}return b}function bx(a,b,c){b=b!==undefined?b:0;let d=new aO.Parser(a,b),e=[],f=[];c=c!==undefined?c:a.length;while(d.relativeOffset<c){let a=d.parseByte();a<=21?(a===12&&(a=1200+d.parseByte()),e.push([a,f]),f=[]):f.push(bv(d,a))}return bw(e)}function by(a,b){b<=390?(b=aW[b]):(b=a[b-391]);return b}function bz(a,b,c){let d={},e;for(let f=0;f<b.length;f+=1){let g=b[f];if(Array.isArray(g.type)){let b=[];b.length=g.type.length;for(let d=0;d<g.type.length;d++)e=a[g.op]!==undefined?a[g.op][d]:undefined,e===undefined&&(e=g.value!==undefined&&g.value[d]!==undefined?g.value[d]:null),g.type[d]==='SID'&&(e=by(c,e)),b[d]=e;d[g.name]=b}else e=a[g.op],e===undefined&&(e=g.value!==undefined?g.value:null),g.type==='SID'&&(e=by(c,e)),d[g.name]=e}return d}function bA(a,b){let c={};c.formatMajor=aO.getCard8(a,b);c.formatMinor=aO.getCard8(a,b+1);c.size=aO.getCard8(a,b+2);c.offsetSize=aO.getCard8(a,b+3);c.startOffset=b;c.endOffset=b+4;return c}let bB=[{name:'version',op:0,type:'SID'},{name:'notice',op:1,type:'SID'},{name:'copyright',op:1200,type:'SID'},{name:'fullName',op:2,type:'SID'},{name:'familyName',op:3,type:'SID'},{name:'weight',op:4,type:'SID'},{name:'isFixedPitch',op:1201,type:'number',value:0},{name:'italicAngle',op:1202,type:'number',value:0},{name:'underlinePosition',op:1203,type:'number',value:-100},{name:'underlineThickness',op:1204,type:'number',value:50},{name:'paintType',op:1205,type:'number',value:0},{name:'charstringType',op:1206,type:'number',value:2},{name:'fontMatrix',op:1207,type:['real','real','real','real','real','real'],value:[0.001,0,0,0.001,0,0]},{name:'uniqueId',op:13,type:'number'},{name:'fontBBox',op:5,type:['number','number','number','number'],value:[0,0,0,0]},{name:'strokeWidth',op:1208,type:'number',value:0},{name:'xuid',op:14,type:[],value:null},{name:'charset',op:15,type:'offset',value:0},{name:'encoding',op:16,type:'offset',value:0},{name:'charStrings',op:17,type:'offset',value:0},{name:'private',op:18,type:['number','offset'],value:[0,0]},{name:'ros',op:1230,type:['SID','SID','number']},{name:'cidFontVersion',op:1231,type:'number',value:0},{name:'cidFontRevision',op:1232,type:'number',value:0},{name:'cidFontType',op:1233,type:'number',value:0},{name:'cidCount',op:1234,type:'number',value:8720},{name:'uidBase',op:1235,type:'number'},{name:'fdArray',op:1236,type:'offset'},{name:'fdSelect',op:1237,type:'offset'},{name:'fontName',op:1238,type:'SID'}],bC=[{name:'subrs',op:19,type:'offset',value:0},{name:'defaultWidthX',op:20,type:'number',value:0},{name:'nominalWidthX',op:21,type:'number',value:0}];function bD(a,b){let c=bx(a,0,a.byteLength);return bz(c,bB,b)}function bE(a,b,c,d){let e=bx(a,b,c);return bz(e,bC,d)}function bF(a,b,c,d){let e=[];for(let f=0;f<c.length;f+=1){let g=new DataView(new Uint8Array(c[f]).buffer),h=bD(g,d);h._subrs=[];h._subrsBias=0;let i=h.private[0],j=h.private[1];if(i!==0&&j!==0){let c=bE(a,j+b,i,d);h._defaultWidthX=c.defaultWidthX;h._nominalWidthX=c.nominalWidthX;if(c.subrs!==0){let d=j+c.subrs,e=br(a,d+b);h._subrs=e.objects;h._subrsBias=bq(h._subrs)}h._privateDict=c}e.push(h)}return e}function bG(a,b,c,d){let e,f,g=new aO.Parser(a,b);c-=1;let h=['.notdef'],i=g.parseCard8();if(i===0){for(let a=0;a<c;a+=1)e=g.parseSID(),h.push(by(d,e))}else if(i===1){while(h.length<=c){e=g.parseSID();f=g.parseCard8();for(let a=0;a<=f;a+=1)h.push(by(d,e)),e+=1}}else if(i===2){while(h.length<=c){e=g.parseSID();f=g.parseCard16();for(let a=0;a<=f;a+=1)h.push(by(d,e)),e+=1}}else{throw new Error('Unknown charset format '+i)};return h}function bH(a,b,c){let d,e={},f=new aO.Parser(a,b),g=f.parseCard8();if(g===0){let a=f.parseCard8();for(let b=0;b<a;b+=1)d=f.parseCard8(),e[d]=b}else if(g===1){let a=f.parseCard8();d=1;for(let b=0;b<a;b+=1){let c=f.parseCard8(),g=f.parseCard8();for(let a=c;a<=c+g;a+=1)e[a]=d,d+=1}}else{throw new Error('Unknown encoding format '+g)};return new ba(e,c)}function bI(a,b,c){let d,e,f,g,h=new $(),i=[],j=0,k=!1,l=!1,m=0,n=0,o,p,q,r;if(a.isCIDFont){let c=a.tables.cff.topDict._fdSelect[b.index],d=a.tables.cff.topDict._fdArray[c];o=d._subrs;p=d._subrsBias;q=d._defaultWidthX;r=d._nominalWidthX}else o=a.tables.cff.topDict._subrs,p=a.tables.cff.topDict._subrsBias,q=a.tables.cff.topDict._defaultWidthX,r=a.tables.cff.topDict._nominalWidthX;let s=q;function t(a,b){l&&h.closePath();h.moveTo(a,b);l=!0}function u(){let a;a=i.length%2!==0;a&&!k&&(s=i.shift()+r);j+=i.length>>1;i.length=0;k=!0}function v(c){let q,w,x,y,z,A,B,C,D,E,F,G,H=0;while(H<c.length){let I=c[H];H+=1;switch(I){case 1:u();break;case 3:u();break;case 4:i.length>1&&!k&&(s=i.shift()+r,k=!0);n+=i.pop();t(m,n);break;case 5:while(i.length>0)m+=i.shift(),n+=i.shift(),h.lineTo(m,n);break;case 6:while(i.length>0){m+=i.shift();h.lineTo(m,n);if(i.length===0){break}n+=i.shift();h.lineTo(m,n)};break;case 7:while(i.length>0){n+=i.shift();h.lineTo(m,n);if(i.length===0){break}m+=i.shift();h.lineTo(m,n)};break;case 8:while(i.length>0)d=m+i.shift(),e=n+i.shift(),f=d+i.shift(),g=e+i.shift(),m=f+i.shift(),n=g+i.shift(),h.curveTo(d,e,f,g,m,n);break;case 10:z=i.pop()+p;A=o[z];A&&v(A);break;case 11:return;case 12:I=c[H];H+=1;switch(I){case 35:d=m+i.shift();e=n+i.shift();f=d+i.shift();g=e+i.shift();B=f+i.shift();C=g+i.shift();D=B+i.shift();E=C+i.shift();F=D+i.shift();G=E+i.shift();m=F+i.shift();n=G+i.shift();i.shift();h.curveTo(d,e,f,g,B,C);h.curveTo(D,E,F,G,m,n);break;case 34:d=m+i.shift();e=n;f=d+i.shift();g=e+i.shift();B=f+i.shift();C=g;D=B+i.shift();E=g;F=D+i.shift();G=n;m=F+i.shift();h.curveTo(d,e,f,g,B,C);h.curveTo(D,E,F,G,m,n);break;case 36:d=m+i.shift();e=n+i.shift();f=d+i.shift();g=e+i.shift();B=f+i.shift();C=g;D=B+i.shift();E=g;F=D+i.shift();G=E+i.shift();m=F+i.shift();h.curveTo(d,e,f,g,B,C);h.curveTo(D,E,F,G,m,n);break;case 37:d=m+i.shift();e=n+i.shift();f=d+i.shift();g=e+i.shift();B=f+i.shift();C=g+i.shift();D=B+i.shift();E=C+i.shift();F=D+i.shift();G=E+i.shift();Math.abs(F-m)>Math.abs(G-n)?(m=F+i.shift()):(n=G+i.shift());h.curveTo(d,e,f,g,B,C);h.curveTo(D,E,F,G,m,n);break;default:console.log('Glyph '+b.index+': unknown operator '+1200+I);i.length=0};break;case 14:i.length>0&&!k&&(s=i.shift()+r,k=!0);l&&(h.closePath(),l=!1);break;case 18:u();break;case 19:;case 20:u();H+=j+7>>3;break;case 21:i.length>2&&!k&&(s=i.shift()+r,k=!0);n+=i.pop();m+=i.pop();t(m,n);break;case 22:i.length>1&&!k&&(s=i.shift()+r,k=!0);m+=i.pop();t(m,n);break;case 23:u();break;case 24:while(i.length>2)d=m+i.shift(),e=n+i.shift(),f=d+i.shift(),g=e+i.shift(),m=f+i.shift(),n=g+i.shift(),h.curveTo(d,e,f,g,m,n);m+=i.shift();n+=i.shift();h.lineTo(m,n);break;case 25:while(i.length>6)m+=i.shift(),n+=i.shift(),h.lineTo(m,n);d=m+i.shift();e=n+i.shift();f=d+i.shift();g=e+i.shift();m=f+i.shift();n=g+i.shift();h.curveTo(d,e,f,g,m,n);break;case 26:i.length%2&&(m+=i.shift());while(i.length>0)d=m,e=n+i.shift(),f=d+i.shift(),g=e+i.shift(),m=f,n=g+i.shift(),h.curveTo(d,e,f,g,m,n);break;case 27:i.length%2&&(n+=i.shift());while(i.length>0)d=m+i.shift(),e=n,f=d+i.shift(),g=e+i.shift(),m=f+i.shift(),n=g,h.curveTo(d,e,f,g,m,n);break;case 28:q=c[H];w=c[H+1];i.push((q<<24|w<<16)>>16);H+=2;break;case 29:z=i.pop()+a.gsubrsBias;A=a.gsubrs[z];A&&v(A);break;case 30:while(i.length>0){d=m;e=n+i.shift();f=d+i.shift();g=e+i.shift();m=f+i.shift();n=g+(i.length===1?i.shift():0);h.curveTo(d,e,f,g,m,n);if(i.length===0){break}d=m+i.shift();e=n;f=d+i.shift();g=e+i.shift();n=g+i.shift();m=f+(i.length===1?i.shift():0);h.curveTo(d,e,f,g,m,n)};break;case 31:while(i.length>0){d=m+i.shift();e=n;f=d+i.shift();g=e+i.shift();n=g+i.shift();m=f+(i.length===1?i.shift():0);h.curveTo(d,e,f,g,m,n);if(i.length===0){break}d=m;e=n+i.shift();f=d+i.shift();g=e+i.shift();m=f+i.shift();n=g+(i.length===1?i.shift():0);h.curveTo(d,e,f,g,m,n)};break;default:I<32?console.log('Glyph '+b.index+': unknown operator '+I):I<247?i.push(I-139):I<251?(q=c[H],H+=1,i.push((I-247)*256+q+108)):I<255?(q=c[H],H+=1,i.push(-(I-251)*256-q-108)):(q=c[H],w=c[H+1],x=c[H+2],y=c[H+3],H+=4,i.push((q<<24|w<<16|x<<8|y)/65536))}}}v(c);b.advanceWidth=s;return h}function bJ(a,b,c,d){let e=[],f,g=new aO.Parser(a,b),h=g.parseCard8();if(h===0){for(let a=0;a<c;a++){f=g.parseCard8();if(f>=d){throw new Error('CFF table CID Font FDSelect has bad FD index value '+f+' (FD count '+d+')')}e.push(f)}}else if(h===3){let a=g.parseCard16(),b=g.parseCard16();if(b!==0){throw new Error('CFF Table CID Font FDSelect format 3 range has bad initial GID '+b)}let h;for(let i=0;i<a;i++){f=g.parseCard8();h=g.parseCard16();if(f>=d){throw new Error('CFF table CID Font FDSelect has bad FD index value '+f+' (FD count '+d+')')}if(h>c){throw new Error('CFF Table CID Font FDSelect format 3 range has bad GID '+h)}for(;b<h;b++)e.push(f);b=h}if(h!==c){throw new Error('CFF Table CID Font FDSelect format 3 range has bad final GID '+h)}}else{throw new Error('CFF Table CID Font FDSelect table has unsupported format '+h)};return e}function bK(a,b,c,d){c.tables.cff={};let e=bA(a,b),f=br(a,e.endOffset,aO.bytesToString),g=br(a,f.endOffset),h=br(a,g.endOffset,aO.bytesToString),j=br(a,h.endOffset);c.gsubrs=j.objects;c.gsubrsBias=bq(c.gsubrs);let k=bF(a,b,g.objects,h.objects);if(k.length!==1){throw new Error('CFF table has too many fonts in \'FontSet\' - count of fonts NameIndex.length = '+k.length)}let l=k[0];c.tables.cff.topDict=l;l._privateDict&&(c.defaultWidthX=l._privateDict.defaultWidthX,c.nominalWidthX=l._privateDict.nominalWidthX);l.ros[0]!==undefined&&l.ros[1]!==undefined&&(c.isCIDFont=!0);if(c.isCIDFont){let d=l.fdArray,e=l.fdSelect;if(d===0||e===0){throw new Error('Font is marked as a CID font, but FDArray and/or FDSelect information is missing')}d+=b;let f=br(a,d),g=bF(a,b,f.objects,h.objects);l._fdArray=g;e+=b;l._fdSelect=bJ(a,e,c.numGlyphs,g.length)}let m=b+l.private[1],n=bE(a,m,l.private[0],h.objects);c.defaultWidthX=n.defaultWidthX;c.nominalWidthX=n.nominalWidthX;if(n.subrs!==0){let b=m+n.subrs,d=br(a,b);c.subrs=d.objects;c.subrsBias=bq(c.subrs)}else c.subrs=[],c.subrsBias=0;let o;d.lowMemory?(o=bs(a,b+l.charStrings),c.nGlyphs=o.offsets.length):(o=br(a,b+l.charStrings),c.nGlyphs=o.objects.length);let p=bG(a,b+l.charset,c.nGlyphs,h.objects);l.encoding===0?(c.cffEncoding=new ba(aX,p)):l.encoding===1?(c.cffEncoding=new ba(aY,p)):(c.cffEncoding=bH(a,b+l.encoding,p));c.encoding=c.encoding||c.cffEncoding;c.glyphs=new bo.GlyphSet(c);if(d.lowMemory)c._push=function(d){let e=bt(d,o.offsets,a,b+l.charStrings);c.glyphs.push(d,bo.cffGlyphLoader(c,d,bI,e))};else{for(let a=0;a<c.nGlyphs;a+=1){let b=o.objects[a];c.glyphs.push(a,bo.cffGlyphLoader(c,a,bI,b))}}}function bL(a,b){let c,d=aW.indexOf(a);d>=0&&(c=d);d=b.indexOf(a);d>=0?(c=d+aW.length):(c=aW.length+b.length,b.push(a));return c}function bM(){return new aB.Record('Header',[{name:'major',type:'Card8',value:1},{name:'minor',type:'Card8',value:0},{name:'hdrSize',type:'Card8',value:4},{name:'major',type:'Card8',value:1}])}function bN(a){let b=new aB.Record('Name INDEX',[{name:'names',type:'INDEX',value:[]}]);b.names=[];for(let c=0;c<a.length;c+=1)b.names.push({name:'name_'+c,type:'NAME',value:a[c]});return b}function bO(a,b,c){let d={};for(let e=0;e<a.length;e+=1){let f=a[e],g=b[f.name];g!==undefined&&!bp(g,f.value)&&(f.type==='SID'&&(g=bL(g,c)),d[f.op]={name:f.name,type:f.type,value:g})}return d}function bP(a,b){let c=new aB.Record('Top DICT',[{name:'dict',type:'DICT',value:{}}]);c.dict=bO(bB,a,b);return c}function bQ(a){let b=new aB.Record('Top DICT INDEX',[{name:'topDicts',type:'INDEX',value:[]}]);b.topDicts=[{name:'topDict_0',type:'TABLE',value:a}];return b}function bR(a){let b=new aB.Record('String INDEX',[{name:'strings',type:'INDEX',value:[]}]);b.strings=[];for(let c=0;c<a.length;c+=1)b.strings.push({name:'string_'+c,type:'STRING',value:a[c]});return b}function bS(){return new aB.Record('Global Subr INDEX',[{name:'subrs',type:'INDEX',value:[]}])}function bT(a,b){let c=new aB.Record('Charsets',[{name:'format',type:'Card8',value:0}]);for(let d=0;d<a.length;d+=1){let e=a[d],f=bL(e,b);c.fields.push({name:'glyph_'+d,type:'SID',value:f})}return c}function bU(a){let b=[],c=a.path;b.push({name:'width',type:'NUMBER',value:a.advanceWidth});let d=0,e=0;for(let a=0;a<c.commands.length;a+=1){let f,g,h=c.commands[a];if(h.type==='Q'){let a=0.3333333333333333,b=0.6666666666666666;h={type:'C',x:h.x,y:h.y,x1:a*d+b*h.x1,y1:a*e+b*h.y1,x2:a*h.x+b*h.x1,y2:a*h.y+b*h.y1}}if(h.type==='M')f=Math.round(h.x-d),g=Math.round(h.y-e),b.push({name:'dx',type:'NUMBER',value:f}),b.push({name:'dy',type:'NUMBER',value:g}),b.push({name:'rmoveto',type:'OP',value:21}),d=Math.round(h.x),e=Math.round(h.y);else if(h.type==='L')f=Math.round(h.x-d),g=Math.round(h.y-e),b.push({name:'dx',type:'NUMBER',value:f}),b.push({name:'dy',type:'NUMBER',value:g}),b.push({name:'rlineto',type:'OP',value:5}),d=Math.round(h.x),e=Math.round(h.y);else if(h.type==='C'){let a=Math.round(h.x1-d),c=Math.round(h.y1-e),i=Math.round(h.x2-h.x1),j=Math.round(h.y2-h.y1);f=Math.round(h.x-h.x2);g=Math.round(h.y-h.y2);b.push({name:'dx1',type:'NUMBER',value:a});b.push({name:'dy1',type:'NUMBER',value:c});b.push({name:'dx2',type:'NUMBER',value:i});b.push({name:'dy2',type:'NUMBER',value:j});b.push({name:'dx',type:'NUMBER',value:f});b.push({name:'dy',type:'NUMBER',value:g});b.push({name:'rrcurveto',type:'OP',value:8});d=Math.round(h.x);e=Math.round(h.y)}}b.push({name:'endchar',type:'OP',value:14});return b}function bV(a){let b=new aB.Record('CharStrings INDEX',[{name:'charStrings',type:'INDEX',value:[]}]);for(let c=0;c<a.length;c+=1){let d=a.get(c),e=bU(d);b.charStrings.push({name:d.name,type:'CHARSTRING',value:e})}return b}function bW(a,b){let c=new aB.Record('Private DICT',[{name:'dict',type:'DICT',value:{}}]);c.dict=bO(bC,a,b);return c}function bX(a,b){let c=new aB.Table('CFF ',[{name:'header',type:'RECORD'},{name:'nameIndex',type:'RECORD'},{name:'topDictIndex',type:'RECORD'},{name:'stringIndex',type:'RECORD'},{name:'globalSubrIndex',type:'RECORD'},{name:'charsets',type:'RECORD'},{name:'charStringsIndex',type:'RECORD'},{name:'privateDict',type:'RECORD'}]),d=1/b.unitsPerEm,e={version:b.version,fullName:b.fullName,familyName:b.familyName,weight:b.weightName,fontBBox:b.fontBBox||[0,0,0,0],fontMatrix:[d,0,0,d,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},f={},g=[],h;for(let b=1;b<a.length;b+=1)h=a.get(b),g.push(h.name);let i=[];c.header=bM();c.nameIndex=bN([b.postScriptName]);let j=bP(e,i);c.topDictIndex=bQ(j);c.globalSubrIndex=bS();c.charsets=bT(g,i);c.charStringsIndex=bV(a);c.privateDict=bW(f,i);c.stringIndex=bR(i);let k=c.header.sizeOf()+c.nameIndex.sizeOf()+c.topDictIndex.sizeOf()+c.stringIndex.sizeOf()+c.globalSubrIndex.sizeOf();e.charset=k;e.encoding=0;e.charStrings=e.charset+c.charsets.sizeOf();e.private[1]=e.charStrings+c.charStringsIndex.sizeOf();j=bP(e,i);c.topDictIndex=bQ(j);return c}var bY={parse:bK,make:bX};function bZ(a,b){let c={},d=new aO.Parser(a,b);c.version=d.parseVersion();c.fontRevision=Math.round(d.parseFixed()*1000)/1000;c.checkSumAdjustment=d.parseULong();c.magicNumber=d.parseULong();ad.argument(c.magicNumber===0x5F0F3CF5,'Font header has wrong magic number.');c.flags=d.parseUShort();c.unitsPerEm=d.parseUShort();c.created=d.parseLongDateTime();c.modified=d.parseLongDateTime();c.xMin=d.parseShort();c.yMin=d.parseShort();c.xMax=d.parseShort();c.yMax=d.parseShort();c.macStyle=d.parseUShort();c.lowestRecPPEM=d.parseUShort();c.fontDirectionHint=d.parseShort();c.indexToLocFormat=d.parseShort();c.glyphDataFormat=d.parseShort();return c}function b_(a){let b=Math.round(new Date().getTime()/1000)+2082844800,c=b;a.createdTimestamp&&(c=a.createdTimestamp+2082844800);return new aB.Table('head',[{name:'version',type:'FIXED',value:0x00010000},{name:'fontRevision',type:'FIXED',value:0x00010000},{name:'checkSumAdjustment',type:'ULONG',value:0},{name:'magicNumber',type:'ULONG',value:0x5F0F3CF5},{name:'flags',type:'USHORT',value:0},{name:'unitsPerEm',type:'USHORT',value:1000},{name:'created',type:'LONGDATETIME',value:c},{name:'modified',type:'LONGDATETIME',value:b},{name:'xMin',type:'SHORT',value:0},{name:'yMin',type:'SHORT',value:0},{name:'xMax',type:'SHORT',value:0},{name:'yMax',type:'SHORT',value:0},{name:'macStyle',type:'USHORT',value:0},{name:'lowestRecPPEM',type:'USHORT',value:0},{name:'fontDirectionHint',type:'SHORT',value:2},{name:'indexToLocFormat',type:'SHORT',value:0},{name:'glyphDataFormat',type:'SHORT',value:0}],a)}var b$={parse:bZ,make:b_};function ca(a,b){let c={},d=new aO.Parser(a,b);c.version=d.parseVersion();c.ascender=d.parseShort();c.descender=d.parseShort();c.lineGap=d.parseShort();c.advanceWidthMax=d.parseUShort();c.minLeftSideBearing=d.parseShort();c.minRightSideBearing=d.parseShort();c.xMaxExtent=d.parseShort();c.caretSlopeRise=d.parseShort();c.caretSlopeRun=d.parseShort();c.caretOffset=d.parseShort();d.relativeOffset+=8;c.metricDataFormat=d.parseShort();c.numberOfHMetrics=d.parseUShort();return c}function cb(a){return new aB.Table('hhea',[{name:'version',type:'FIXED',value:0x00010000},{name:'ascender',type:'FWORD',value:0},{name:'descender',type:'FWORD',value:0},{name:'lineGap',type:'FWORD',value:0},{name:'advanceWidthMax',type:'UFWORD',value:0},{name:'minLeftSideBearing',type:'FWORD',value:0},{name:'minRightSideBearing',type:'FWORD',value:0},{name:'xMaxExtent',type:'FWORD',value:0},{name:'caretSlopeRise',type:'SHORT',value:1},{name:'caretSlopeRun',type:'SHORT',value:0},{name:'caretOffset',type:'SHORT',value:0},{name:'reserved1',type:'SHORT',value:0},{name:'reserved2',type:'SHORT',value:0},{name:'reserved3',type:'SHORT',value:0},{name:'reserved4',type:'SHORT',value:0},{name:'metricDataFormat',type:'SHORT',value:0},{name:'numberOfHMetrics',type:'USHORT',value:0}],a)}var cc={parse:ca,make:cb};function cd(a,b,c,d,e){let f,g,h=new aO.Parser(a,b);for(let a=0;a<d;a+=1){a<c&&(f=h.parseUShort(),g=h.parseShort());let b=e.get(a);b.advanceWidth=f;b.leftSideBearing=g}}function ce(a,b,c,d,e){a._hmtxTableData={};let f,g,h=new aO.Parser(b,c);for(let b=0;b<e;b+=1)b<d&&(f=h.parseUShort(),g=h.parseShort()),a._hmtxTableData[b]={advanceWidth:f,leftSideBearing:g}}function cf(a,b,c,d,e,f,g){g.lowMemory?ce(a,b,c,d,e):cd(b,c,d,e,f)}function cg(a){let b=new aB.Table('hmtx',[]);for(let c=0;c<a.length;c+=1){let d=a.get(c),e=d.advanceWidth||0,f=d.leftSideBearing||0;b.fields.push({name:'advanceWidth_'+c,type:'USHORT',value:e});b.fields.push({name:'leftSideBearing_'+c,type:'SHORT',value:f})}return b}var ch={parse:cf,make:cg};function ci(a){let b=new aB.Table('ltag',[{name:'version',type:'ULONG',value:1},{name:'flags',type:'ULONG',value:0},{name:'numTags',type:'ULONG',value:a.length}]),c='',d=12+a.length*4;for(let e=0;e<a.length;++e){let f=c.indexOf(a[e]);f<0&&(f=c.length,c+=a[e]);b.fields.push({name:'offset '+e,type:'USHORT',value:d+f});b.fields.push({name:'length '+e,type:'USHORT',value:a[e].length})}b.fields.push({name:'stringPool',type:'CHARARRAY',value:c});return b}function cj(a,b){let c=new aO.Parser(a,b),d=c.parseULong();ad.argument(d===1,'Unsupported ltag table version.');c.skip('uLong',1);let e=c.parseULong(),f=[];for(let d=0;d<e;d++){let g='',h=b+c.parseUShort(),i=c.parseUShort();for(let b=h;b<h+i;++b)g+=String.fromCharCode(a.getInt8(b));f.push(g)}return f}var ck={make:ci,parse:cj};function cl(a,b){let c={},d=new aO.Parser(a,b);c.version=d.parseVersion();c.numGlyphs=d.parseUShort();c.version===1.0&&(c.maxPoints=d.parseUShort(),c.maxContours=d.parseUShort(),c.maxCompositePoints=d.parseUShort(),c.maxCompositeContours=d.parseUShort(),c.maxZones=d.parseUShort(),c.maxTwilightPoints=d.parseUShort(),c.maxStorage=d.parseUShort(),c.maxFunctionDefs=d.parseUShort(),c.maxInstructionDefs=d.parseUShort(),c.maxStackElements=d.parseUShort(),c.maxSizeOfInstructions=d.parseUShort(),c.maxComponentElements=d.parseUShort(),c.maxComponentDepth=d.parseUShort());return c}function cm(a){return new aB.Table('maxp',[{name:'version',type:'FIXED',value:0x00005000},{name:'numGlyphs',type:'USHORT',value:a}])}var cn={parse:cl,make:cm};let co=['copyright','fontFamily','fontSubfamily','uniqueID','fullName','version','postScriptName','trademark','manufacturer','designer','description','manufacturerURL','designerURL','license','licenseURL','reserved','preferredFamily','preferredSubfamily','compatibleFullName','sampleText','postScriptFindFontName','wwsFamily','wwsSubfamily'],cp={0:'en',1:'fr',2:'de',3:'it',4:'nl',5:'sv',6:'es',7:'da',8:'pt',9:'no',10:'he',11:'ja',12:'ar',13:'fi',14:'el',15:'is',16:'mt',17:'tr',18:'hr',19:'zh-Hant',20:'ur',21:'hi',22:'th',23:'ko',24:'lt',25:'pl',26:'hu',27:'es',28:'lv',29:'se',30:'fo',31:'fa',32:'ru',33:'zh',34:'nl-BE',35:'ga',36:'sq',37:'ro',38:'cz',39:'sk',40:'si',41:'yi',42:'sr',43:'mk',44:'bg',45:'uk',46:'be',47:'uz',48:'kk',49:'az-Cyrl',50:'az-Arab',51:'hy',52:'ka',53:'mo',54:'ky',55:'tg',56:'tk',57:'mn-CN',58:'mn',59:'ps',60:'ks',61:'ku',62:'sd',63:'bo',64:'ne',65:'sa',66:'mr',67:'bn',68:'as',69:'gu',70:'pa',71:'or',72:'ml',73:'kn',74:'ta',75:'te',76:'si',77:'my',78:'km',79:'lo',80:'vi',81:'id',82:'tl',83:'ms',84:'ms-Arab',85:'am',86:'ti',87:'om',88:'so',89:'sw',90:'rw',91:'rn',92:'ny',93:'mg',94:'eo',128:'cy',129:'eu',130:'ca',131:'la',132:'qu',133:'gn',134:'ay',135:'tt',136:'ug',137:'dz',138:'jv',139:'su',140:'gl',141:'af',142:'br',143:'iu',144:'gd',145:'gv',146:'ga',147:'to',148:'el-polyton',149:'kl',150:'az',151:'nn'},cq={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},cr={0x0436:'af',0x041C:'sq',0x0484:'gsw',0x045E:'am',0x1401:'ar-DZ',0x3C01:'ar-BH',0x0C01:'ar',0x0801:'ar-IQ',0x2C01:'ar-JO',0x3401:'ar-KW',0x3001:'ar-LB',0x1001:'ar-LY',0x1801:'ary',0x2001:'ar-OM',0x4001:'ar-QA',0x0401:'ar-SA',0x2801:'ar-SY',0x1C01:'aeb',0x3801:'ar-AE',0x2401:'ar-YE',0x042B:'hy',0x044D:'as',0x082C:'az-Cyrl',0x042C:'az',0x046D:'ba',0x042D:'eu',0x0423:'be',0x0845:'bn',0x0445:'bn-IN',0x201A:'bs-Cyrl',0x141A:'bs',0x047E:'br',0x0402:'bg',0x0403:'ca',0x0C04:'zh-HK',0x1404:'zh-MO',0x0804:'zh',0x1004:'zh-SG',0x0404:'zh-TW',0x0483:'co',0x041A:'hr',0x101A:'hr-BA',0x0405:'cs',0x0406:'da',0x048C:'prs',0x0465:'dv',0x0813:'nl-BE',0x0413:'nl',0x0C09:'en-AU',0x2809:'en-BZ',0x1009:'en-CA',0x2409:'en-029',0x4009:'en-IN',0x1809:'en-IE',0x2009:'en-JM',0x4409:'en-MY',0x1409:'en-NZ',0x3409:'en-PH',0x4809:'en-SG',0x1C09:'en-ZA',0x2C09:'en-TT',0x0809:'en-GB',0x0409:'en',0x3009:'en-ZW',0x0425:'et',0x0438:'fo',0x0464:'fil',0x040B:'fi',0x080C:'fr-BE',0x0C0C:'fr-CA',0x040C:'fr',0x140C:'fr-LU',0x180C:'fr-MC',0x100C:'fr-CH',0x0462:'fy',0x0456:'gl',0x0437:'ka',0x0C07:'de-AT',0x0407:'de',0x1407:'de-LI',0x1007:'de-LU',0x0807:'de-CH',0x0408:'el',0x046F:'kl',0x0447:'gu',0x0468:'ha',0x040D:'he',0x0439:'hi',0x040E:'hu',0x040F:'is',0x0470:'ig',0x0421:'id',0x045D:'iu',0x085D:'iu-Latn',0x083C:'ga',0x0434:'xh',0x0435:'zu',0x0410:'it',0x0810:'it-CH',0x0411:'ja',0x044B:'kn',0x043F:'kk',0x0453:'km',0x0486:'quc',0x0487:'rw',0x0441:'sw',0x0457:'kok',0x0412:'ko',0x0440:'ky',0x0454:'lo',0x0426:'lv',0x0427:'lt',0x082E:'dsb',0x046E:'lb',0x042F:'mk',0x083E:'ms-BN',0x043E:'ms',0x044C:'ml',0x043A:'mt',0x0481:'mi',0x047A:'arn',0x044E:'mr',0x047C:'moh',0x0450:'mn',0x0850:'mn-CN',0x0461:'ne',0x0414:'nb',0x0814:'nn',0x0482:'oc',0x0448:'or',0x0463:'ps',0x0415:'pl',0x0416:'pt',0x0816:'pt-PT',0x0446:'pa',0x046B:'qu-BO',0x086B:'qu-EC',0x0C6B:'qu',0x0418:'ro',0x0417:'rm',0x0419:'ru',0x243B:'smn',0x103B:'smj-NO',0x143B:'smj',0x0C3B:'se-FI',0x043B:'se',0x083B:'se-SE',0x203B:'sms',0x183B:'sma-NO',0x1C3B:'sms',0x044F:'sa',0x1C1A:'sr-Cyrl-BA',0x0C1A:'sr',0x181A:'sr-Latn-BA',0x081A:'sr-Latn',0x046C:'nso',0x0432:'tn',0x045B:'si',0x041B:'sk',0x0424:'sl',0x2C0A:'es-AR',0x400A:'es-BO',0x340A:'es-CL',0x240A:'es-CO',0x140A:'es-CR',0x1C0A:'es-DO',0x300A:'es-EC',0x440A:'es-SV',0x100A:'es-GT',0x480A:'es-HN',0x080A:'es-MX',0x4C0A:'es-NI',0x180A:'es-PA',0x3C0A:'es-PY',0x280A:'es-PE',0x500A:'es-PR',0x0C0A:'es',0x040A:'es',0x540A:'es-US',0x380A:'es-UY',0x200A:'es-VE',0x081D:'sv-FI',0x041D:'sv',0x045A:'syr',0x0428:'tg',0x085F:'tzm',0x0449:'ta',0x0444:'tt',0x044A:'te',0x041E:'th',0x0451:'bo',0x041F:'tr',0x0442:'tk',0x0480:'ug',0x0422:'uk',0x042E:'hsb',0x0420:'ur',0x0843:'uz-Cyrl',0x0443:'uz',0x042A:'vi',0x0452:'cy',0x0488:'wo',0x0485:'sah',0x0478:'ii',0x046A:'yo'};function cs(a,b,c){switch(a){case 0:if(b===0xFFFF){return'und'}else if(c){return c[b]};break;case 1:return cp[b];case 3:return cr[b]};return undefined}let ct='utf-16',cu={0:'macintosh',1:'x-mac-japanese',2:'x-mac-chinesetrad',3:'x-mac-korean',6:'x-mac-greek',7:'x-mac-cyrillic',9:'x-mac-devanagai',10:'x-mac-gurmukhi',11:'x-mac-gujarati',12:'x-mac-oriya',13:'x-mac-bengali',14:'x-mac-tamil',15:'x-mac-telugu',16:'x-mac-kannada',17:'x-mac-malayalam',18:'x-mac-sinhalese',19:'x-mac-burmese',20:'x-mac-khmer',21:'x-mac-thai',22:'x-mac-lao',23:'x-mac-georgian',24:'x-mac-armenian',25:'x-mac-chinesesimp',26:'x-mac-tibetan',27:'x-mac-mongolian',28:'x-mac-ethiopic',29:'x-mac-ce',30:'x-mac-vietnamese',31:'x-mac-extarabic'},cv={15:'x-mac-icelandic',17:'x-mac-turkish',18:'x-mac-croatian',24:'x-mac-ce',25:'x-mac-ce',26:'x-mac-ce',27:'x-mac-ce',28:'x-mac-ce',30:'x-mac-icelandic',37:'x-mac-romanian',38:'x-mac-ce',39:'x-mac-ce',40:'x-mac-ce',143:'x-mac-inuit',146:'x-mac-gaelic'};function cw(a,b,c){switch(a){case 0:return ct;case 1:return cv[c]||cu[b];case 3:if(b===1||b===10){return ct};break};return undefined}function cx(a,b,c){let d={},e=new aO.Parser(a,b),f=e.parseUShort(),g=e.parseUShort(),h=e.offset+e.parseUShort();for(let b=0;b<g;b++){let f=e.parseUShort(),i=e.parseUShort(),j=e.parseUShort(),k=e.parseUShort(),l=co[k]||k,m=e.parseUShort(),n=e.parseUShort(),o=cs(f,j,c),p=cw(f,i,j);if(p!==undefined&&o!==undefined){let b;p===ct?(b=ag.UTF16(a,h+n,m)):(b=ag.MACSTRING(a,h+n,m,p));if(b){let a=d[l];a===undefined&&(a=d[l]={});a[o]=b}}}let i=0;f===1&&(i=e.parseUShort());return d}function cy(a){let b={};for(let c in a)b[a[c]]=parseInt(c);return b}function cz(a,b,c,d,e,f){return new aB.Record('NameRecord',[{name:'platformID',type:'USHORT',value:a},{name:'encodingID',type:'USHORT',value:b},{name:'languageID',type:'USHORT',value:c},{name:'nameID',type:'USHORT',value:d},{name:'length',type:'USHORT',value:e},{name:'offset',type:'USHORT',value:f}])}function cA(a,b){let c=a.length,d=b.length-c+1;loop:
      for(let e=0;e<d;e++){for(;e<d;e++){for(let d=0;d<c;d++){if(b[e+d]!==a[d]){continue loop}}return e}};return-1}function cB(a,b){let c=cA(a,b);if(c<0){c=b.length;let d=0,e=a.length;for(;d<e;++d)b.push(a[d])}return c}function cC(c,d){let e,f=[],g={},h=cy(co);for(let a in c){let b=h[a];b===undefined&&(b=a);e=parseInt(b);if(isNaN(e)){throw new Error('Name table entry "'+a+'" does not exist, see nameTableNames for complete list.')}g[e]=c[a];f.push(e)}let i=cy(cp),j=cy(cr),k=[],l=[];for(let a=0;a<f.length;a++){e=f[a];let b=g[e];for(let a in b){let c=b[a],f=1,g=i[a],h=cq[g],m=cw(f,h,g),n=ah.MACSTRING(c,m);n===undefined&&(f=0,g=d.indexOf(a),g<0&&(g=d.length,d.push(a)),h=4,n=ah.UTF16(c));let o=cB(n,l);k.push(cz(f,h,g,e,n.length,o));let p=j[a];if(p!==undefined){let a=ah.UTF16(c),b=cB(a,l);k.push(cz(3,1,p,e,a.length,b))}}}k.sort(function(a,b){return a.platformID-b.platformID||a.encodingID-b.encodingID||a.languageID-b.languageID||a.nameID-b.nameID});let m=new aB.Table('name',[{name:'format',type:'USHORT',value:0},{name:'count',type:'USHORT',value:k.length},{name:'stringOffset',type:'USHORT',value:6+k.length*12}]);for(let a=0;a<k.length;a++)m.fields.push({name:'record_'+a,type:'RECORD',value:k[a]});m.fields.push({name:'strings',type:'LITERAL',value:l});return m}var cD={parse:cx,make:cC};let cE=[{begin:0x0000,end:0x007F},{begin:0x0080,end:0x00FF},{begin:0x0100,end:0x017F},{begin:0x0180,end:0x024F},{begin:0x0250,end:0x02AF},{begin:0x02B0,end:0x02FF},{begin:0x0300,end:0x036F},{begin:0x0370,end:0x03FF},{begin:0x2C80,end:0x2CFF},{begin:0x0400,end:0x04FF},{begin:0x0530,end:0x058F},{begin:0x0590,end:0x05FF},{begin:0xA500,end:0xA63F},{begin:0x0600,end:0x06FF},{begin:0x07C0,end:0x07FF},{begin:0x0900,end:0x097F},{begin:0x0980,end:0x09FF},{begin:0x0A00,end:0x0A7F},{begin:0x0A80,end:0x0AFF},{begin:0x0B00,end:0x0B7F},{begin:0x0B80,end:0x0BFF},{begin:0x0C00,end:0x0C7F},{begin:0x0C80,end:0x0CFF},{begin:0x0D00,end:0x0D7F},{begin:0x0E00,end:0x0E7F},{begin:0x0E80,end:0x0EFF},{begin:0x10A0,end:0x10FF},{begin:0x1B00,end:0x1B7F},{begin:0x1100,end:0x11FF},{begin:0x1E00,end:0x1EFF},{begin:0x1F00,end:0x1FFF},{begin:0x2000,end:0x206F},{begin:0x2070,end:0x209F},{begin:0x20A0,end:0x20CF},{begin:0x20D0,end:0x20FF},{begin:0x2100,end:0x214F},{begin:0x2150,end:0x218F},{begin:0x2190,end:0x21FF},{begin:0x2200,end:0x22FF},{begin:0x2300,end:0x23FF},{begin:0x2400,end:0x243F},{begin:0x2440,end:0x245F},{begin:0x2460,end:0x24FF},{begin:0x2500,end:0x257F},{begin:0x2580,end:0x259F},{begin:0x25A0,end:0x25FF},{begin:0x2600,end:0x26FF},{begin:0x2700,end:0x27BF},{begin:0x3000,end:0x303F},{begin:0x3040,end:0x309F},{begin:0x30A0,end:0x30FF},{begin:0x3100,end:0x312F},{begin:0x3130,end:0x318F},{begin:0xA840,end:0xA87F},{begin:0x3200,end:0x32FF},{begin:0x3300,end:0x33FF},{begin:0xAC00,end:0xD7AF},{begin:0xD800,end:0xDFFF},{begin:0x10900,end:0x1091F},{begin:0x4E00,end:0x9FFF},{begin:0xE000,end:0xF8FF},{begin:0x31C0,end:0x31EF},{begin:0xFB00,end:0xFB4F},{begin:0xFB50,end:0xFDFF},{begin:0xFE20,end:0xFE2F},{begin:0xFE10,end:0xFE1F},{begin:0xFE50,end:0xFE6F},{begin:0xFE70,end:0xFEFF},{begin:0xFF00,end:0xFFEF},{begin:0xFFF0,end:0xFFFF},{begin:0x0F00,end:0x0FFF},{begin:0x0700,end:0x074F},{begin:0x0780,end:0x07BF},{begin:0x0D80,end:0x0DFF},{begin:0x1000,end:0x109F},{begin:0x1200,end:0x137F},{begin:0x13A0,end:0x13FF},{begin:0x1400,end:0x167F},{begin:0x1680,end:0x169F},{begin:0x16A0,end:0x16FF},{begin:0x1780,end:0x17FF},{begin:0x1800,end:0x18AF},{begin:0x2800,end:0x28FF},{begin:0xA000,end:0xA48F},{begin:0x1700,end:0x171F},{begin:0x10300,end:0x1032F},{begin:0x10330,end:0x1034F},{begin:0x10400,end:0x1044F},{begin:0x1D000,end:0x1D0FF},{begin:0x1D400,end:0x1D7FF},{begin:0xFF000,end:0xFFFFD},{begin:0xFE00,end:0xFE0F},{begin:0xE0000,end:0xE007F},{begin:0x1900,end:0x194F},{begin:0x1950,end:0x197F},{begin:0x1980,end:0x19DF},{begin:0x1A00,end:0x1A1F},{begin:0x2C00,end:0x2C5F},{begin:0x2D30,end:0x2D7F},{begin:0x4DC0,end:0x4DFF},{begin:0xA800,end:0xA82F},{begin:0x10000,end:0x1007F},{begin:0x10140,end:0x1018F},{begin:0x10380,end:0x1039F},{begin:0x103A0,end:0x103DF},{begin:0x10450,end:0x1047F},{begin:0x10480,end:0x104AF},{begin:0x10800,end:0x1083F},{begin:0x10A00,end:0x10A5F},{begin:0x1D300,end:0x1D35F},{begin:0x12000,end:0x123FF},{begin:0x1D360,end:0x1D37F},{begin:0x1B80,end:0x1BBF},{begin:0x1C00,end:0x1C4F},{begin:0x1C50,end:0x1C7F},{begin:0xA880,end:0xA8DF},{begin:0xA900,end:0xA92F},{begin:0xA930,end:0xA95F},{begin:0xAA00,end:0xAA5F},{begin:0x10190,end:0x101CF},{begin:0x101D0,end:0x101FF},{begin:0x102A0,end:0x102DF},{begin:0x1F030,end:0x1F09F}];function cF(a){for(let b=0;b<cE.length;b+=1){let c=cE[b];if(a>=c.begin&&a<c.end){return b}}return-1}function cG(a,b){let c={},d=new aO.Parser(a,b);c.version=d.parseUShort();c.xAvgCharWidth=d.parseShort();c.usWeightClass=d.parseUShort();c.usWidthClass=d.parseUShort();c.fsType=d.parseUShort();c.ySubscriptXSize=d.parseShort();c.ySubscriptYSize=d.parseShort();c.ySubscriptXOffset=d.parseShort();c.ySubscriptYOffset=d.parseShort();c.ySuperscriptXSize=d.parseShort();c.ySuperscriptYSize=d.parseShort();c.ySuperscriptXOffset=d.parseShort();c.ySuperscriptYOffset=d.parseShort();c.yStrikeoutSize=d.parseShort();c.yStrikeoutPosition=d.parseShort();c.sFamilyClass=d.parseShort();c.panose=[];for(let a=0;a<10;a++)c.panose[a]=d.parseByte();c.ulUnicodeRange1=d.parseULong();c.ulUnicodeRange2=d.parseULong();c.ulUnicodeRange3=d.parseULong();c.ulUnicodeRange4=d.parseULong();c.achVendID=String.fromCharCode(d.parseByte(),d.parseByte(),d.parseByte(),d.parseByte());c.fsSelection=d.parseUShort();c.usFirstCharIndex=d.parseUShort();c.usLastCharIndex=d.parseUShort();c.sTypoAscender=d.parseShort();c.sTypoDescender=d.parseShort();c.sTypoLineGap=d.parseShort();c.usWinAscent=d.parseUShort();c.usWinDescent=d.parseUShort();c.version>=1&&(c.ulCodePageRange1=d.parseULong(),c.ulCodePageRange2=d.parseULong());c.version>=2&&(c.sxHeight=d.parseShort(),c.sCapHeight=d.parseShort(),c.usDefaultChar=d.parseUShort(),c.usBreakChar=d.parseUShort(),c.usMaxContent=d.parseUShort());return c}function cH(a){return new aB.Table('OS/2',[{name:'version',type:'USHORT',value:0x0003},{name:'xAvgCharWidth',type:'SHORT',value:0},{name:'usWeightClass',type:'USHORT',value:0},{name:'usWidthClass',type:'USHORT',value:0},{name:'fsType',type:'USHORT',value:0},{name:'ySubscriptXSize',type:'SHORT',value:650},{name:'ySubscriptYSize',type:'SHORT',value:699},{name:'ySubscriptXOffset',type:'SHORT',value:0},{name:'ySubscriptYOffset',type:'SHORT',value:140},{name:'ySuperscriptXSize',type:'SHORT',value:650},{name:'ySuperscriptYSize',type:'SHORT',value:699},{name:'ySuperscriptXOffset',type:'SHORT',value:0},{name:'ySuperscriptYOffset',type:'SHORT',value:479},{name:'yStrikeoutSize',type:'SHORT',value:49},{name:'yStrikeoutPosition',type:'SHORT',value:258},{name:'sFamilyClass',type:'SHORT',value:0},{name:'bFamilyType',type:'BYTE',value:0},{name:'bSerifStyle',type:'BYTE',value:0},{name:'bWeight',type:'BYTE',value:0},{name:'bProportion',type:'BYTE',value:0},{name:'bContrast',type:'BYTE',value:0},{name:'bStrokeVariation',type:'BYTE',value:0},{name:'bArmStyle',type:'BYTE',value:0},{name:'bLetterform',type:'BYTE',value:0},{name:'bMidline',type:'BYTE',value:0},{name:'bXHeight',type:'BYTE',value:0},{name:'ulUnicodeRange1',type:'ULONG',value:0},{name:'ulUnicodeRange2',type:'ULONG',value:0},{name:'ulUnicodeRange3',type:'ULONG',value:0},{name:'ulUnicodeRange4',type:'ULONG',value:0},{name:'achVendID',type:'CHARARRAY',value:'XXXX'},{name:'fsSelection',type:'USHORT',value:0},{name:'usFirstCharIndex',type:'USHORT',value:0},{name:'usLastCharIndex',type:'USHORT',value:0},{name:'sTypoAscender',type:'SHORT',value:0},{name:'sTypoDescender',type:'SHORT',value:0},{name:'sTypoLineGap',type:'SHORT',value:0},{name:'usWinAscent',type:'USHORT',value:0},{name:'usWinDescent',type:'USHORT',value:0},{name:'ulCodePageRange1',type:'ULONG',value:0},{name:'ulCodePageRange2',type:'ULONG',value:0},{name:'sxHeight',type:'SHORT',value:0},{name:'sCapHeight',type:'SHORT',value:0},{name:'usDefaultChar',type:'USHORT',value:0},{name:'usBreakChar',type:'USHORT',value:0},{name:'usMaxContext',type:'USHORT',value:0}],a)}var cI={parse:cG,make:cH,unicodeRanges:cE,getUnicodeRange:cF};function cJ(a,b){let c={},d=new aO.Parser(a,b);c.version=d.parseVersion();c.italicAngle=d.parseFixed();c.underlinePosition=d.parseShort();c.underlineThickness=d.parseShort();c.isFixedPitch=d.parseULong();c.minMemType42=d.parseULong();c.maxMemType42=d.parseULong();c.minMemType1=d.parseULong();c.maxMemType1=d.parseULong();switch(c.version){case 1:c.names=aZ.slice();break;case 2:c.numberOfGlyphs=d.parseUShort();c.glyphNameIndex=new Array(c.numberOfGlyphs);for(let a=0;a<c.numberOfGlyphs;a++)c.glyphNameIndex[a]=d.parseUShort();c.names=[];for(let a=0;a<c.numberOfGlyphs;a++){if(c.glyphNameIndex[a]>=aZ.length){let a=d.parseChar();c.names.push(d.parseString(a))}};break;case 2.5:c.numberOfGlyphs=d.parseUShort();c.offset=new Array(c.numberOfGlyphs);for(let a=0;a<c.numberOfGlyphs;a++)c.offset[a]=d.parseChar();break};return c}function cK(){return new aB.Table('post',[{name:'version',type:'FIXED',value:0x00030000},{name:'italicAngle',type:'FIXED',value:0},{name:'underlinePosition',type:'FWORD',value:0},{name:'underlineThickness',type:'FWORD',value:0},{name:'isFixedPitch',type:'ULONG',value:0},{name:'minMemType42',type:'ULONG',value:0},{name:'maxMemType42',type:'ULONG',value:0},{name:'minMemType1',type:'ULONG',value:0},{name:'maxMemType1',type:'ULONG',value:0}])}var cL={parse:cJ,make:cK};let cM=new Array(9);cM[1]=function a(){let b=this.offset+this.relativeOffset,c=this.parseUShort();if(c===1){return{substFormat:1,coverage:this.parsePointer(aM.coverage),deltaGlyphId:this.parseUShort()}}else if(c===2){return{substFormat:2,coverage:this.parsePointer(aM.coverage),substitute:this.parseOffset16List()}};ad.assert(!1,'0x'+b.toString(16)+': lookup type 1 format must be 1 or 2.')};cM[2]=function a(){let b=this.parseUShort();ad.argument(b===1,'GSUB Multiple Substitution Subtable identifier-format must be 1');return{substFormat:b,coverage:this.parsePointer(aM.coverage),sequences:this.parseListOfLists()}};cM[3]=function a(){let b=this.parseUShort();ad.argument(b===1,'GSUB Alternate Substitution Subtable identifier-format must be 1');return{substFormat:b,coverage:this.parsePointer(aM.coverage),alternateSets:this.parseListOfLists()}};cM[4]=function a(){let b=this.parseUShort();ad.argument(b===1,'GSUB ligature table identifier-format must be 1');return{substFormat:b,coverage:this.parsePointer(aM.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};let cN={sequenceIndex:aM.uShort,lookupListIndex:aM.uShort};cM[5]=function a(){let b=this.offset+this.relativeOffset,c=this.parseUShort();if(c===1){return{substFormat:c,coverage:this.parsePointer(aM.coverage),ruleSets:this.parseListOfLists(function(){let a=this.parseUShort(),b=this.parseUShort();return{input:this.parseUShortList(a-1),lookupRecords:this.parseRecordList(b,cN)}})}}else if(c===2){return{substFormat:c,coverage:this.parsePointer(aM.coverage),classDef:this.parsePointer(aM.classDef),classSets:this.parseListOfLists(function(){let a=this.parseUShort(),b=this.parseUShort();return{classes:this.parseUShortList(a-1),lookupRecords:this.parseRecordList(b,cN)}})}}else if(c===3){let a=this.parseUShort(),b=this.parseUShort();return{substFormat:c,coverages:this.parseList(a,aM.pointer(aM.coverage)),lookupRecords:this.parseRecordList(b,cN)}};ad.assert(!1,'0x'+b.toString(16)+': lookup type 5 format must be 1, 2 or 3.')};cM[6]=function a(){let b=this.offset+this.relativeOffset,c=this.parseUShort();if(c===1){return{substFormat:1,coverage:this.parsePointer(aM.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(cN)}})}}else if(c===2){return{substFormat:2,coverage:this.parsePointer(aM.coverage),backtrackClassDef:this.parsePointer(aM.classDef),inputClassDef:this.parsePointer(aM.classDef),lookaheadClassDef:this.parsePointer(aM.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(cN)}})}}else if(c===3){return{substFormat:3,backtrackCoverage:this.parseList(aM.pointer(aM.coverage)),inputCoverage:this.parseList(aM.pointer(aM.coverage)),lookaheadCoverage:this.parseList(aM.pointer(aM.coverage)),lookupRecords:this.parseRecordList(cN)}};ad.assert(!1,'0x'+b.toString(16)+': lookup type 6 format must be 1, 2 or 3.')};cM[7]=function a(){let b=this.parseUShort();ad.argument(b===1,'GSUB Extension Substitution subtable identifier-format must be 1');let c=this.parseUShort(),d=new aM(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:c,extension:cM[c].call(d)}};cM[8]=function a(){let b=this.parseUShort();ad.argument(b===1,'GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1');return{substFormat:b,coverage:this.parsePointer(aM.coverage),backtrackCoverage:this.parseList(aM.pointer(aM.coverage)),lookaheadCoverage:this.parseList(aM.pointer(aM.coverage)),substitutes:this.parseUShortList()}};function cO(a,b){b=b||0;let c=new aM(a,b),d=c.parseVersion(1);ad.argument(d===1||d===1.1,'Unsupported GSUB table version.');if(d===1){return{version:d,scripts:c.parseScriptList(),features:c.parseFeatureList(),lookups:c.parseLookupList(cM)}}else{return{version:d,scripts:c.parseScriptList(),features:c.parseFeatureList(),lookups:c.parseLookupList(cM),variations:c.parseFeatureVariationsList()}}}let cP=new Array(9);cP[1]=function b(a){if(a.substFormat===1){return new aB.Table('substitutionTable',[{name:'substFormat',type:'USHORT',value:1},{name:'coverage',type:'TABLE',value:new aB.Coverage(a.coverage)},{name:'deltaGlyphID',type:'USHORT',value:a.deltaGlyphId}])}else{return new aB.Table('substitutionTable',[{name:'substFormat',type:'USHORT',value:2},{name:'coverage',type:'TABLE',value:new aB.Coverage(a.coverage)}].concat(aB.ushortList('substitute',a.substitute)))}ad.fail('Lookup type 1 substFormat must be 1 or 2.')};cP[3]=function b(a){ad.assert(a.substFormat===1,'Lookup type 3 substFormat must be 1.');return new aB.Table('substitutionTable',[{name:'substFormat',type:'USHORT',value:1},{name:'coverage',type:'TABLE',value:new aB.Coverage(a.coverage)}].concat(aB.tableList('altSet',a.alternateSets,function(a){return new aB.Table('alternateSetTable',aB.ushortList('alternate',a))})))};cP[4]=function b(a){ad.assert(a.substFormat===1,'Lookup type 4 substFormat must be 1.');return new aB.Table('substitutionTable',[{name:'substFormat',type:'USHORT',value:1},{name:'coverage',type:'TABLE',value:new aB.Coverage(a.coverage)}].concat(aB.tableList('ligSet',a.ligatureSets,function(a){return new aB.Table('ligatureSetTable',aB.tableList('ligature',a,function(a){return new aB.Table('ligatureTable',[{name:'ligGlyph',type:'USHORT',value:a.ligGlyph}].concat(aB.ushortList('component',a.components,a.components.length+1)))}))})))};function cQ(a){return new aB.Table('GSUB',[{name:'version',type:'ULONG',value:0x10000},{name:'scripts',type:'TABLE',value:new aB.ScriptList(a.scripts)},{name:'features',type:'TABLE',value:new aB.FeatureList(a.features)},{name:'lookups',type:'TABLE',value:new aB.LookupList(a.lookups,cP)}])}var cR={parse:cO,make:cQ};function cS(a,b){let c=new aO.Parser(a,b),d=c.parseULong();ad.argument(d===1,'Unsupported META table version.');c.parseULong();c.parseULong();let e=c.parseULong(),f={};for(let d=0;d<e;d++){let g=c.parseTag(),h=c.parseULong(),i=c.parseULong(),j=ag.UTF8(a,b+h,i);f[g]=j}return f}function cT(a){let b=Object.keys(a).length,c='',d=16+b*12,e=new aB.Table('meta',[{name:'version',type:'ULONG',value:1},{name:'flags',type:'ULONG',value:0},{name:'offset',type:'ULONG',value:d},{name:'numTags',type:'ULONG',value:b}]);for(let b in a){let f=c.length;c+=a[b];e.fields.push({name:'tag '+b,type:'TAG',value:b});e.fields.push({name:'offset '+b,type:'ULONG',value:d+f});e.fields.push({name:'length '+b,type:'ULONG',value:a[b].length})}e.fields.push({name:'stringPool',type:'CHARARRAY',value:c});return e}var cU={parse:cS,make:cT};function cV(a){return Math.log(a)/Math.log(2)|0}function cW(a){while(a.length%4!==0)a.push(0);let b=0;for(let c=0;c<a.length;c+=4)b+=(a[c]<<24)+(a[c+1]<<16)+(a[c+2]<<8)+a[c+3];b%=Math.pow(2,32);return b}function cX(a,b,c,d){return new aB.Record('Table Record',[{name:'tag',type:'TAG',value:a!==undefined?a:''},{name:'checkSum',type:'ULONG',value:b!==undefined?b:0},{name:'offset',type:'ULONG',value:c!==undefined?c:0},{name:'length',type:'ULONG',value:d!==undefined?d:0}])}function cY(a){let b=new aB.Table('sfnt',[{name:'version',type:'TAG',value:'OTTO'},{name:'numTables',type:'USHORT',value:0},{name:'searchRange',type:'USHORT',value:0},{name:'entrySelector',type:'USHORT',value:0},{name:'rangeShift',type:'USHORT',value:0}]);b.tables=a;b.numTables=a.length;let c=Math.pow(2,cV(b.numTables));b.searchRange=16*c;b.entrySelector=cV(c);b.rangeShift=b.numTables*16-b.searchRange;let d=[],e=[],f=b.sizeOf()+cX().sizeOf()*b.numTables;while(f%4!==0)f+=1,e.push({name:'padding',type:'BYTE',value:0});for(let b=0;b<a.length;b+=1){let c=a[b];ad.argument(c.tableName.length===4,'Table name'+c.tableName+' is invalid.');let g=c.sizeOf(),h=cX(c.tableName,cW(c.encode()),f,g);d.push({name:h.tag+' Table Record',type:'RECORD',value:h});e.push({name:c.tableName+' table',type:'RECORD',value:c});f+=g;ad.argument(!isNaN(f),'Something went wrong calculating the offset.');while(f%4!==0)f+=1,e.push({name:'padding',type:'BYTE',value:0})}d.sort(function(a,b){if(a.value.tag>b.value.tag){return 1}else{return-1}});b.fields=b.fields.concat(d);b.fields=b.fields.concat(e);return b}function cZ(a,b,c){for(let c=0;c<b.length;c+=1){let d=a.charToGlyphIndex(b[c]);if(d>0){let b=a.glyphs.get(d);return b.getMetrics()}}return c}function c_(a){let b=0;for(let c=0;c<a.length;c+=1)b+=a[c];return b/a.length}function c$(a){let b=[],c=[],d=[],e=[],f=[],g=[],h=[],i,j=0,k=0,l=0,m=0,n=0;for(let o=0;o<a.glyphs.length;o+=1){let p=a.glyphs.get(o),q=p.unicode|0;if(isNaN(p.advanceWidth)){throw new Error('Glyph '+p.name+' ('+o+'): advanceWidth is not a number.')}(i>q||i===undefined)&&(q>0&&(i=q));j<q&&(j=q);let r=cI.getUnicodeRange(q);if(r<32)k|=1<<r;else if(r<64)l|=1<<r-32;else if(r<96)m|=1<<r-64;else if(r<123)n|=1<<r-96;else{throw new Error('Unicode ranges bits > 123 are reserved for internal usage')};if(p.name==='.notdef')continue;let s=p.getMetrics();b.push(s.xMin);c.push(s.yMin);d.push(s.xMax);e.push(s.yMax);g.push(s.leftSideBearing);h.push(s.rightSideBearing);f.push(p.advanceWidth)}let o={xMin:Math.min.apply(null,b),yMin:Math.min.apply(null,c),xMax:Math.max.apply(null,d),yMax:Math.max.apply(null,e),advanceWidthMax:Math.max.apply(null,f),advanceWidthAvg:c_(f),minLeftSideBearing:Math.min.apply(null,g),maxLeftSideBearing:Math.max.apply(null,g),minRightSideBearing:Math.min.apply(null,h)};o.ascender=a.ascender;o.descender=a.descender;let p=b$.make({flags:3,unitsPerEm:a.unitsPerEm,xMin:o.xMin,yMin:o.yMin,xMax:o.xMax,yMax:o.yMax,lowestRecPPEM:3,createdTimestamp:a.createdTimestamp}),q=cc.make({ascender:o.ascender,descender:o.descender,advanceWidthMax:o.advanceWidthMax,minLeftSideBearing:o.minLeftSideBearing,minRightSideBearing:o.minRightSideBearing,xMaxExtent:o.maxLeftSideBearing+(o.xMax-o.xMin),numberOfHMetrics:a.glyphs.length}),r=cn.make(a.glyphs.length),s=cI.make({xAvgCharWidth:Math.round(o.advanceWidthAvg),usWeightClass:a.tables.os2.usWeightClass,usWidthClass:a.tables.os2.usWidthClass,usFirstCharIndex:i,usLastCharIndex:j,ulUnicodeRange1:k,ulUnicodeRange2:l,ulUnicodeRange3:m,ulUnicodeRange4:n,fsSelection:a.tables.os2.fsSelection,sTypoAscender:o.ascender,sTypoDescender:o.descender,sTypoLineGap:0,usWinAscent:o.yMax,usWinDescent:Math.abs(o.yMin),ulCodePageRange1:1,sxHeight:cZ(a,'xyvw',{yMax:Math.round(o.ascender/2)}).yMax,sCapHeight:cZ(a,'HIKLEFJMNTZBDPRAGOQSUVWXY',o).yMax,usDefaultChar:a.hasChar(' ')?32:0,usBreakChar:a.hasChar(' ')?32:0}),t=ch.make(a.glyphs),u=aV.make(a.glyphs),v=a.getEnglishName('fontFamily'),w=a.getEnglishName('fontSubfamily'),x=v+' '+w,y=a.getEnglishName('postScriptName');y||(y=v.replace(/\s/g,'')+'-'+w);let z={};for(let b in a.names)z[b]=a.names[b];z.uniqueID||(z.uniqueID={en:a.getEnglishName('manufacturer')+':'+x});z.postScriptName||(z.postScriptName={en:y});z.preferredFamily||(z.preferredFamily=a.names.fontFamily);z.preferredSubfamily||(z.preferredSubfamily=a.names.fontSubfamily);let A=[],B=cD.make(z,A),C=A.length>0?ck.make(A):undefined,D=cL.make(),E=bY.make(a.glyphs,{version:a.getEnglishName('version'),fullName:x,familyName:v,weightName:w,postScriptName:y,unitsPerEm:a.unitsPerEm,fontBBox:[0,o.yMin,o.ascender,o.advanceWidthMax]}),F=a.metas&&Object.keys(a.metas).length>0?cU.make(a.metas):undefined,G=[p,q,r,s,B,u,D,E,t];C&&G.push(C);a.tables.gsub&&G.push(cR.make(a.tables.gsub));F&&G.push(F);let H=cY(G),I=H.encode(),J=cW(I),K=H.fields,L=!1;for(let a=0;a<K.length;a+=1){if(K[a].name==='head table'){K[a].value.checkSumAdjustment=0xB1B0AFBA-J;L=!0;break}}if(!L){throw new Error('Could not find head table with checkSum to adjust.')}return H}var da={make:cY,fontToTable:c$,computeCheckSum:cW};function db(a,b){let c=0,d=a.length-1;while(c<=d){let e=c+d>>>1,f=a[e].tag;if(f===b){return e}else f<b?(c=e+1):(d=e-1)}return-c-1}function dc(a,b){let c=0,d=a.length-1;while(c<=d){let e=c+d>>>1,f=a[e];if(f===b){return e}else f<b?(c=e+1):(d=e-1)}return-c-1}function dd(a,b){let c,d=0,e=a.length-1;while(d<=e){let f=d+e>>>1;c=a[f];let g=c.start;if(g===b){return c}else g<b?(d=f+1):(e=f-1)}if(d>0){c=a[d-1];if(b>c.end)return 0;return c}}function de(a,b){this.font=a;this.tableName=b}de.prototype={searchTag:db,binSearch:dc,getTable:function(a){let b=this.font.tables[this.tableName];!b&&a&&(b=this.font.tables[this.tableName]=this.createDefaultTable());return b},getScriptNames:function(){let a=this.getTable();if(!a){return[]}return a.scripts.map(function(a){return a.tag})},getDefaultScriptName:function(){let a=this.getTable();if(!a){return}let b=!1;for(let c=0;c<a.scripts.length;c++){let d=a.scripts[c].tag;if(d==='DFLT')return d;d==='latn'&&(b=!0)}if(b)return'latn'},getScriptTable:function(a,b){let c=this.getTable(b);if(c){a=a||'DFLT';let d=c.scripts,e=db(c.scripts,a);if(e>=0){return d[e].script}else if(b){let b={tag:a,script:{defaultLangSys:{reserved:0,reqFeatureIndex:0xffff,featureIndexes:[]},langSysRecords:[]}};d.splice(-1-e,0,b);return b.script}}},getLangSysTable:function(a,b,c){let d=this.getScriptTable(a,c);if(d){if(!b||b==='dflt'||b==='DFLT'){return d.defaultLangSys}let a=db(d.langSysRecords,b);if(a>=0){return d.langSysRecords[a].langSys}else if(c){let c={tag:b,langSys:{reserved:0,reqFeatureIndex:0xffff,featureIndexes:[]}};d.langSysRecords.splice(-1-a,0,c);return c.langSys}}},getFeatureTable:function(a,b,c,d){let e=this.getLangSysTable(a,b,d);if(e){let a,b=e.featureIndexes,f=this.font.tables[this.tableName].features;for(let d=0;d<b.length;d++){a=f[b[d]];if(a.tag===c){return a.feature}}if(d){let d=f.length;ad.assert(d===0||c>=f[d-1].tag,'Features must be added in alphabetical order.');a={tag:c,feature:{params:0,lookupListIndexes:[]}};f.push(a);b.push(d);return a.feature}}},getLookupTables:function(a,b,c,d,e){let f=this.getFeatureTable(a,b,c,e),g=[];if(f){let a,b=f.lookupListIndexes,c=this.font.tables[this.tableName].lookups;for(let e=0;e<b.length;e++)a=c[b[e]],a.lookupType===d&&g.push(a);if(g.length===0&&e){a={lookupType:d,lookupFlag:0,subtables:[],markFilteringSet:undefined};let e=c.length;c.push(a);b.push(e);return[a]}}return g},getGlyphClass:function(a,b){switch(a.format){case 1:if(a.startGlyph<=b&&b<a.startGlyph+a.classes.length){return a.classes[b-a.startGlyph]};return 0;case 2:const c=dd(a.ranges,b);return c?c.classId:0}},getCoverageIndex:function(a,b){switch(a.format){case 1:const d=dc(a.glyphs,b);return d>=0?d:-1;case 2:const c=dd(a.ranges,b);return c?c.index+b-c.start:-1}},expandCoverage:function(a){if(a.format===1){return a.glyphs}else{let b=[],c=a.ranges;for(let a=0;a<c.length;a++){let d=c[a],e=d.start,f=d.end;for(let a=e;a<=f;a++)b.push(a)}return b}}};function df(a){de.call(this,a,'gpos')}df.prototype=de.prototype;df.prototype.init=function(){let a=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(a)};df.prototype.getKerningValue=function(a,b,c){for(let d=0;d<a.length;d++){let e=a[d].subtables;for(let a=0;a<e.length;a++){let d=e[a],f=this.getCoverageIndex(d.coverage,b);if(f<0)continue;switch(d.posFormat){case 1:let j=d.pairSets[f];for(let a=0;a<j.length;a++){let b=j[a];if(b.secondGlyph===c){return b.value1&&b.value1.xAdvance||0}};break;case 2:const i=this.getGlyphClass(d.classDef1,b);const h=this.getGlyphClass(d.classDef2,c);const g=d.classRecords[i][h];return g.value1&&g.value1.xAdvance||0}}}return 0};df.prototype.getKerningTables=function(a,b){if(this.font.tables.gpos){return this.getLookupTables(a,b,'kern',2)}};function dg(a){de.call(this,a,'gsub')}function dh(a,b){let c=a.length;if(c!==b.length){return !1}for(let d=0;d<c;d++){if(a[d]!==b[d]){return !1}}return !0}function di(a,b,c){let d=a.subtables;for(let a=0;a<d.length;a++){let c=d[a];if(c.substFormat===b){return c}}if(c){d.push(c);return c}return undefined}dg.prototype=de.prototype;dg.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:'DFLT',script:{defaultLangSys:{reserved:0,reqFeatureIndex:0xffff,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};dg.prototype.getSingle=function(a,b,c){let d=[],e=this.getLookupTables(b,c,a,1);for(let a=0;a<e.length;a++){let b=e[a].subtables;for(let a=0;a<b.length;a++){let c=b[a],e=this.expandCoverage(c.coverage),f;if(c.substFormat===1){let a=c.deltaGlyphId;for(f=0;f<e.length;f++){let b=e[f];d.push({sub:b,by:b+a})}}else{let a=c.substitute;for(f=0;f<e.length;f++)d.push({sub:e[f],by:a[f]})}}}return d};dg.prototype.getAlternates=function(a,b,c){let d=[],e=this.getLookupTables(b,c,a,3);for(let a=0;a<e.length;a++){let b=e[a].subtables;for(let a=0;a<b.length;a++){let c=b[a],e=this.expandCoverage(c.coverage),f=c.alternateSets;for(let a=0;a<e.length;a++)d.push({sub:e[a],by:f[a]})}}return d};dg.prototype.getLigatures=function(a,b,c){let d=[],e=this.getLookupTables(b,c,a,4);for(let a=0;a<e.length;a++){let b=e[a].subtables;for(let a=0;a<b.length;a++){let c=b[a],e=this.expandCoverage(c.coverage),f=c.ligatureSets;for(let a=0;a<e.length;a++){let b=e[a],c=f[a];for(let a=0;a<c.length;a++){let e=c[a];d.push({sub:[b].concat(e.components),by:e.ligGlyph})}}}}return d};dg.prototype.addSingle=function(a,b,c,d){let e=this.getLookupTables(c,d,a,1,!0)[0],f=di(e,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});ad.assert(f.coverage.format===1,'Ligature: unable to modify coverage table format '+f.coverage.format);let g=b.sub,h=this.binSearch(f.coverage.glyphs,g);h<0&&(h=-1-h,f.coverage.glyphs.splice(h,0,g),f.substitute.splice(h,0,0));f.substitute[h]=b.by};dg.prototype.addAlternate=function(a,b,c,d){let e=this.getLookupTables(c,d,a,3,!0)[0],f=di(e,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});ad.assert(f.coverage.format===1,'Ligature: unable to modify coverage table format '+f.coverage.format);let g=b.sub,h=this.binSearch(f.coverage.glyphs,g);h<0&&(h=-1-h,f.coverage.glyphs.splice(h,0,g),f.alternateSets.splice(h,0,0));f.alternateSets[h]=b.by};dg.prototype.addLigature=function(a,b,c,d){let e=this.getLookupTables(c,d,a,4,!0)[0],f=e.subtables[0];f||(f={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},e.subtables[0]=f);ad.assert(f.coverage.format===1,'Ligature: unable to modify coverage table format '+f.coverage.format);let g=b.sub[0],h=b.sub.slice(1),i={ligGlyph:b.by,components:h},j=this.binSearch(f.coverage.glyphs,g);if(j>=0){let a=f.ligatureSets[j];for(let b=0;b<a.length;b++){if(dh(a[b].components,h)){return}}a.push(i)}else j=-1-j,f.coverage.glyphs.splice(j,0,g),f.ligatureSets.splice(j,0,[i])};dg.prototype.getFeature=function(a,b,c){if(/ss\d\d/.test(a)){return this.getSingle(a,b,c)}switch(a){case 'aalt':;case 'salt':return this.getSingle(a,b,c).concat(this.getAlternates(a,b,c));case 'dlig':;case 'liga':;case 'rlig':return this.getLigatures(a,b,c)};return undefined};dg.prototype.add=function(a,b,c,d){if(/ss\d\d/.test(a)){return this.addSingle(a,b,c,d)}switch(a){case 'aalt':;case 'salt':if(typeof b.by==='number'){return this.addSingle(a,b,c,d)};return this.addAlternate(a,b,c,d);case 'dlig':;case 'liga':;case 'rlig':return this.addLigature(a,b,c,d)};return undefined};function dj(){return typeof window!=='undefined'}function dk(a){let b=new ArrayBuffer(a.length),c=new Uint8Array(b);for(let b=0;b<a.length;++b)c[b]=a[b];return b}function dl(a){let b=new Buffer(a.byteLength),c=new Uint8Array(a);for(let a=0;a<b.length;++a)b[a]=c[a];return b}function dm(a,b){if(!a){throw b}}function dn(a,b,c,d,e){let f;(b&d)>0?(f=a.parseByte(),(b&e)===0&&(f=-f),f=c+f):(b&e)>0?(f=c):(f=c+a.parseShort());return f}function dp(a,b,c){let d=new aO.Parser(b,c);a.numberOfContours=d.parseShort();a._xMin=d.parseShort();a._yMin=d.parseShort();a._xMax=d.parseShort();a._yMax=d.parseShort();let e,f;if(a.numberOfContours>0){let b=a.endPointIndices=[];for(let c=0;c<a.numberOfContours;c+=1)b.push(d.parseUShort());a.instructionLength=d.parseUShort();a.instructions=[];for(let b=0;b<a.instructionLength;b+=1)a.instructions.push(d.parseByte());let c=b[b.length-1]+1;e=[];for(let a=0;a<c;a+=1){f=d.parseByte();e.push(f);if((f&8)>0){let b=d.parseByte();for(let c=0;c<b;c+=1)e.push(f),a+=1}}ad.argument(e.length===c,'Bad flags.');if(b.length>0){let g=[],h;if(c>0){for(let a=0;a<c;a+=1)f=e[a],h={},h.onCurve=!!(f&1),h.lastPointOfContour=b.indexOf(a)>=0,g.push(h);let a=0;for(let b=0;b<c;b+=1)f=e[b],h=g[b],h.x=dn(d,f,a,2,16),a=h.x;let i=0;for(let a=0;a<c;a+=1)f=e[a],h=g[a],h.y=dn(d,f,i,4,32),i=h.y}a.points=g}else a.points=[]}else if(a.numberOfContours===0)a.points=[];else{a.isComposite=!0;a.points=[];a.components=[];let b=!0;while(b){e=d.parseUShort();let c={glyphIndex:d.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(e&1)>0?((e&2)>0?(c.dx=d.parseShort(),c.dy=d.parseShort()):(c.matchedPoints=[d.parseUShort(),d.parseUShort()])):(e&2)>0?(c.dx=d.parseChar(),c.dy=d.parseChar()):(c.matchedPoints=[d.parseByte(),d.parseByte()]);(e&8)>0?(c.xScale=c.yScale=d.parseF2Dot14()):(e&64)>0?(c.xScale=d.parseF2Dot14(),c.yScale=d.parseF2Dot14()):(e&128)>0&&(c.xScale=d.parseF2Dot14(),c.scale01=d.parseF2Dot14(),c.scale10=d.parseF2Dot14(),c.yScale=d.parseF2Dot14());a.components.push(c);b=!!(e&32)}if(e&0x100){a.instructionLength=d.parseUShort();a.instructions=[];for(let b=0;b<a.instructionLength;b+=1)a.instructions.push(d.parseByte())}}}function dq(a,b){let c=[];for(let d=0;d<a.length;d+=1){let e=a[d],f={x:b.xScale*e.x+b.scale01*e.y+b.dx,y:b.scale10*e.x+b.yScale*e.y+b.dy,onCurve:e.onCurve,lastPointOfContour:e.lastPointOfContour};c.push(f)}return c}function dr(a){let b=[],c=[];for(let d=0;d<a.length;d+=1){let e=a[d];c.push(e);e.lastPointOfContour&&(b.push(c),c=[])}ad.argument(c.length===0,'There are still points left in the current contour.');return b}function ds(a){let b=new $();if(!a){return b}let c=dr(a);for(let a=0;a<c.length;++a){let d=c[a],e=null,f=d[d.length-1],g=d[0];if(f.onCurve)b.moveTo(f.x,f.y);else{if(g.onCurve)b.moveTo(g.x,g.y);else{let a={x:(f.x+g.x)*0.5,y:(f.y+g.y)*0.5};b.moveTo(a.x,a.y)}}for(let a=0;a<d.length;++a){e=f;f=g;g=d[(a+1)%d.length];if(f.onCurve)b.lineTo(f.x,f.y);else{let a=e,c=g;e.onCurve||(a={x:(f.x+e.x)*0.5,y:(f.y+e.y)*0.5});g.onCurve||(c={x:(f.x+g.x)*0.5,y:(f.y+g.y)*0.5});b.quadraticCurveTo(f.x,f.y,c.x,c.y)}}b.closePath()}return b}function du(a,b){if(b.isComposite){for(let c=0;c<b.components.length;c+=1){let d=b.components[c],e=a.get(d.glyphIndex);e.getPath();if(e.points){let a;if(d.matchedPoints===undefined)a=dq(e.points,d);else{if(d.matchedPoints[0]>b.points.length-1||d.matchedPoints[1]>e.points.length-1){throw Error('Matched points out of range in '+b.name)}let c=b.points[d.matchedPoints[0]],f=e.points[d.matchedPoints[1]],g={xScale:d.xScale,scale01:d.scale01,scale10:d.scale10,yScale:d.yScale,dx:0,dy:0};f=dq([f],g)[0];g.dx=c.x-f.x;g.dy=c.y-f.y;a=dq(e.points,g)}b.points=b.points.concat(a)}}}return ds(b.points)}function dv(a,b,c,d){let e=new bo.GlyphSet(d);for(let f=0;f<c.length-1;f+=1){let g=c[f],h=c[f+1];g!==h?e.push(f,bo.ttfGlyphLoader(d,f,dp,a,b+g,du)):e.push(f,bo.glyphLoader(d,f))}return e}function dw(a,b,c,d){let e=new bo.GlyphSet(d);d._push=function(f){let g=c[f],h=c[f+1];g!==h?e.push(f,bo.ttfGlyphLoader(d,f,dp,a,b+g,du)):e.push(f,bo.glyphLoader(d,f))};return e}function dx(a,b,c,d,e){if(e.lowMemory)return dw(a,b,c,d);else return dv(a,b,c,d)}var dy={getPath:ds,parse:dx};let dz,dA,dB,dC;function dD(a){this.font=a;this.getCommands=function(a){return dy.getPath(a).commands};this._fpgmState=this._prepState=undefined;this._errorState=0}function dE(a){return a}function dF(a){return Math.sign(a)*Math.round(Math.abs(a))}function dG(a){return Math.sign(a)*Math.round(Math.abs(a*2))/2}function dH(a){return Math.sign(a)*(Math.round(Math.abs(a)+0.5)-0.5)}function dI(a){return Math.sign(a)*Math.ceil(Math.abs(a))}function dJ(a){return Math.sign(a)*Math.floor(Math.abs(a))}let dK=function(a){let b=this.srPeriod,c=this.srPhase,d=this.srThreshold,e=1;a<0&&(a=-a,e=-1);a+=d-c;a=Math.trunc(a/b)*b;a+=c;if(a<0)return c*e;return a*e},dL={x:1,y:0,axis:'x',distance:function(a,b,c,d){return(c?a.xo:a.x)-(d?b.xo:b.x)},interpolate:function(a,b,c,d){let e,f,g,h,i,j,k;if(!d||d===this){e=a.xo-b.xo;f=a.xo-c.xo;i=b.x-b.xo;j=c.x-c.xo;g=Math.abs(e);h=Math.abs(f);k=g+h;if(k===0){a.x=a.xo+(i+j)/2;return}a.x=a.xo+(i*h+j*g)/k;return}e=d.distance(a,b,!0,!0);f=d.distance(a,c,!0,!0);i=d.distance(b,b,!1,!0);j=d.distance(c,c,!1,!0);g=Math.abs(e);h=Math.abs(f);k=g+h;if(k===0){dL.setRelative(a,a,(i+j)/2,d,!0);return}dL.setRelative(a,a,(i*h+j*g)/k,d,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(a,b,c,d,e){if(!d||d===this){a.x=(e?b.xo:b.x)+c;return}let f=e?b.xo:b.x,g=e?b.yo:b.y,h=f+c*d.x,i=g+c*d.y;a.x=h+(a.y-i)/d.normalSlope},slope:0,touch:function(a){a.xTouched=!0},touched:function(a){return a.xTouched},untouch:function(a){a.xTouched=!1}},dM={x:0,y:1,axis:'y',distance:function(a,b,c,d){return(c?a.yo:a.y)-(d?b.yo:b.y)},interpolate:function(a,b,c,d){let e,f,g,h,i,j,k;if(!d||d===this){e=a.yo-b.yo;f=a.yo-c.yo;i=b.y-b.yo;j=c.y-c.yo;g=Math.abs(e);h=Math.abs(f);k=g+h;if(k===0){a.y=a.yo+(i+j)/2;return}a.y=a.yo+(i*h+j*g)/k;return}e=d.distance(a,b,!0,!0);f=d.distance(a,c,!0,!0);i=d.distance(b,b,!1,!0);j=d.distance(c,c,!1,!0);g=Math.abs(e);h=Math.abs(f);k=g+h;if(k===0){dM.setRelative(a,a,(i+j)/2,d,!0);return}dM.setRelative(a,a,(i*h+j*g)/k,d,!0)},normalSlope:0,setRelative:function(a,b,c,d,e){if(!d||d===this){a.y=(e?b.yo:b.y)+c;return}let f=e?b.xo:b.x,g=e?b.yo:b.y,h=f+c*d.x,i=g+c*d.y;a.y=i+d.normalSlope*(a.x-h)},slope:Number.POSITIVE_INFINITY,touch:function(a){a.yTouched=!0},touched:function(a){return a.yTouched},untouch:function(a){a.yTouched=!1}};Object.freeze(dL);Object.freeze(dM);function dN(a,b){this.x=a;this.y=b;this.axis=undefined;this.slope=b/a;this.normalSlope=-a/b;Object.freeze(this)}dN.prototype.distance=function(a,b,c,d){return this.x*dL.distance(a,b,c,d)+this.y*dM.distance(a,b,c,d)};dN.prototype.interpolate=function(a,b,c,d){let e,f,g,h,i,j,k;g=d.distance(a,b,!0,!0);h=d.distance(a,c,!0,!0);e=d.distance(b,b,!1,!0);f=d.distance(c,c,!1,!0);i=Math.abs(g);j=Math.abs(h);k=i+j;if(k===0){this.setRelative(a,a,(e+f)/2,d,!0);return}this.setRelative(a,a,(e*j+f*i)/k,d,!0)};dN.prototype.setRelative=function(a,b,c,d,e){d=d||this;let f=e?b.xo:b.x,g=e?b.yo:b.y,h=f+c*d.x,i=g+c*d.y,j=d.normalSlope,k=this.slope,l=a.x,m=a.y;a.x=(k*l-j*h+i-m)/(k-j);a.y=k*(a.x-l)+m};dN.prototype.touch=function(a){a.xTouched=!0;a.yTouched=!0};function dO(a,b){let c=Math.sqrt(a*a+b*b);a/=c;b/=c;if(a===1&&b===0)return dL;else if(a===0&&b===1)return dM;else return new dN(a,b)}function dP(a,b,c,d){this.x=this.xo=Math.round(a*64)/64;this.y=this.yo=Math.round(b*64)/64;this.lastPointOfContour=c;this.onCurve=d;this.prevPointOnContour=undefined;this.nextPointOnContour=undefined;this.xTouched=!1;this.yTouched=!1;Object.preventExtensions(this)}dP.prototype.nextTouched=function(a){let b=this.nextPointOnContour;while(!a.touched(b)&&b!==this)b=b.nextPointOnContour;return b};dP.prototype.prevTouched=function(a){let b=this.prevPointOnContour;while(!a.touched(b)&&b!==this)b=b.prevPointOnContour;return b};let dQ=Object.freeze(new dP(0,0)),dR={cvCutIn:1.0625,deltaBase:9,deltaShift:0.125,loop:1,minDis:1,autoFlip:!0};function dS(a,b){this.env=a;this.stack=[];this.prog=b;switch(a){case 'glyf':this.zp0=this.zp1=this.zp2=1;this.rp0=this.rp1=this.rp2=0;case 'prep':this.fv=this.pv=this.dpv=dL;this.round=dF}}dD.prototype.exec=function(a,b){if(typeof b!=='number'){throw new Error('Point size is not a number!')}if(this._errorState>2)return;let c=this.font,d=this._prepState;if(!d||d.ppem!==b){let a=this._fpgmState;if(!a){dS.prototype=dR;a=this._fpgmState=new dS('fpgm',c.tables.fpgm);a.funcs=[];a.font=c;g.DEBUG&&(console.log('---EXEC FPGM---'),a.step=-1);try{dA(a)}catch(a){console.log('Hinting error in FPGM:'+a);this._errorState=3;return}}dS.prototype=a;d=this._prepState=new dS('prep',c.tables.prep);d.ppem=b;let f=c.tables.cvt;if(f){let a=d.cvt=new Array(f.length),e=b/c.unitsPerEm;for(let b=0;b<f.length;b++)a[b]=f[b]*e}else d.cvt=[];g.DEBUG&&(console.log('---EXEC PREP---'),d.step=-1);try{dA(d)}catch(a){this._errorState<2&&console.log('Hinting error in PREP:'+a),this._errorState=2}}if(this._errorState>1)return;try{return dB(a,d)}catch(a){this._errorState<1&&(console.log('Hinting error:'+a),console.log('Note: further hinting errors are silenced'));this._errorState=1;return undefined}};dB=function(a,b){let c=b.ppem/b.font.unitsPerEm,d=c,e=a.components,f,h,i;dS.prototype=b;if(!e)i=new dS('glyf',a.instructions),g.DEBUG&&(console.log('---EXEC GLYPH---'),i.step=-1),dC(a,i,c,d),h=i.gZone;else{let j=b.font;h=[];f=[];for(let a=0;a<e.length;a++){let b=e[a],k=j.glyphs.get(b.glyphIndex);i=new dS('glyf',k.instructions);g.DEBUG&&(console.log('---EXEC COMP '+a+'---'),i.step=-1);dC(k,i,c,d);let l=Math.round(b.dx*c),m=Math.round(b.dy*d),n=i.gZone,o=i.contours;for(let a=0;a<n.length;a++){let b=n[a];b.xTouched=b.yTouched=!1;b.xo=b.x=b.x+l;b.yo=b.y=b.y+m}let p=h.length;h.push.apply(h,n);for(let a=0;a<o.length;a++)f.push(o[a]+p)}a.instructions&&!i.inhibitGridFit&&(i=new dS('glyf',a.instructions),i.gZone=i.z0=i.z1=i.z2=h,i.contours=f,h.push(new dP(0,0),new dP(Math.round(a.advanceWidth*c),0)),g.DEBUG&&(console.log('---EXEC COMPOSITE---'),i.step=-1),dA(i),h.length-=2)}return h};dC=function(a,b,c,d){let e=a.points||[],f=e.length,h=b.gZone=b.z0=b.z1=b.z2=[],i=b.contours=[],j;for(let a=0;a<f;a++)j=e[a],h[a]=new dP(j.x*c,j.y*d,j.lastPointOfContour,j.onCurve);let k,l;for(let a=0;a<f;a++)j=h[a],k||(k=j,i.push(a)),j.lastPointOfContour?(j.nextPointOnContour=k,k.prevPointOnContour=j,k=undefined):(l=h[a+1],j.nextPointOnContour=l,l.prevPointOnContour=j);if(b.inhibitGridFit)return;if(g.DEBUG){console.log('PROCESSING GLYPH',b.stack);for(let a=0;a<f;a++)console.log(a,h[a].x,h[a].y)}h.push(new dP(0,0),new dP(Math.round(a.advanceWidth*c),0));dA(b);h.length-=2;if(g.DEBUG){console.log('FINISHED GLYPH',b.stack);for(let a=0;a<f;a++)console.log(a,h[a].x,h[a].y)}};dA=function(a){let b=a.prog;if(!b)return;let c=b.length,d;for(a.ip=0;a.ip<c;a.ip++){g.DEBUG&&a.step++;d=dz[b[a.ip]];if(!d){throw new Error('unknown instruction: 0x'+Number(b[a.ip]).toString(16))}d(a)}};function dT(a){let b=a.tZone=new Array(a.gZone.length);for(let a=0;a<b.length;a++)b[a]=new dP(0,0)}function dU(a,b){let c=a.prog,d=a.ip,e=1,f;do{f=c[++d];if(f===0x58)e++;else if(f===0x59)e--;else if(f===0x40)d+=c[d+1]+1;else if(f===0x41)d+=2*c[d+1]+1;else if(f>=0xB0&&f<=0xB7)d+=f-0xB0+1;else if(f>=0xB8&&f<=0xBF)d+=(f-0xB8+1)*2;else if(b&&e===1&&f===0x1B)break}while(e>0);a.ip=d}function dV(a,b){g.DEBUG&&console.log(b.step,'SVTCA['+a.axis+']');b.fv=b.pv=b.dpv=a}function dW(a,b){g.DEBUG&&console.log(b.step,'SPVTCA['+a.axis+']');b.pv=b.dpv=a}function dX(a,b){g.DEBUG&&console.log(b.step,'SFVTCA['+a.axis+']');b.fv=a}function dY(a,b){let c=b.stack,d=c.pop(),e=c.pop(),f=b.z2[d],h=b.z1[e];g.DEBUG&&console.log('SPVTL['+a+']',d,e);let i,j;a?(i=f.y-h.y,j=h.x-f.x):(i=h.x-f.x,j=h.y-f.y);b.pv=b.dpv=dO(i,j)}function dZ(a,b){let c=b.stack,d=c.pop(),e=c.pop(),f=b.z2[d],h=b.z1[e];g.DEBUG&&console.log('SFVTL['+a+']',d,e);let i,j;a?(i=f.y-h.y,j=h.x-f.x):(i=h.x-f.x,j=h.y-f.y);b.fv=dO(i,j)}function d_(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'SPVFS[]',c,d);a.pv=a.dpv=dO(d,c)}function d$(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'SPVFS[]',c,d);a.fv=dO(d,c)}function ea(a){let b=a.stack,c=a.pv;g.DEBUG&&console.log(a.step,'GPV[]');b.push(c.x*0x4000);b.push(c.y*0x4000)}function eb(a){let b=a.stack,c=a.fv;g.DEBUG&&console.log(a.step,'GFV[]');b.push(c.x*0x4000);b.push(c.y*0x4000)}function ec(a){a.fv=a.pv;g.DEBUG&&console.log(a.step,'SFVTPV[]')}function ed(a){let b=a.stack,c=b.pop(),d=b.pop(),e=b.pop(),f=b.pop(),h=b.pop(),i=a.z0,j=a.z1,k=i[c],l=i[d],m=j[e],n=j[f],o=a.z2[h];g.DEBUG&&console.log('ISECT[], ',c,d,e,f,h);let p=k.x,q=k.y,r=l.x,s=l.y,t=m.x,u=m.y,v=n.x,w=n.y,x=(p-r)*(u-w)-(q-s)*(t-v),y=p*s-q*r,z=t*w-u*v;o.x=(y*(t-v)-z*(p-r))/x;o.y=(y*(u-w)-z*(q-s))/x}function ee(a){a.rp0=a.stack.pop();g.DEBUG&&console.log(a.step,'SRP0[]',a.rp0)}function ef(a){a.rp1=a.stack.pop();g.DEBUG&&console.log(a.step,'SRP1[]',a.rp1)}function eg(a){a.rp2=a.stack.pop();g.DEBUG&&console.log(a.step,'SRP2[]',a.rp2)}function eh(a){let b=a.stack.pop();g.DEBUG&&console.log(a.step,'SZP0[]',b);a.zp0=b;switch(b){case 0:a.tZone||dT(a);a.z0=a.tZone;break;case 1:a.z0=a.gZone;break;default:throw new Error('Invalid zone pointer')}}function ei(a){let b=a.stack.pop();g.DEBUG&&console.log(a.step,'SZP1[]',b);a.zp1=b;switch(b){case 0:a.tZone||dT(a);a.z1=a.tZone;break;case 1:a.z1=a.gZone;break;default:throw new Error('Invalid zone pointer')}}function ej(a){let b=a.stack.pop();g.DEBUG&&console.log(a.step,'SZP2[]',b);a.zp2=b;switch(b){case 0:a.tZone||dT(a);a.z2=a.tZone;break;case 1:a.z2=a.gZone;break;default:throw new Error('Invalid zone pointer')}}function ek(a){let b=a.stack.pop();g.DEBUG&&console.log(a.step,'SZPS[]',b);a.zp0=a.zp1=a.zp2=b;switch(b){case 0:a.tZone||dT(a);a.z0=a.z1=a.z2=a.tZone;break;case 1:a.z0=a.z1=a.z2=a.gZone;break;default:throw new Error('Invalid zone pointer')}}function el(a){a.loop=a.stack.pop();g.DEBUG&&console.log(a.step,'SLOOP[]',a.loop)}function em(a){g.DEBUG&&console.log(a.step,'RTG[]');a.round=dF}function en(a){g.DEBUG&&console.log(a.step,'RTHG[]');a.round=dH}function eo(a){let b=a.stack.pop();g.DEBUG&&console.log(a.step,'SMD[]',b);a.minDis=b/0x40}function ep(a){g.DEBUG&&console.log(a.step,'ELSE[]');dU(a,!1)}function eq(a){let b=a.stack.pop();g.DEBUG&&console.log(a.step,'JMPR[]',b);a.ip+=b-1}function er(a){let b=a.stack.pop();g.DEBUG&&console.log(a.step,'SCVTCI[]',b);a.cvCutIn=b/0x40}function es(a){let b=a.stack;g.DEBUG&&console.log(a.step,'DUP[]');b.push(b[b.length-1])}function et(a){g.DEBUG&&console.log(a.step,'POP[]');a.stack.pop()}function eu(a){g.DEBUG&&console.log(a.step,'CLEAR[]');a.stack.length=0}function ev(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'SWAP[]');b.push(c);b.push(d)}function ew(a){let b=a.stack;g.DEBUG&&console.log(a.step,'DEPTH[]');b.push(b.length)}function ey(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'LOOPCALL[]',c,d);let e=a.ip,f=a.prog;a.prog=a.funcs[c];for(let b=0;b<d;b++)dA(a),g.DEBUG&&console.log(++a.step,b+1<d?'next loopcall':'done loopcall',b);a.ip=e;a.prog=f}function ez(a){let b=a.stack.pop();g.DEBUG&&console.log(a.step,'CALL[]',b);let c=a.ip,d=a.prog;a.prog=a.funcs[b];dA(a);a.ip=c;a.prog=d;g.DEBUG&&console.log(++a.step,'returning from',b)}function eA(a){let b=a.stack,c=b.pop();g.DEBUG&&console.log(a.step,'CINDEX[]',c);b.push(b[b.length-c])}function eB(a){let b=a.stack,c=b.pop();g.DEBUG&&console.log(a.step,'MINDEX[]',c);b.push(b.splice(b.length-c,1)[0])}function eC(a){if(a.env!=='fpgm')throw new Error('FDEF not allowed here');let b=a.stack,c=a.prog,d=a.ip,e=b.pop(),f=d;g.DEBUG&&console.log(a.step,'FDEF[]',e);while(c[++d]!==0x2D);;a.ip=d;a.funcs[e]=c.slice(f+1,d)}function eD(a,b){let c=b.stack.pop(),d=b.z0[c],e=b.fv,f=b.pv;g.DEBUG&&console.log(b.step,'MDAP['+a+']',c);let h=f.distance(d,dQ);a&&(h=b.round(h));e.setRelative(d,dQ,h,f);e.touch(d);b.rp0=b.rp1=c}function eE(a,b){let c=b.z2,d=c.length-2,e,f,h;g.DEBUG&&console.log(b.step,'IUP['+a.axis+']');for(let b=0;b<d;b++){e=c[b];if(a.touched(e))continue;f=e.prevTouched(a);if(f===e)continue;h=e.nextTouched(a);f===h&&a.setRelative(e,e,a.distance(f,f,!1,!0),a,!0);a.interpolate(e,f,h,a)}}function eF(a,b){let c=b.stack,d=a?b.rp1:b.rp2,e=(a?b.z0:b.z1)[d],f=b.fv,h=b.pv,i=b.loop,j=b.z2;while(i--){let d=c.pop(),k=j[d],l=h.distance(e,e,!1,!0);f.setRelative(k,k,l,h);f.touch(k);g.DEBUG&&console.log(b.step,(b.loop>1?'loop '+(b.loop-i)+': ':'')+'SHP['+(a?'rp1':'rp2')+']',d)}b.loop=1}function eG(a,b){let c=b.stack,d=a?b.rp1:b.rp2,e=(a?b.z0:b.z1)[d],f=b.fv,h=b.pv,i=c.pop(),j=b.z2[b.contours[i]],k=j;g.DEBUG&&console.log(b.step,'SHC['+a+']',i);let l=h.distance(e,e,!1,!0);do{k!==e&&f.setRelative(k,k,l,h),k=k.nextPointOnContour}while(k!==j)}function eH(a,b){let c=b.stack,d=a?b.rp1:b.rp2,e=(a?b.z0:b.z1)[d],f=b.fv,h=b.pv,i=c.pop();g.DEBUG&&console.log(b.step,'SHZ['+a+']',i);let j;switch(i){case 0:j=b.tZone;break;case 1:j=b.gZone;break;default:throw new Error('Invalid zone')};let k,l=h.distance(e,e,!1,!0),m=j.length-2;for(let a=0;a<m;a++)k=j[a],f.setRelative(k,k,l,h)}function eI(a){let b=a.stack,c=a.loop,d=a.fv,e=b.pop()/0x40,f=a.z2;while(c--){let h=b.pop(),i=f[h];g.DEBUG&&console.log(a.step,(a.loop>1?'loop '+(a.loop-c)+': ':'')+'SHPIX[]',h,e);d.setRelative(i,i,e);d.touch(i)}a.loop=1}function eJ(a){let b=a.stack,c=a.rp1,d=a.rp2,e=a.loop,f=a.z0[c],h=a.z1[d],i=a.fv,j=a.dpv,k=a.z2;while(e--){let l=b.pop(),m=k[l];g.DEBUG&&console.log(a.step,(a.loop>1?'loop '+(a.loop-e)+': ':'')+'IP[]',l,c,'<->',d);i.interpolate(m,f,h,j);i.touch(m)}a.loop=1}function eK(a,b){let c=b.stack,d=c.pop()/64,e=c.pop(),f=b.z1[e],h=b.z0[b.rp0],i=b.fv,j=b.pv;i.setRelative(f,h,d,j);i.touch(f);g.DEBUG&&console.log(b.step,'MSIRP['+a+']',d,e);b.rp1=b.rp0;b.rp2=e;a&&(b.rp0=e)}function eL(a){let b=a.stack,c=a.rp0,d=a.z0[c],e=a.loop,f=a.fv,h=a.pv,i=a.z1;while(e--){let c=b.pop(),j=i[c];g.DEBUG&&console.log(a.step,(a.loop>1?'loop '+(a.loop-e)+': ':'')+'ALIGNRP[]',c);f.setRelative(j,d,0,h);f.touch(j)}a.loop=1}function eM(a){g.DEBUG&&console.log(a.step,'RTDG[]');a.round=dG}function eN(a,b){let c=b.stack,d=c.pop(),e=c.pop(),f=b.z0[e],h=b.fv,i=b.pv,j=b.cvt[d];g.DEBUG&&console.log(b.step,'MIAP['+a+']',d,'(',j,')',e);let k=i.distance(f,dQ);a&&(Math.abs(k-j)<b.cvCutIn&&(k=j),k=b.round(k));h.setRelative(f,dQ,k,i);b.zp0===0&&(f.xo=f.x,f.yo=f.y);h.touch(f);b.rp0=b.rp1=e}function eO(a){let b=a.prog,c=a.ip,d=a.stack,e=b[++c];g.DEBUG&&console.log(a.step,'NPUSHB[]',e);for(let a=0;a<e;a++)d.push(b[++c]);a.ip=c}function eP(a){let b=a.ip,c=a.prog,d=a.stack,e=c[++b];g.DEBUG&&console.log(a.step,'NPUSHW[]',e);for(let a=0;a<e;a++){let f=c[++b]<<8|c[++b];f&0x8000&&(f=-((f^0xffff)+1));d.push(f)}a.ip=b}function eQ(a){let b=a.stack,c=a.store;c||(c=a.store=[]);let d=b.pop(),e=b.pop();g.DEBUG&&console.log(a.step,'WS',d,e);c[e]=d}function eR(a){let b=a.stack,c=a.store,d=b.pop();g.DEBUG&&console.log(a.step,'RS',d);let e=c&&c[d]||0;b.push(e)}function eS(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'WCVTP',c,d);a.cvt[d]=c/0x40}function eT(a){let b=a.stack,c=b.pop();g.DEBUG&&console.log(a.step,'RCVT',c);b.push(a.cvt[c]*0x40)}function eU(a,b){let c=b.stack,d=c.pop(),e=b.z2[d];g.DEBUG&&console.log(b.step,'GC['+a+']',d);c.push(b.dpv.distance(e,dQ,a,!1)*0x40)}function eV(a,b){let c=b.stack,d=c.pop(),e=c.pop(),f=b.z1[d],h=b.z0[e],i=b.dpv.distance(h,f,a,a);g.DEBUG&&console.log(b.step,'MD['+a+']',d,e,'->',i);b.stack.push(Math.round(i*64))}function eW(a){g.DEBUG&&console.log(a.step,'MPPEM[]');a.stack.push(a.ppem)}function eX(a){g.DEBUG&&console.log(a.step,'FLIPON[]');a.autoFlip=!0}function eY(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'LT[]',c,d);b.push(d<c?1:0)}function eZ(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'LTEQ[]',c,d);b.push(d<=c?1:0)}function e_(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'GT[]',c,d);b.push(d>c?1:0)}function e$(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'GTEQ[]',c,d);b.push(d>=c?1:0)}function fa(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'EQ[]',c,d);b.push(c===d?1:0)}function fb(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'NEQ[]',c,d);b.push(c!==d?1:0)}function fc(a){let b=a.stack,c=b.pop();g.DEBUG&&console.log(a.step,'ODD[]',c);b.push(Math.trunc(c)%2?1:0)}function fd(a){let b=a.stack,c=b.pop();g.DEBUG&&console.log(a.step,'EVEN[]',c);b.push(Math.trunc(c)%2?0:1)}function fe(a){let b=a.stack.pop();g.DEBUG&&console.log(a.step,'IF[]',b);b||(dU(a,!0),g.DEBUG&&console.log(a.step,'EIF[]'))}function ff(a){g.DEBUG&&console.log(a.step,'EIF[]')}function fg(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'AND[]',c,d);b.push(c&&d?1:0)}function fh(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'OR[]',c,d);b.push(c||d?1:0)}function fi(a){let b=a.stack,c=b.pop();g.DEBUG&&console.log(a.step,'NOT[]',c);b.push(c?0:1)}function fj(a,b){let c=b.stack,d=c.pop(),e=b.fv,f=b.pv,h=b.ppem,i=b.deltaBase+(a-1)*16,j=b.deltaShift,k=b.z0;g.DEBUG&&console.log(b.step,'DELTAP['+a+']',d,c);for(let a=0;a<d;a++){let l=c.pop(),m=c.pop(),n=i+((m&0xF0)>>4);if(n!==h)continue;let o=(m&0x0F)-8;o>=0&&o++;g.DEBUG&&console.log(b.step,'DELTAPFIX',l,'by',o*j);let p=k[l];e.setRelative(p,p,o*j,f)}}function fk(a){let b=a.stack,c=b.pop();g.DEBUG&&console.log(a.step,'SDB[]',c);a.deltaBase=c}function fl(a){let b=a.stack,c=b.pop();g.DEBUG&&console.log(a.step,'SDS[]',c);a.deltaShift=Math.pow(0.5,c)}function fm(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'ADD[]',c,d);b.push(d+c)}function fo(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'SUB[]',c,d);b.push(d-c)}function fp(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'DIV[]',c,d);b.push(d*64/c)}function fq(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'MUL[]',c,d);b.push(d*c/64)}function fr(a){let b=a.stack,c=b.pop();g.DEBUG&&console.log(a.step,'ABS[]',c);b.push(Math.abs(c))}function fs(a){let b=a.stack,c=b.pop();g.DEBUG&&console.log(a.step,'NEG[]',c);b.push(-c)}function ft(a){let b=a.stack,c=b.pop();g.DEBUG&&console.log(a.step,'FLOOR[]',c);b.push(Math.floor(c/0x40)*0x40)}function fu(a){let b=a.stack,c=b.pop();g.DEBUG&&console.log(a.step,'CEILING[]',c);b.push(Math.ceil(c/0x40)*0x40)}function fv(a,b){let c=b.stack,d=c.pop();g.DEBUG&&console.log(b.step,'ROUND[]');c.push(b.round(d/0x40)*0x40)}function fw(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'WCVTF[]',c,d);a.cvt[d]=c*a.ppem/a.font.unitsPerEm}function fx(a,b){let c=b.stack,d=c.pop(),e=b.ppem,f=b.deltaBase+(a-1)*16,h=b.deltaShift;g.DEBUG&&console.log(b.step,'DELTAC['+a+']',d,c);for(let a=0;a<d;a++){let i=c.pop(),j=c.pop(),k=f+((j&0xF0)>>4);if(k!==e)continue;let l=(j&0x0F)-8;l>=0&&l++;let m=l*h;g.DEBUG&&console.log(b.step,'DELTACFIX',i,'by',m);b.cvt[i]+=m}}function fy(a){let b=a.stack.pop();g.DEBUG&&console.log(a.step,'SROUND[]',b);a.round=dK;let c;switch(b&0xC0){case 0x00:c=0.5;break;case 0x40:c=1;break;case 0x80:c=2;break;default:throw new Error('invalid SROUND value')};a.srPeriod=c;switch(b&0x30){case 0x00:a.srPhase=0;break;case 0x10:a.srPhase=0.25*c;break;case 0x20:a.srPhase=0.5*c;break;case 0x30:a.srPhase=0.75*c;break;default:throw new Error('invalid SROUND value')};b&=0x0F;b===0?(a.srThreshold=0):(a.srThreshold=(b/8-0.5)*c)}function fz(a){let b=a.stack.pop();g.DEBUG&&console.log(a.step,'S45ROUND[]',b);a.round=dK;let c;switch(b&0xC0){case 0x00:c=Math.sqrt(2)/2;break;case 0x40:c=Math.sqrt(2);break;case 0x80:c=2*Math.sqrt(2);break;default:throw new Error('invalid S45ROUND value')};a.srPeriod=c;switch(b&0x30){case 0x00:a.srPhase=0;break;case 0x10:a.srPhase=0.25*c;break;case 0x20:a.srPhase=0.5*c;break;case 0x30:a.srPhase=0.75*c;break;default:throw new Error('invalid S45ROUND value')};b&=0x0F;b===0?(a.srThreshold=0):(a.srThreshold=(b/8-0.5)*c)}function fA(a){g.DEBUG&&console.log(a.step,'ROFF[]');a.round=dE}function fB(a){g.DEBUG&&console.log(a.step,'RUTG[]');a.round=dI}function fC(a){g.DEBUG&&console.log(a.step,'RDTG[]');a.round=dJ}function fD(a){let b=a.stack.pop();g.DEBUG&&console.log(a.step,'SCANCTRL[]',b)}function fE(a,b){let c=b.stack,d=c.pop(),e=c.pop(),f=b.z2[d],h=b.z1[e];g.DEBUG&&console.log(b.step,'SDPVTL['+a+']',d,e);let i,j;a?(i=f.y-h.y,j=h.x-f.x):(i=h.x-f.x,j=h.y-f.y);b.dpv=dO(i,j)}function fF(a){let b=a.stack,c=b.pop(),d=0;g.DEBUG&&console.log(a.step,'GETINFO[]',c);c&0x01&&(d=35);c&0x20&&(d|=0x1000);b.push(d)}function fG(a){let b=a.stack,c=b.pop(),d=b.pop(),e=b.pop();g.DEBUG&&console.log(a.step,'ROLL[]');b.push(d);b.push(c);b.push(e)}function fH(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'MAX[]',c,d);b.push(Math.max(d,c))}function fI(a){let b=a.stack,c=b.pop(),d=b.pop();g.DEBUG&&console.log(a.step,'MIN[]',c,d);b.push(Math.min(d,c))}function fJ(a){let b=a.stack.pop();g.DEBUG&&console.log(a.step,'SCANTYPE[]',b)}function fK(a){let b=a.stack.pop(),c=a.stack.pop();g.DEBUG&&console.log(a.step,'INSTCTRL[]',b,c);switch(b){case 1:a.inhibitGridFit=!!c;return;case 2:a.ignoreCvt=!!c;return;default:throw new Error('invalid INSTCTRL[] selector')}}function fL(a,b){let c=b.stack,d=b.prog,e=b.ip;g.DEBUG&&console.log(b.step,'PUSHB['+a+']');for(let b=0;b<a;b++)c.push(d[++e]);b.ip=e}function fM(a,b){let c=b.ip,d=b.prog,e=b.stack;g.DEBUG&&console.log(b.ip,'PUSHW['+a+']');for(let b=0;b<a;b++){let f=d[++c]<<8|d[++c];f&0x8000&&(f=-((f^0xffff)+1));e.push(f)}b.ip=c}function fN(a,b,c,d,e,f){let h=f.stack,i=a&&h.pop(),j=h.pop(),k=f.rp0,l=f.z0[k],m=f.z1[j],n=f.minDis,o=f.fv,p=f.dpv,q,r,s,t;r=q=p.distance(m,l,!0,!0);s=r>=0?1:-1;r=Math.abs(r);a&&(t=f.cvt[i],d&&Math.abs(r-t)<f.cvCutIn&&(r=t));c&&r<n&&(r=n);d&&(r=f.round(r));o.setRelative(m,l,s*r,p);o.touch(m);g.DEBUG&&console.log(f.step,(a?'MIRP[':'MDRP[')+(b?'M':'m')+(c?'>':'_')+(d?'R':'_')+(e===0?'Gr':(e===1?'Bl':(e===2?'Wh':'')))+']',a?i+'('+f.cvt[i]+','+t+')':'',j,'(d =',q,'->',s*r,')');f.rp1=f.rp0;f.rp2=j;b&&(f.rp0=j)}dz=[dV.bind(undefined,dM),dV.bind(undefined,dL),dW.bind(undefined,dM),dW.bind(undefined,dL),dX.bind(undefined,dM),dX.bind(undefined,dL),dY.bind(undefined,0),dY.bind(undefined,1),dZ.bind(undefined,0),dZ.bind(undefined,1),d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,undefined,undefined,es,et,eu,ev,ew,eA,eB,undefined,undefined,undefined,ey,ez,eC,undefined,eD.bind(undefined,0),eD.bind(undefined,1),eE.bind(undefined,dM),eE.bind(undefined,dL),eF.bind(undefined,0),eF.bind(undefined,1),eG.bind(undefined,0),eG.bind(undefined,1),eH.bind(undefined,0),eH.bind(undefined,1),eI,eJ,eK.bind(undefined,0),eK.bind(undefined,1),eL,eM,eN.bind(undefined,0),eN.bind(undefined,1),eO,eP,eQ,eR,eS,eT,eU.bind(undefined,0),eU.bind(undefined,1),undefined,eV.bind(undefined,0),eV.bind(undefined,1),eW,undefined,eX,undefined,undefined,eY,eZ,e_,e$,fa,fb,fc,fd,fe,ff,fg,fh,fi,fj.bind(undefined,1),fk,fl,fm,fo,fp,fq,fr,fs,ft,fu,fv.bind(undefined,0),fv.bind(undefined,1),fv.bind(undefined,2),fv.bind(undefined,3),undefined,undefined,undefined,undefined,fw,fj.bind(undefined,2),fj.bind(undefined,3),fx.bind(undefined,1),fx.bind(undefined,2),fx.bind(undefined,3),fy,fz,undefined,undefined,fA,undefined,fB,fC,et,et,undefined,undefined,undefined,undefined,undefined,fD,fE.bind(undefined,0),fE.bind(undefined,1),fF,undefined,fG,fH,fI,fJ,fK,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,fL.bind(undefined,1),fL.bind(undefined,2),fL.bind(undefined,3),fL.bind(undefined,4),fL.bind(undefined,5),fL.bind(undefined,6),fL.bind(undefined,7),fL.bind(undefined,8),fM.bind(undefined,1),fM.bind(undefined,2),fM.bind(undefined,3),fM.bind(undefined,4),fM.bind(undefined,5),fM.bind(undefined,6),fM.bind(undefined,7),fM.bind(undefined,8),fN.bind(undefined,0,0,0,0,0),fN.bind(undefined,0,0,0,0,1),fN.bind(undefined,0,0,0,0,2),fN.bind(undefined,0,0,0,0,3),fN.bind(undefined,0,0,0,1,0),fN.bind(undefined,0,0,0,1,1),fN.bind(undefined,0,0,0,1,2),fN.bind(undefined,0,0,0,1,3),fN.bind(undefined,0,0,1,0,0),fN.bind(undefined,0,0,1,0,1),fN.bind(undefined,0,0,1,0,2),fN.bind(undefined,0,0,1,0,3),fN.bind(undefined,0,0,1,1,0),fN.bind(undefined,0,0,1,1,1),fN.bind(undefined,0,0,1,1,2),fN.bind(undefined,0,0,1,1,3),fN.bind(undefined,0,1,0,0,0),fN.bind(undefined,0,1,0,0,1),fN.bind(undefined,0,1,0,0,2),fN.bind(undefined,0,1,0,0,3),fN.bind(undefined,0,1,0,1,0),fN.bind(undefined,0,1,0,1,1),fN.bind(undefined,0,1,0,1,2),fN.bind(undefined,0,1,0,1,3),fN.bind(undefined,0,1,1,0,0),fN.bind(undefined,0,1,1,0,1),fN.bind(undefined,0,1,1,0,2),fN.bind(undefined,0,1,1,0,3),fN.bind(undefined,0,1,1,1,0),fN.bind(undefined,0,1,1,1,1),fN.bind(undefined,0,1,1,1,2),fN.bind(undefined,0,1,1,1,3),fN.bind(undefined,1,0,0,0,0),fN.bind(undefined,1,0,0,0,1),fN.bind(undefined,1,0,0,0,2),fN.bind(undefined,1,0,0,0,3),fN.bind(undefined,1,0,0,1,0),fN.bind(undefined,1,0,0,1,1),fN.bind(undefined,1,0,0,1,2),fN.bind(undefined,1,0,0,1,3),fN.bind(undefined,1,0,1,0,0),fN.bind(undefined,1,0,1,0,1),fN.bind(undefined,1,0,1,0,2),fN.bind(undefined,1,0,1,0,3),fN.bind(undefined,1,0,1,1,0),fN.bind(undefined,1,0,1,1,1),fN.bind(undefined,1,0,1,1,2),fN.bind(undefined,1,0,1,1,3),fN.bind(undefined,1,1,0,0,0),fN.bind(undefined,1,1,0,0,1),fN.bind(undefined,1,1,0,0,2),fN.bind(undefined,1,1,0,0,3),fN.bind(undefined,1,1,0,1,0),fN.bind(undefined,1,1,0,1,1),fN.bind(undefined,1,1,0,1,2),fN.bind(undefined,1,1,0,1,3),fN.bind(undefined,1,1,1,0,0),fN.bind(undefined,1,1,1,0,1),fN.bind(undefined,1,1,1,0,2),fN.bind(undefined,1,1,1,0,3),fN.bind(undefined,1,1,1,1,0),fN.bind(undefined,1,1,1,1,1),fN.bind(undefined,1,1,1,1,2),fN.bind(undefined,1,1,1,1,3)];function fO(a){this.char=a;this.state={};this.activeState=null}function fP(a,b,c){this.contextName=c;this.startIndex=a;this.endOffset=b}function fQ(a,b,c){this.contextName=a;this.openRange=null;this.ranges=[];this.checkStart=b;this.checkEnd=c}function fR(a,b){this.context=a;this.index=b;this.length=a.length;this.current=a[b];this.backtrack=a.slice(0,b);this.lookahead=a.slice(b+1)}function fS(a){this.eventId=a;this.subscribers=[]}function fT(a){let b=['start','end','next','newToken','contextStart','contextEnd','insertToken','removeToken','removeRange','replaceToken','replaceRange','composeRUD','updateContextsRanges'];b.forEach(a=>{Object.defineProperty(this.events,a,{value:new fS(a)})});!a||b.forEach(b=>{let c=a[b];typeof c==='function'&&this.events[b].subscribe(c)});let c=['insertToken','removeToken','removeRange','replaceToken','replaceRange','composeRUD'];c.forEach(a=>{this.events[a].subscribe(this.updateContextsRanges)})}function fU(a){this.tokens=[];this.registeredContexts={};this.contextCheckers=[];this.events={};this.registeredModifiers=[];fT.call(this,a)}fO.prototype.setState=function(a,b){this.state[a]=b;this.activeState={key:a,value:this.state[a]};return this.activeState};fO.prototype.getState=function(a){return this.state[a]||null};fU.prototype.inboundIndex=function(a){return a>=0&&a<this.tokens.length};fU.prototype.composeRUD=function(a){let b=!0,c=a.map(a=>(this[a[0]].apply(this,a.slice(1).concat(b)))),d=a=>typeof a==='object'&&a.hasOwnProperty('FAIL');if(c.every(d)){return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:c.filter(d)}}this.dispatch('composeRUD',[c.filter(a=>!d(a))])};fU.prototype.replaceRange=function(a,b,c,d){b=b!==null?b:this.tokens.length;let e=c.every(a=>a instanceof fO);if(!isNaN(a)&&this.inboundIndex(a)&&e){let e=this.tokens.splice.apply(this.tokens,[a,b].concat(c));d||this.dispatch('replaceToken',[a,b,c]);return[e,c]}else{return{FAIL:'replaceRange: invalid tokens or startIndex.'}}};fU.prototype.replaceToken=function(a,b,c){if(!isNaN(a)&&this.inboundIndex(a)&&b instanceof fO){let d=this.tokens.splice(a,1,b);c||this.dispatch('replaceToken',[a,b]);return[d[0],b]}else{return{FAIL:'replaceToken: invalid token or index.'}}};fU.prototype.removeRange=function(a,b,c){b=!isNaN(b)?b:this.tokens.length;let d=this.tokens.splice(a,b);c||this.dispatch('removeRange',[d,a,b]);return d};fU.prototype.removeToken=function(a,b){if(!isNaN(a)&&this.inboundIndex(a)){let c=this.tokens.splice(a,1);b||this.dispatch('removeToken',[c,a]);return c}else{return{FAIL:'removeToken: invalid token index.'}}};fU.prototype.insertToken=function(a,b,c){let d=a.every(a=>a instanceof fO);if(d){this.tokens.splice.apply(this.tokens,[b,0].concat(a));c||this.dispatch('insertToken',[a,b]);return a}else{return{FAIL:'insertToken: invalid token(s).'}}};fU.prototype.registerModifier=function(a,b,c){this.events.newToken.subscribe(function(d,e){let f=[d,e],g=b===null||b.apply(this,f)===!0,h=[d,e];if(g){let b=c.apply(this,h);d.setState(a,b)}});this.registeredModifiers.push(a)};fS.prototype.subscribe=function(a){if(typeof a==='function'){return(this.subscribers.push(a))-1}else{return{FAIL:`invalid '${this.eventId}' event handler`}}};fS.prototype.unsubscribe=function(a){this.subscribers.splice(a,1)};fR.prototype.setCurrentIndex=function(a){this.index=a;this.current=this.context[a];this.backtrack=this.context.slice(0,a);this.lookahead=this.context.slice(a+1)};fR.prototype.get=function(a){switch(!0){case a===0:return this.current;case a<0&&Math.abs(a)<=this.backtrack.length:return this.backtrack.slice(a)[0];case a>0&&a<=this.lookahead.length:return this.lookahead[a-1];default:return null}};fU.prototype.rangeToText=function(a){if(a instanceof fP){return(this.getRangeTokens(a).map(a=>a.char).join(''))}};fU.prototype.getText=function(){return this.tokens.map(a=>a.char).join('')};fU.prototype.getContext=function(a){let b=this.registeredContexts[a];return!!b?b:null};fU.prototype.on=function(a,b){let c=this.events[a];if(!!c){return c.subscribe(b)}else{return null}};fU.prototype.dispatch=function(a,b){let c=this.events[a];c instanceof fS&&c.subscribers.forEach(a=>{a.apply(this,b||[])})};fU.prototype.registerContextChecker=function(a,b,c){if(!!this.getContext(a))return{FAIL:`context name '${a}' is already registered.`};if(typeof b!=='function')return{FAIL:"missing context start check."};if(typeof c!=='function')return{FAIL:"missing context end check."};let d=new fQ(a,b,c);this.registeredContexts[a]=d;this.contextCheckers.push(d);return d};fU.prototype.getRangeTokens=function(a){let b=a.startIndex+a.endOffset;return[].concat(this.tokens.slice(a.startIndex,b))};fU.prototype.getContextRanges=function(a){let b=this.getContext(a);if(!!b){return b.ranges}else{return{FAIL:`context checker '${a}' is not registered.`}}};fU.prototype.resetContextsRanges=function(){let a=this.registeredContexts;for(const b in a){if(a.hasOwnProperty(b)){let c=a[b];c.ranges=[]}}};fU.prototype.updateContextsRanges=function(){this.resetContextsRanges();let a=this.tokens.map(a=>a.char);for(let b=0;b<a.length;b++){let c=new fR(a,b);this.runContextCheck(c)}this.dispatch('updateContextsRanges',[this.registeredContexts])};fU.prototype.setEndOffset=function(a,b){let c=this.getContext(b).openRange.startIndex,d=new fP(c,a,b),e=this.getContext(b).ranges;d.rangeId=`${b}.${e.length}`;e.push(d);this.getContext(b).openRange=null;return d};fU.prototype.runContextCheck=function(a){let b=a.index;this.contextCheckers.forEach(c=>{let d=c.contextName,e=this.getContext(d).openRange;!e&&c.checkStart(a)&&(e=new fP(b,null,d),this.getContext(d).openRange=e,this.dispatch('contextStart',[d,b]));if(!!e&&c.checkEnd(a)){let a=b-e.startIndex+1,c=this.setEndOffset(a,d);this.dispatch('contextEnd',[d,c])}})};fU.prototype.tokenize=function(a){this.tokens=[];this.resetContextsRanges();let b=Array.from(a);this.dispatch('start');for(let a=0;a<b.length;a++){let c=b[a],d=new fR(b,a);this.dispatch('next',[d]);this.runContextCheck(d);let e=new fO(c);this.tokens.push(e);this.dispatch('newToken',[e,d])}this.dispatch('end',[this.tokens]);return this.tokens};function fV(a){return /[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(a)}function fW(a){return /[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(a)}function fX(a){return /[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(a)}function fY(a){return /[A-z]/.test(a)}function fZ(a){return /\s/.test(a)}function f_(a){this.font=a;this.features={}}function f$(a){this.id=a.id;this.tag=a.tag;this.substitution=a.substitution}function ga(a,b){if(!a)return-1;switch(b.format){case 1:return b.glyphs.indexOf(a);case 2:let c=b.ranges;for(let b=0;b<c.length;b++){let d=c[b];if(a>=d.start&&a<=d.end){let b=a-d.start;return d.index+b}};break;default:return-1};return-1}function gb(a,b){let c=ga(a,b.coverage);if(c===-1)return null;return a+b.deltaGlyphId}function gc(a,b){let c=ga(a,b.coverage);if(c===-1)return null;return b.substitute[c]}function gd(a,b){let c=[];for(let d=0;d<a.length;d++){let e=a[d],f=b.current;f=Array.isArray(f)?f[0]:f;let g=ga(f,e);g!==-1&&c.push(g)}if(c.length!==a.length)return-1;return c}function ge(a,b){let c=b.inputCoverage.length+b.lookaheadCoverage.length+b.backtrackCoverage.length;if(a.context.length<c)return[];let d=gd(b.inputCoverage,a);if(d===-1)return[];let e=b.inputCoverage.length-1;if(a.lookahead.length<b.lookaheadCoverage.length)return[];let f=a.lookahead.slice(e);while(f.length&&fX(f[0].char))f.shift();let g=new fR(f,0),h=gd(b.lookaheadCoverage,g),i=[].concat(a.backtrack);i.reverse();while(i.length&&fX(i[0].char))i.shift();if(i.length<b.backtrackCoverage.length)return[];let j=new fR(i,0),k=gd(b.backtrackCoverage,j),l=d.length===b.inputCoverage.length&&h.length===b.lookaheadCoverage.length&&k.length===b.backtrackCoverage.length,m=[];if(l){for(let c=0;c<b.lookupRecords.length;c++){let e=b.lookupRecords[c],f=e.lookupListIndex,g=this.getLookupByIndex(f);for(let b=0;b<g.subtables.length;b++){let c=g.subtables[b],e=this.getLookupMethod(g,c),f=this.getSubstitutionType(g,c);if(f==='12'){for(let b=0;b<d.length;b++){let c=a.get(b),f=e(c);f&&m.push(f)}}}}}return m}function gf(a,b){let c=a.current,d=ga(c,b.coverage);if(d===-1)return null;let e,f=b.ligatureSets[d];for(let b=0;b<f.length;b++){e=f[b];for(let b=0;b<e.components.length;b++){let c=a.lookahead[b],d=e.components[b];if(c!==d)break;if(b===e.components.length-1)return e}}return null}function gg(a,b){let c=ga(a,b.coverage);if(c===-1)return null;return b.sequences[c]}f_.prototype.getDefaultScriptFeaturesIndexes=function(){let a=this.font.tables.gsub.scripts;for(let b=0;b<a.length;b++){let c=a[b];if(c.tag==='DFLT')return c.script.defaultLangSys.featureIndexes}return[]};f_.prototype.getScriptFeaturesIndexes=function(a){let b=this.font.tables;if(!b.gsub)return[];if(!a)return this.getDefaultScriptFeaturesIndexes();let c=this.font.tables.gsub.scripts;for(let b=0;b<c.length;b++){let d=c[b];if(d.tag===a&&d.script.defaultLangSys){return d.script.defaultLangSys.featureIndexes}else{let b=d.langSysRecords;if(!!b){for(let c=0;c<b.length;c++){let d=b[c];if(d.tag===a){let a=d.langSys;return a.featureIndexes}}}}}return this.getDefaultScriptFeaturesIndexes()};f_.prototype.mapTagsToFeatures=function(a,b){let c={};for(let b=0;b<a.length;b++){let d=a[b].tag,e=a[b].feature;c[d]=e}this.features[b].tags=c};f_.prototype.getScriptFeatures=function(a){let b=this.features[a];if(this.features.hasOwnProperty(a))return b;let c=this.getScriptFeaturesIndexes(a);if(!c)return null;let d=this.font.tables.gsub;b=c.map(a=>d.features[a]);this.features[a]=b;this.mapTagsToFeatures(b,a);return b};f_.prototype.getSubstitutionType=function(a,b){let c=a.lookupType.toString(),d=b.substFormat.toString();return c+d};f_.prototype.getLookupMethod=function(a,b){let c=this.getSubstitutionType(a,b);switch(c){case '11':return a=>gb.apply(this,[a,b]);case '12':return a=>gc.apply(this,[a,b]);case '63':return a=>ge.apply(this,[a,b]);case '41':return a=>gf.apply(this,[a,b]);case '21':return a=>gg.apply(this,[a,b]);default:throw new Error(`lookupType: ${a.lookupType} - `+`substFormat: ${b.substFormat} `+"is not yet supported")}};f_.prototype.lookupFeature=function(a){let b=a.contextParams,c=b.index,d=this.getFeature({tag:a.tag,script:a.script});if(!d)return new Error(`font '${this.font.names.fullName.en}' `+`doesn't support feature '${a.tag}' `+`for script '${a.script}'.`);let e=this.getFeatureLookups(d),f=[].concat(b.context);for(let d=0;d<e.length;d++){let g=e[d],h=this.getLookupSubtables(g);for(let d=0;d<h.length;d++){let e=h[d],i=this.getSubstitutionType(g,e),j=this.getLookupMethod(g,e),k;switch(i){case '11':k=j(b.current);k&&f.splice(c,1,new f$({id:11,tag:a.tag,substitution:k}));break;case '12':k=j(b.current);k&&f.splice(c,1,new f$({id:12,tag:a.tag,substitution:k}));break;case '63':k=j(b);Array.isArray(k)&&k.length&&f.splice(c,1,new f$({id:63,tag:a.tag,substitution:k}));break;case '41':k=j(b);k&&f.splice(c,1,new f$({id:41,tag:a.tag,substitution:k}));break;case '21':k=j(b.current);k&&f.splice(c,1,new f$({id:21,tag:a.tag,substitution:k}));break};b=new fR(f,c);if(Array.isArray(k)&&!k.length)continue;k=null}}return f.length?f:null};f_.prototype.supports=function(a){if(!a.script)return !1;this.getScriptFeatures(a.script);let b=this.features.hasOwnProperty(a.script);if(!a.tag)return b;let c=(this.features[a.script].some(b=>b.tag===a.tag));return b&&c};f_.prototype.getLookupSubtables=function(a){return a.subtables||null};f_.prototype.getLookupByIndex=function(a){let b=this.font.tables.gsub.lookups;return b[a]||null};f_.prototype.getFeatureLookups=function(a){return a.lookupListIndexes.map(this.getLookupByIndex.bind(this))};f_.prototype.getFeature=function b(a){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(a.script)||this.getScriptFeatures(a.script);let c=this.features[a.script];if(!c)return({FAIL:`No feature for script ${a.script}`});if(!c.tags[a.tag])return null;return this.features[a.script].tags[a.tag]};function gh(a){let b=a.current,c=a.get(-1);return c===null&&fV(b)||!fV(c)&&fV(b)}function gi(a){let b=a.get(1);return b===null||!fV(b)}var gj={startCheck:gh,endCheck:gi};function gk(a){let b=a.current,c=a.get(-1);return(fV(b)||fX(b))&&!fV(c)}function gl(a){let b=a.get(1);switch(!0){case b===null:return !0;case !fV(b)&&!fX(b):const c=fZ(b);if(!c)return !0;if(c){let b=!1;b=(a.lookahead.some(a=>fV(a)||fX(a)));if(!b)return !0};break;default:return !1}}var gm={startCheck:gk,endCheck:gl};function gn(a,b,c){b[c].setState(a.tag,a.substitution)}function go(a,b,c){b[c].setState(a.tag,a.substitution)}function gp(a,b,c){a.substitution.forEach((d,e)=>{let f=b[c+e];f.setState(a.tag,d)})}function gq(a,b,c){let d=b[c];d.setState(a.tag,a.substitution.ligGlyph);let e=a.substitution.components.length;for(let a=0;a<e;a++)d=b[c+a+1],d.setState('deleted',!0)}let gr={11:gn,12:go,63:gp,41:gq};function gs(a,b,c){a instanceof f$&&gr[a.id](a,b,c)}function gt(a){let b=[].concat(a.backtrack);for(let a=b.length-1;a>=0;a--){let c=b[a],d=fW(c),e=fX(c);if(!d&&!e)return !0;if(d)return !1}return !1}function gu(a){if(fW(a.current))return !1;for(let b=0;b<a.lookahead.length;b++){let c=a.lookahead[b],d=fX(c);if(!d)return !0}return !1}function gv(a){let b='arab',c=this.featuresTags[b],d=this.tokenizer.getRangeTokens(a);if(d.length===1)return;let e=new fR(d.map(a=>a.getState('glyphIndex')),0),f=new fR(d.map(a=>a.char),0);d.forEach((a,g)=>{if(fX(a.char))return;e.setCurrentIndex(g);f.setCurrentIndex(g);let h=0;gt(f)&&(h|=1);gu(f)&&(h|=2);let i;switch(h){case 1:i='fina';break;case 2:i='init';break;case 3:i='medi';break};if(c.indexOf(i)===-1)return;let j=this.query.lookupFeature({tag:i,script:b,contextParams:e});if(j instanceof Error)return console.info(j.message);j.forEach((a,b)=>{a instanceof f$&&(gs(a,d,b),e.context[b]=a.substitution)})})}function gw(a,b){let c=a.map(a=>a.activeState.value);return new fR(c,b||0)}function gx(a){let b='arab',c=this.tokenizer.getRangeTokens(a),d=gw(c);d.context.forEach((a,e)=>{d.setCurrentIndex(e);let f=this.query.lookupFeature({tag:'rlig',script:b,contextParams:d});f.length&&(f.forEach(a=>gs(a,c,e)),d=gw(c))})}function gy(a){let b=a.current,c=a.get(-1);return c===null&&fY(b)||!fY(c)&&fY(b)}function gz(a){let b=a.get(1);return b===null||!fY(b)}var gA={startCheck:gy,endCheck:gz};function gB(a,b){let c=a.map(a=>a.activeState.value);return new fR(c,b||0)}function gC(a){let b='latn',c=this.tokenizer.getRangeTokens(a),d=gB(c);d.context.forEach((a,e)=>{d.setCurrentIndex(e);let f=this.query.lookupFeature({tag:'liga',script:b,contextParams:d});f.length&&(f.forEach(a=>gs(a,c,e)),d=gB(c))})}function gD(a){this.baseDir=a||'ltr';this.tokenizer=new fU();this.featuresTags={}}gD.prototype.setText=function(a){this.text=a};gD.prototype.contextChecks=({latinWordCheck:gA,arabicWordCheck:gj,arabicSentenceCheck:gm});function gE(a){let b=this.contextChecks[`${a}Check`];return this.tokenizer.registerContextChecker(a,b.startCheck,b.endCheck)}function gF(){gE.call(this,'latinWord');gE.call(this,'arabicWord');gE.call(this,'arabicSentence');return this.tokenizer.tokenize(this.text)}function gG(){let a=this.tokenizer.getContextRanges('arabicSentence');a.forEach(a=>{let b=this.tokenizer.getRangeTokens(a);this.tokenizer.replaceRange(a.startIndex,a.endOffset,b.reverse())})}gD.prototype.registerFeatures=function(a,b){let c=b.filter(b=>this.query.supports({script:a,tag:b}));this.featuresTags.hasOwnProperty(a)?(this.featuresTags[a]=this.featuresTags[a].concat(c)):(this.featuresTags[a]=c)};gD.prototype.applyFeatures=function(a,b){if(!a)throw new Error('No valid font was provided to apply features');this.query||(this.query=new f_(a));for(let a=0;a<b.length;a++){let c=b[a];if(!this.query.supports({script:c.script}))continue;this.registerFeatures(c.script,c.tags)}};gD.prototype.registerModifier=function(a,b,c){this.tokenizer.registerModifier(a,b,c)};function gH(){if(this.tokenizer.registeredModifiers.indexOf('glyphIndex')===-1){throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}}function gI(){let a='arab';if(!this.featuresTags.hasOwnProperty(a))return;gH.call(this);let b=this.tokenizer.getContextRanges('arabicWord');b.forEach(a=>{gv.call(this,a)})}function gJ(){let a='arab';if(!this.featuresTags.hasOwnProperty(a))return;let b=this.featuresTags[a];if(b.indexOf('rlig')===-1)return;gH.call(this);let c=this.tokenizer.getContextRanges('arabicWord');c.forEach(a=>{gx.call(this,a)})}function gK(){let a='latn';if(!this.featuresTags.hasOwnProperty(a))return;let b=this.featuresTags[a];if(b.indexOf('liga')===-1)return;gH.call(this);let c=this.tokenizer.getContextRanges('latinWord');c.forEach(a=>{gC.call(this,a)})}gD.prototype.checkContextReady=function(a){return!!this.tokenizer.getContext(a)};gD.prototype.applyFeaturesToContexts=function(){this.checkContextReady('arabicWord')&&(gI.call(this),gJ.call(this));this.checkContextReady('latinWord')&&gK.call(this);this.checkContextReady('arabicSentence')&&gG.call(this)};gD.prototype.processText=function(a){(!this.text||this.text!==a)&&(this.setText(a),gF.call(this),this.applyFeaturesToContexts())};gD.prototype.getBidiText=function(a){this.processText(a);return this.tokenizer.getText()};gD.prototype.getTextGlyphs=function(a){this.processText(a);let b=[];for(let a=0;a<this.tokenizer.tokens.length;a++){let c=this.tokenizer.tokens[a];if(c.state.deleted)continue;let d=c.activeState.value;b.push(Array.isArray(d)?d[0]:d)}return b};function gL(a){a=a||{};a.empty||(dm(a.familyName,'When creating a new Font object, familyName is required.'),dm(a.styleName,'When creating a new Font object, styleName is required.'),dm(a.unitsPerEm,'When creating a new Font object, unitsPerEm is required.'),dm(a.ascender,'When creating a new Font object, ascender is required.'),dm(a.descender,'When creating a new Font object, descender is required.'),dm(a.descender<0,'Descender should be negative (e.g. -512).'),this.names={fontFamily:{en:a.familyName||' '},fontSubfamily:{en:a.styleName||' '},fullName:{en:a.fullName||a.familyName+' '+a.styleName},postScriptName:{en:a.postScriptName||(a.familyName+a.styleName).replace(/\s/g,'')},designer:{en:a.designer||' '},designerURL:{en:a.designerURL||' '},manufacturer:{en:a.manufacturer||' '},manufacturerURL:{en:a.manufacturerURL||' '},license:{en:a.license||' '},licenseURL:{en:a.licenseURL||' '},version:{en:a.version||'Version 0.1'},description:{en:a.description||' '},copyright:{en:a.copyright||' '},trademark:{en:a.trademark||' '}},this.unitsPerEm=a.unitsPerEm||1000,this.ascender=a.ascender,this.descender=a.descender,this.createdTimestamp=a.createdTimestamp,this.tables={os2:{usWeightClass:a.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:a.widthClass||this.usWidthClasses.MEDIUM,fsSelection:a.fsSelection||this.fsSelectionValues.REGULAR}});this.supported=!0;this.glyphs=new bo.GlyphSet(this,a.glyphs||[]);this.encoding=new a_(this);this.position=new df(this);this.substitution=new dg(this);this.tables=this.tables||{};this._push=null;this._hmtxTableData={};Object.defineProperty(this,'hinting',{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==='truetype'){return this._hinting=new dD(this)}}})}gL.prototype.hasChar=function(a){return this.encoding.charToGlyphIndex(a)!==null};gL.prototype.charToGlyphIndex=function(a){return this.encoding.charToGlyphIndex(a)};gL.prototype.charToGlyph=function(a){let b=this.charToGlyphIndex(a),c=this.glyphs.get(b);c||(c=this.glyphs.get(0));return c};gL.prototype.updateFeatures=function(a){return this.defaultRenderOptions.features.map(b=>{if(b.script==='latn'){return{script:'latn',tags:b.tags.filter(b=>a[b])}}else{return b}})};gL.prototype.stringToGlyphs=function(a,b){let c=new gD(),d=a=>this.charToGlyphIndex(a.char);c.registerModifier('glyphIndex',null,d);let e=b?this.updateFeatures(b.features):this.defaultRenderOptions.features;c.applyFeatures(this,e);let f=c.getTextGlyphs(a),g=f.length,h=new Array(g),i=this.glyphs.get(0);for(let a=0;a<g;a+=1)h[a]=this.glyphs.get(f[a])||i;return h};gL.prototype.nameToGlyphIndex=function(a){return this.glyphNames.nameToGlyphIndex(a)};gL.prototype.nameToGlyph=function(a){let b=this.nameToGlyphIndex(a),c=this.glyphs.get(b);c||(c=this.glyphs.get(0));return c};gL.prototype.glyphIndexToName=function(a){if(!this.glyphNames.glyphIndexToName){return''}return this.glyphNames.glyphIndexToName(a)};gL.prototype.getKerningValue=function(a,b){a=a.index||a;b=b.index||b;let c=this.position.defaultKerningTables;if(c){return this.position.getKerningValue(c,a,b)}return this.kerningPairs[a+','+b]||0};gL.prototype.defaultRenderOptions={kerning:!0,features:[{script:'arab',tags:['init','medi','fina','rlig']},{script:'latn',tags:['liga','rlig']}]};gL.prototype.forEachGlyph=function(a,b,c,d,e,f){b=b!==undefined?b:0;c=c!==undefined?c:0;d=d!==undefined?d:72;e=e||this.defaultRenderOptions;let g=1/this.unitsPerEm*d,h=this.stringToGlyphs(a,e),i;if(e.kerning){let a=e.script||this.position.getDefaultScriptName();i=this.position.getKerningTables(a,e.language)}for(let a=0;a<h.length;a+=1){let j=h[a];f.call(this,j,b,c,d,e);j.advanceWidth&&(b+=j.advanceWidth*g);if(e.kerning&&a<h.length-1){let c=i?this.position.getKerningValue(i,j.index,h[a+1].index):this.getKerningValue(j,h[a+1]);b+=c*g}e.letterSpacing?(b+=e.letterSpacing*d):e.tracking&&(b+=e.tracking/1000*d)}return b};gL.prototype.getPath=function(a,b,c,d,e){let f=new $();this.forEachGlyph(a,b,c,d,e,function(a,b,c,d){let g=a.getPath(b,c,d,e,this);f.extend(g)});return f};gL.prototype.getPaths=function(a,b,c,d,e){let f=[];this.forEachGlyph(a,b,c,d,e,function(a,b,c,d){let g=a.getPath(b,c,d,e,this);f.push(g)});return f};gL.prototype.getAdvanceWidth=function(a,b,c){return this.forEachGlyph(a,0,0,b,c,function(){})};gL.prototype.draw=function(a,b,c,d,e,f){this.getPath(b,c,d,e,f).draw(a)};gL.prototype.drawPoints=function(a,b,c,d,e,f){this.forEachGlyph(b,c,d,e,f,function(b,c,d,e){b.drawPoints(a,c,d,e)})};gL.prototype.drawMetrics=function(a,b,c,d,e,f){this.forEachGlyph(b,c,d,e,f,function(b,c,d,e){b.drawMetrics(a,c,d,e)})};gL.prototype.getEnglishName=function(a){let b=this.names[a];if(b){return b.en}};gL.prototype.validate=function(){let a=this;function b(a,b){}function c(c){let d=a.getEnglishName(c);b(d&&d.trim().length>0)}c('fontFamily');c('weightName');c('manufacturer');c('copyright');c('version');b(this.unitsPerEm>0)};gL.prototype.toTables=function(){return da.fontToTable(this)};gL.prototype.toBuffer=function(){console.warn('Font.toBuffer is deprecated. Use Font.toArrayBuffer instead.');return this.toArrayBuffer()};gL.prototype.toArrayBuffer=function(){let a=this.toTables(),b=a.encode(),c=new ArrayBuffer(b.length),d=new Uint8Array(c);for(let a=0;a<b.length;a++)d[a]=b[a];return c};gL.prototype.download=function(a){let b=this.getEnglishName('fontFamily'),c=this.getEnglishName('fontSubfamily');a=a||b.replace(/\s/g,'')+'-'+c+'.otf';let d=this.toArrayBuffer();if(dj()){window.URL=window.URL||window.webkitURL;if(window.URL){let b=new DataView(d),c=new Blob([b],{type:'font/opentype'}),e=document.createElement('a');e.href=window.URL.createObjectURL(c);e.download=a;let f=document.createEvent('MouseEvents');f.initEvent('click',!0,!1);e.dispatchEvent(f)}else console.warn('Font file could not be downloaded. Try using a different browser.')}else{let b=require('fs'),c=dl(d);b.writeFileSync(a,c)}};gL.prototype.fsSelectionValues={ITALIC:0x001,UNDERSCORE:0x002,NEGATIVE:0x004,OUTLINED:0x008,STRIKEOUT:0x010,BOLD:0x020,REGULAR:0x040,USER_TYPO_METRICS:0x080,WWS:0x100,OBLIQUE:0x200};gL.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};gL.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};function gM(a,b){let c=JSON.stringify(a),d=256;for(let a in b){let e=parseInt(a);if(!e||e<256){continue}if(JSON.stringify(b[a])===c){return e}d<=e&&(d=e+1)}b[d]=a;return d}function gN(a,b,c){let d=gM(b.name,c);return[{name:'tag_'+a,type:'TAG',value:b.tag},{name:'minValue_'+a,type:'FIXED',value:b.minValue<<16},{name:'defaultValue_'+a,type:'FIXED',value:b.defaultValue<<16},{name:'maxValue_'+a,type:'FIXED',value:b.maxValue<<16},{name:'flags_'+a,type:'USHORT',value:0},{name:'nameID_'+a,type:'USHORT',value:d}]}function gO(a,b,c){let d={},e=new aO.Parser(a,b);d.tag=e.parseTag();d.minValue=e.parseFixed();d.defaultValue=e.parseFixed();d.maxValue=e.parseFixed();e.skip('uShort',1);d.name=c[e.parseUShort()]||{};return d}function gP(a,b,c,d){let e=gM(b.name,d),f=[{name:'nameID_'+a,type:'USHORT',value:e},{name:'flags_'+a,type:'USHORT',value:0}];for(let d=0;d<c.length;++d){let e=c[d].tag;f.push({name:'axis_'+a+' '+e,type:'FIXED',value:b.coordinates[e]<<16})}return f}function gQ(a,b,c,d){let e={},f=new aO.Parser(a,b);e.name=d[f.parseUShort()]||{};f.skip('uShort',1);e.coordinates={};for(let a=0;a<c.length;++a)e.coordinates[c[a].tag]=f.parseFixed();return e}function gR(a,b){let c=new aB.Table('fvar',[{name:'version',type:'ULONG',value:0x10000},{name:'offsetToData',type:'USHORT',value:0},{name:'countSizePairs',type:'USHORT',value:2},{name:'axisCount',type:'USHORT',value:a.axes.length},{name:'axisSize',type:'USHORT',value:20},{name:'instanceCount',type:'USHORT',value:a.instances.length},{name:'instanceSize',type:'USHORT',value:4+a.axes.length*4}]);c.offsetToData=c.sizeOf();for(let d=0;d<a.axes.length;d++)c.fields=c.fields.concat(gN(d,a.axes[d],b));for(let d=0;d<a.instances.length;d++)c.fields=c.fields.concat(gP(d,a.instances[d],a.axes,b));return c}function gS(a,b,c){let d=new aO.Parser(a,b),e=d.parseULong();ad.argument(e===0x00010000,'Unsupported fvar table version.');let f=d.parseOffset16();d.skip('uShort',1);let g=d.parseUShort(),h=d.parseUShort(),i=d.parseUShort(),j=d.parseUShort(),k=[];for(let d=0;d<g;d++)k.push(gO(a,b+f+d*h,c));let l=[],m=b+f+g*h;for(let b=0;b<i;b++)l.push(gQ(a,m+b*j,k,c));return{axes:k,instances:l}}var gT={make:gR,parse:gS};let gU=new Array(10);gU[1]=function a(){let b=this.offset+this.relativeOffset,c=this.parseUShort();if(c===1){return{posFormat:1,coverage:this.parsePointer(aM.coverage),value:this.parseValueRecord()}}else if(c===2){return{posFormat:2,coverage:this.parsePointer(aM.coverage),values:this.parseValueRecordList()}};ad.assert(!1,'0x'+b.toString(16)+': GPOS lookup type 1 format must be 1 or 2.')};gU[2]=function a(){let b=this.offset+this.relativeOffset,c=this.parseUShort();ad.assert(c===1||c===2,'0x'+b.toString(16)+': GPOS lookup type 2 format must be 1 or 2.');let d=this.parsePointer(aM.coverage),e=this.parseUShort(),f=this.parseUShort();if(c===1){return{posFormat:c,coverage:d,valueFormat1:e,valueFormat2:f,pairSets:this.parseList(aM.pointer(aM.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(e),value2:this.parseValueRecord(f)}})))}}else if(c===2){let a=this.parsePointer(aM.classDef),b=this.parsePointer(aM.classDef),g=this.parseUShort(),h=this.parseUShort();return{posFormat:c,coverage:d,valueFormat1:e,valueFormat2:f,classDef1:a,classDef2:b,class1Count:g,class2Count:h,classRecords:this.parseList(g,aM.list(h,function(){return{value1:this.parseValueRecord(e),value2:this.parseValueRecord(f)}}))}}};gU[3]=function a(){return{error:'GPOS Lookup 3 not supported'}};gU[4]=function a(){return{error:'GPOS Lookup 4 not supported'}};gU[5]=function a(){return{error:'GPOS Lookup 5 not supported'}};gU[6]=function a(){return{error:'GPOS Lookup 6 not supported'}};gU[7]=function a(){return{error:'GPOS Lookup 7 not supported'}};gU[8]=function a(){return{error:'GPOS Lookup 8 not supported'}};gU[9]=function a(){return{error:'GPOS Lookup 9 not supported'}};function gV(a,b){b=b||0;let c=new aM(a,b),d=c.parseVersion(1);ad.argument(d===1||d===1.1,'Unsupported GPOS table version '+d);if(d===1){return{version:d,scripts:c.parseScriptList(),features:c.parseFeatureList(),lookups:c.parseLookupList(gU)}}else{return{version:d,scripts:c.parseScriptList(),features:c.parseFeatureList(),lookups:c.parseLookupList(gU),variations:c.parseFeatureVariationsList()}}}let gW=new Array(10);function gZ(a){return new aB.Table('GPOS',[{name:'version',type:'ULONG',value:0x10000},{name:'scripts',type:'TABLE',value:new aB.ScriptList(a.scripts)},{name:'features',type:'TABLE',value:new aB.FeatureList(a.features)},{name:'lookups',type:'TABLE',value:new aB.LookupList(a.lookups,gW)}])}var g_={parse:gV,make:gZ};function g$(a){let b={};a.skip('uShort');let c=a.parseUShort();ad.argument(c===0,'Unsupported kern sub-table version.');a.skip('uShort',2);let d=a.parseUShort();a.skip('uShort',3);for(let c=0;c<d;c+=1){let e=a.parseUShort(),f=a.parseUShort(),g=a.parseShort();b[e+','+f]=g}return b}function ha(a){let b={};a.skip('uShort');let c=a.parseULong();c>1&&console.warn('Only the first kern subtable is supported.');a.skip('uLong');let d=a.parseUShort(),e=d&0xFF;a.skip('uShort');if(e===0){let c=a.parseUShort();a.skip('uShort',3);for(let d=0;d<c;d+=1){let e=a.parseUShort(),f=a.parseUShort(),g=a.parseShort();b[e+','+f]=g}}return b}function hb(a,b){let c=new aO.Parser(a,b),d=c.parseUShort();if(d===0){return g$(c)}else if(d===1){return ha(c)}else{throw new Error('Unsupported kern table version ('+d+').')}}var hc={parse:hb};function hd(a,b,c,d){let e=new aO.Parser(a,b),f=d?e.parseUShort:e.parseULong,g=[];for(let a=0;a<c+1;a+=1){let b=f.call(e);d&&(b*=2);g.push(b)}return g}var he={parse:hd};function hf(a,b){let c=require('fs');c.readFile(a,function(a,c){if(a){return b(a.message)}b(null,dk(c))})}function hg(a,b){let c=new XMLHttpRequest();c.open('get',a,!0);c.responseType='arraybuffer';c.onload=function(){if(c.response){return b(null,c.response)}else{return b('Font could not be loaded: '+c.statusText)}};c.onerror=function(){b('Font could not be loaded')};c.send()}function hh(a,b){let c=[],d=12;for(let e=0;e<b;e+=1){let f=aO.getTag(a,d),g=aO.getULong(a,d+4),h=aO.getULong(a,d+8),i=aO.getULong(a,d+12);c.push({tag:f,checksum:g,offset:h,length:i,compression:!1});d+=16}return c}function hi(a,b){let c=[],d=44;for(let e=0;e<b;e+=1){let f=aO.getTag(a,d),g=aO.getULong(a,d+4),h=aO.getULong(a,d+8),i=aO.getULong(a,d+12),j;h<i?(j='WOFF'):(j=!1);c.push({tag:f,offset:g,compression:j,compressedLength:h,length:i});d+=20}return c}function hj(a,b){if(b.compression==='WOFF'){let c=new Uint8Array(a.buffer,b.offset+2,b.compressedLength-2),d=new Uint8Array(b.length);Y(c,d);if(d.byteLength!==b.length){throw new Error('Decompression error: '+b.tag+' decompressed length doesn\'t match recorded length')}let e=new DataView(d.buffer,0);return{data:e,offset:0}}else{return{data:a,offset:b.offset}}}function hk(a,b){b=b===undefined||b===null?{}:b;let c,d,e=new gL({empty:!0}),f=new DataView(a,0),g,h=[],i=aO.getTag(f,0);if(i===String.fromCharCode(0,1,0,0)||i==='true'||i==='typ1')e.outlinesFormat='truetype',g=aO.getUShort(f,4),h=hh(f,g);else if(i==='OTTO')e.outlinesFormat='cff',g=aO.getUShort(f,4),h=hh(f,g);else if(i==='wOFF'){let a=aO.getTag(f,4);if(a===String.fromCharCode(0,1,0,0))e.outlinesFormat='truetype';else if(a==='OTTO')e.outlinesFormat='cff';else{throw new Error('Unsupported OpenType flavor '+i)};g=aO.getUShort(f,12);h=hi(f,g)}else{throw new Error('Unsupported OpenType signature '+i)};let j,k,l,m,n,o,p,q,r,s,t;for(let a=0;a<g;a+=1){let b=h[a],i;switch(b.tag){case 'cmap':i=hj(f,b);e.tables.cmap=aV.parse(i.data,i.offset);e.encoding=new a$(e.tables.cmap);break;case 'cvt ':i=hj(f,b);t=new aO.Parser(i.data,i.offset);e.tables.cvt=t.parseShortList(b.length/2);break;case 'fvar':k=b;break;case 'fpgm':i=hj(f,b);t=new aO.Parser(i.data,i.offset);e.tables.fpgm=t.parseByteList(b.length);break;case 'head':i=hj(f,b);e.tables.head=b$.parse(i.data,i.offset);e.unitsPerEm=e.tables.head.unitsPerEm;c=e.tables.head.indexToLocFormat;break;case 'hhea':i=hj(f,b);e.tables.hhea=cc.parse(i.data,i.offset);e.ascender=e.tables.hhea.ascender;e.descender=e.tables.hhea.descender;e.numberOfHMetrics=e.tables.hhea.numberOfHMetrics;break;case 'hmtx':o=b;break;case 'ltag':i=hj(f,b);d=ck.parse(i.data,i.offset);break;case 'maxp':i=hj(f,b);e.tables.maxp=cn.parse(i.data,i.offset);e.numGlyphs=e.tables.maxp.numGlyphs;break;case 'name':r=b;break;case 'OS/2':i=hj(f,b);e.tables.os2=cI.parse(i.data,i.offset);break;case 'post':i=hj(f,b);e.tables.post=cL.parse(i.data,i.offset);e.glyphNames=new bb(e.tables.post);break;case 'prep':i=hj(f,b);t=new aO.Parser(i.data,i.offset);e.tables.prep=t.parseByteList(b.length);break;case 'glyf':l=b;break;case 'loca':q=b;break;case 'CFF ':j=b;break;case 'kern':p=b;break;case 'GPOS':m=b;break;case 'GSUB':n=b;break;case 'meta':s=b;break}}let u=hj(f,r);e.tables.name=cD.parse(u.data,u.offset,d);e.names=e.tables.name;if(l&&q){let a=c===0,d=hj(f,q),g=he.parse(d.data,d.offset,e.numGlyphs,a),h=hj(f,l);e.glyphs=dy.parse(h.data,h.offset,g,e,b)}else if(j){let a=hj(f,j);bY.parse(a.data,a.offset,e,b)}else{throw new Error('Font doesn\'t contain TrueType or CFF outlines.')};let v=hj(f,o);ch.parse(e,v.data,v.offset,e.numberOfHMetrics,e.numGlyphs,e.glyphs,b);be(e,b);if(p){let a=hj(f,p);e.kerningPairs=hc.parse(a.data,a.offset)}else e.kerningPairs={};if(m){let a=hj(f,m);e.tables.gpos=g_.parse(a.data,a.offset);e.position.init()}if(n){let a=hj(f,n);e.tables.gsub=cR.parse(a.data,a.offset)}if(k){let a=hj(f,k);e.tables.fvar=gT.parse(a.data,a.offset,e.names)}if(s){let a=hj(f,s);e.tables.meta=cU.parse(a.data,a.offset);e.metas=e.tables.meta}return e}function hl(a,b,c){let d=typeof window==='undefined',f=d?hf:hg;f(a,function(a,d){if(a){return b(a)}let f;try{f=hk(d,c)}catch(a){return b(a,null)};return b(null,f)})}Function.prototype.$asyncbind=function d(a,b){Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:d,enumerable:!1,configurable:!0,writable:!0});d.trampoline||(d.trampoline=function f(a,b,c,d,e){return function g(f){while(f){if(f.then){f=f.then(g,d);return e?undefined:f}try{if(f.pop){if(f.length)return f.pop()?b.call(a):f;f=c}else f=f.call(a)}catch(a){return d(a)}}}});d.LazyThenable||(d.LazyThenable=function(){function a(a){return a&&a instanceof Object&&typeof a.then==="function"}function b(c,d,f){try{var g=f?f(d):d;if(c===g)return c.reject(new TypeError("Promise resolution loop"));a(g)?g.then(function(a){b(c,a)},function(a){c.reject(a)}):c.resolve(g)}catch(a){c.reject(a)}}function c(a){}function d(a,b){this.resolve=a;this.reject=b}function f(){}f.prototype={resolve:c,reject:c,then:d};function g(c,d){var e=new f();try{this._resolver(function(f){return a(f)?f.then(c,d):b(e,f,c)},function(a){b(e,a,d)})}catch(a){b(e,a,d)};return e}function h(a){this._resolver=a;this.then=g}h.resolve=function(a){return h.isThenable(a)?a:{then:function c(b){return b(a)}}};h.isThenable=a;return h}(),d.EagerThenable=d.Thenable=(d.EagerThenableFactory=function(a){a=a||(typeof process==="undefined"?"undefined":h(process))==="object"&&process.nextTick||typeof setImmediate==="function"&&setImmediate||function(a){setTimeout(a,0)};var b=function(){var b=[],c=0,d=1024;function e(){while(b.length-c){try{b[c]()}catch(a){};b[c++]=undefined;c===d&&(b.splice(0,d),c=0)}}return function(d){b.push(d);b.length-c===1&&a(e)}}();function d(a){if(a){var b=this;a(function(a){b.resolve(a)},function(a){b.reject(a)})}}d.prototype={resolve:function c(a){if(this.state!==undefined)return;if(a===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var d=this;if(a&&(typeof a==="function"||h(a)==="object")){try{var f=0,i=a.then;if(typeof i==="function"){i.call(a,function(a){f++||d.resolve(a)},function(a){f++||d.reject(a)});return}}catch(a){f||this.reject(a);return}}this.state=g;this.v=a;d.c&&b(function(){for(var b=0,c=d.c.length;b<c;b++)g(d.c[b],a)})},reject:function c(a){if(this.state!==undefined)return;this.state=i;this.v=a;var d=this.c;d&&b(function(){for(var b=0,c=d.length;b<c;b++)i(d[b],a)})},then:function e(a,c){var f=new d(),g={y:a,n:c,p:f};if(this.state===undefined)this.c?this.c.push(g):(this.c=[g]);else{var h=this.state,i=this.v;b(function(){h(g,i)})}return f}};function g(a,b){if(typeof a.y==="function"){try{var c=a.y.call(undefined,b);a.p.resolve(c)}catch(b){a.p.reject(b)}}else a.p.resolve(b)}function i(a,b){if(typeof a.n==="function"){try{var c=a.n.call(undefined,b);a.p.resolve(c)}catch(b){a.p.reject(b)}}else a.p.reject(b)}d.resolve=function(a){if(a&&a instanceof d)return a;var b=new d();b.resolve(a);return b};d.reject=function(a){if(a&&a instanceof d)return a;var b=new d();b.reject(a);return b};d.version="2.3.3-nodent";return d})());function g(){return i.apply(a,arguments)}var i=this;switch(b){case !0:return new d.Thenable(g);case 0:return new d.LazyThenable(g);case undefined:g.then=g;return g;default:return function(){try{return i.apply(a,arguments)}catch(a){return b(a)}}}};var hm=function(){function a(){var b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";o(this,a);this.url=b;this.name=c;this.fonts={}}z(a,[{key:"loadGFonts",value:function(){var a=k(function*(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.name,b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.variants,c=this._makeGFontUrls(a,b);this.fonts={};for(var d in b){var e=yield this._load(c[d]);this.fonts[b[d]]=e}});function b(){return a.apply(this,arguments)}return b}()},{key:"loadFont",value:function(){var a=k(function*(a){var b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.name,c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"Regular";this.name=b;var d=yield this._load(a);this.fonts[c]=d});function b(b){return a.apply(this,arguments)}return b}()},{key:"_load",value:function b(a){return new Promise(function(b){hl(a,function(a,c){a?Promise.reject("Font could not be loaded: "+a):b(c)})})}},{key:"getFontVariant",value:function b(a){return this.fonts[a]}},{key:"_makeGFontUrls",value:function c(a,b){var d="https://raw.githubusercontent.com/google/fonts/master/ofl/",e=a.replace(" ",""),f=e.toLowerCase(),g=b.map(function(a){return a.replace(" ","").replace("-","")});return g.map(function(a){return d+f+"/"+e+"-"+a+".ttf"})}}]);return a}(),hn=function b(a){a.context.fillStyle=a.backgroundColor;a.context.fillRect(0,0,a.canvas.width,a.canvas.height)},ho=function b(a){a.context.clearRect(0,0,a.canvas.width,a.canvas.height)},hp=function(){function a(){var b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;o(this,a);this.canvas=b;this.context=b?b.getContext("2d"):null;this.webgl=c;this._loop=!1;this._frameCount=0;this.framesPerSecond(30);this._animationBuffer=[ho,hn]}z(a,[{key:"hasCanvas",value:function a(){if(!this.canvas){throw "Trying to access null canvas"}return !0}},{key:"hasContext",value:function a(){var b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;if(!this.context){return b}return !0}},{key:"backgroundColor",value:function b(a){a&&(this._backgroundColor=a);return this._backgroundColor}},{key:"framesPerSecond",value:function b(a){a&&(this._fps=a,this._fpsInterval=1000/a);return this._fps}},{key:"addToAnimation",value:function b(a){this._animationBuffer.push(a)}},{key:"startAnimationLoop",value:function a(){this._loop=!0;this._then=window.performance.now();this._startTime=this._then;this._animationLoop(this)}},{key:"stopAnimationLoop",value:function a(){this._loop=!1}},{key:"_animationLoop",value:function b(a){if(a._loop&&a.hasCanvas()&&a.hasContext()){var c=window.performance.now(),d=c-a._then;d>300&&(a._startTime=c,a._frameCount=0,a._then=c,d=0);if(d>a._fpsInterval){a._then=c-d%a._fpsInterval;a._frameCount+=1;var f=c-a._startTime,g=Math.round(1000/(f/a._frameCount)),h={canvas:a.canvas,context:a.context,hasContext:a.hasContext,hasCanvas:a.hasCanvas,backgroundColor:a._backgroundColor,deltaTime:d/100,frameCount:a._frameCount,startTime:a._startTime,fps:g};a.context.save();var i=!0,j=!1,k=undefined;try{for(var l=a._animationBuffer[Symbol.iterator](),m;!(i=(m=l.next()).done);i=!0){var n=m.value;try{n(h)}catch(a){throw "Error in renderer function: "+a}}}catch(a){j=!0,k=a}finally{try{!i&&l["return"]!=null&&l["return"]()}finally{if(j){throw k}}};a.context.restore()}var o=function b(){a._animationLoop(a)};requestAnimationFrame(o)}}}]);return a}();g.Animator=hp;g.Font=hm;g.backgroundRenderer=hn;g.clearPrevRenderer=ho;Object.defineProperty(g,'__esModule',{value:!0})})
