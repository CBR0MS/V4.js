<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>V4.js</title>
    </head>
    <body>
        <script src="./V4.min.js"></script>
        <canvas id="testCanvas"></canvas>

        <script>
            var start = async function() {
                var canvas = document.getElementById("testCanvas");
                var animator = new V4.Animator(canvas, false);
                animator.canvas.height = 500;
                animator.canvas.width = 800;
                animator.backgroundColor("#fff");

                var fontObj = new V4.Font();
                await fontObj.loadFont(
                    "assets/CrimsonText-Regular.ttf",
                    "Crimson Text",
                    "Regular"
                );

                // var res = await fontObj.loadGFonts("Crimson Text", [
                //     "Regular",
                //     "Italic"
                // ]);

                var font = fontObj.getFontVariant("Regular");

                animator.framesPerSecond(60);
                var x = 0;
                var right = true;
                var speed = 20;

                function backgroundRenderer(state) {
                    right
                        ? (x += speed * state.deltaTime)
                        : (x -= speed * state.deltaTime);

                    if (x + 100 > state.canvas.width) {
                        right = false;
                    } else if (x - 100 <= 0) {
                        right = true;
                    }

                    state.context.fillStyle = "#000";
                    state.context.fillRect(x, 20, 100, 200);
                    //state.context.fillColor();

                    //   let path = font.getPath("Hello, World!", x, 150, 72);
                    // path.fill = "white";
                    //  path.draw(animator.context);
                }

                animator.addToAnimation(backgroundRenderer);

                animator.startAnimationLoop();
            };

            start();
        </script>
    </body>
</html>
